{"version":3,"sources":["webpack://root/./node_modules/mustache/mustache.js","webpack://root/webpack/bootstrap","webpack://root/webpack/runtime/compat get default export","webpack://root/webpack/runtime/define property getters","webpack://root/webpack/runtime/hasOwnProperty shorthand","webpack://root/./node_modules/@shopify/theme-sections/section.js","webpack://root/./node_modules/@shopify/theme-sections/theme-sections.js","webpack://root/./node_modules/tiny-slider/src/helpers/raf.js","webpack://root/./node_modules/tiny-slider/src/helpers/caf.js","webpack://root/./node_modules/tiny-slider/src/helpers/extend.js","webpack://root/./node_modules/tiny-slider/src/helpers/checkStorageValue.js","webpack://root/./node_modules/tiny-slider/src/helpers/setLocalStorage.js","webpack://root/./node_modules/tiny-slider/src/helpers/getBody.js","webpack://root/./node_modules/tiny-slider/src/helpers/docElement.js","webpack://root/./node_modules/tiny-slider/src/helpers/setFakeBody.js","webpack://root/./node_modules/tiny-slider/src/helpers/resetFakeBody.js","webpack://root/./node_modules/tiny-slider/src/helpers/addCSSRule.js","webpack://root/./node_modules/tiny-slider/src/helpers/getCssRulesLength.js","webpack://root/./node_modules/tiny-slider/src/helpers/forEach.js","webpack://root/./node_modules/tiny-slider/src/helpers/classListSupport.js","webpack://root/./node_modules/tiny-slider/src/helpers/hasClass.js","webpack://root/./node_modules/tiny-slider/src/helpers/addClass.js","webpack://root/./node_modules/tiny-slider/src/helpers/removeClass.js","webpack://root/./node_modules/tiny-slider/src/helpers/hasAttr.js","webpack://root/./node_modules/tiny-slider/src/helpers/getAttr.js","webpack://root/./node_modules/tiny-slider/src/helpers/isNodeList.js","webpack://root/./node_modules/tiny-slider/src/helpers/setAttrs.js","webpack://root/./node_modules/tiny-slider/src/helpers/removeAttrs.js","webpack://root/./node_modules/tiny-slider/src/helpers/arrayFromNodeList.js","webpack://root/./node_modules/tiny-slider/src/helpers/hideElement.js","webpack://root/./node_modules/tiny-slider/src/helpers/showElement.js","webpack://root/./node_modules/tiny-slider/src/helpers/isVisible.js","webpack://root/./node_modules/tiny-slider/src/helpers/whichProperty.js","webpack://root/./node_modules/tiny-slider/src/helpers/getEndProperty.js","webpack://root/./node_modules/tiny-slider/src/helpers/passiveOption.js","webpack://root/./node_modules/tiny-slider/src/helpers/addEvents.js","webpack://root/./node_modules/tiny-slider/src/helpers/removeEvents.js","webpack://root/./node_modules/tiny-slider/src/helpers/events.js","webpack://root/./node_modules/tiny-slider/src/tiny-slider.js","webpack://root/./node_modules/tiny-slider/src/helpers/calc.js","webpack://root/./node_modules/tiny-slider/src/helpers/percentageLayout.js","webpack://root/./node_modules/tiny-slider/src/helpers/mediaquerySupport.js","webpack://root/./node_modules/tiny-slider/src/helpers/has3DTransforms.js","webpack://root/./node_modules/tiny-slider/src/helpers/getSlideId.js","webpack://root/./node_modules/tiny-slider/src/helpers/createStyleSheet.js","webpack://root/./node_modules/tiny-slider/src/helpers/jsTransform.js","webpack://root/./node_modules/tiny-slider/src/helpers/removeCSSRule.js","webpack://root/./node_modules/tiny-slider/src/helpers/toDegree.js","webpack://root/./node_modules/tiny-slider/src/helpers/getTouchDirection.js","webpack://root/./node_modules/@shopify/theme-images/images.js","webpack://root/./app/scripts/.common/_arn.js","webpack://root/./app/scripts/.common/section/header.js","webpack://root/./app/scripts/.common/section/product-no-sidebar.js","webpack://root/./app/scripts/.common/section/product-with-sidebar.js","webpack://root/./app/scripts/.common/section/product-default.js","webpack://root/./app/scripts/.common/section/related-product.js","webpack://root/./app/scripts/product-page-default.js"],"names":["module","exports","objectToString","Object","prototype","toString","isArray","Array","object","call","isFunction","typeStr","obj","escapeRegExp","string","replace","hasProperty","propName","primitiveHasOwnProperty","primitive","hasOwnProperty","regExpTest","RegExp","test","testRegExp","re","nonSpaceRe","isWhitespace","entityMap","escapeHtml","String","s","whiteRe","spaceRe","equalsRe","curlyRe","tagRe","parseTemplate","template","tags","openingTagRe","closingTagRe","closingCurlyRe","lineHasNonSpace","sections","tokens","spaces","hasTag","nonSpace","indentation","tagIndex","stripSpace","length","pop","compileTags","tagsToCompile","split","Error","mustache","start","type","value","chr","token","openSection","scanner","Scanner","eos","pos","scanUntil","i","valueLength","charAt","push","scan","nestTokens","squashTokens","lastToken","squashedTokens","numTokens","nestedTokens","collector","this","tail","Context","view","parentContext","cache","parent","Writer","templateCache","_cache","set","key","get","clear","match","index","substring","search","lookup","name","intermediateValue","names","context","lookupHit","indexOf","clearCache","parse","cacheKey","join","isCacheEnabled","undefined","render","partials","config","getConfigTags","renderTokens","originalTemplate","symbol","buffer","renderSection","renderInverted","renderPartial","unescapedValue","escapedValue","rawValue","self","subRender","j","slice","indentPartial","partial","filteredIndentation","partialByNl","indentedValue","escape","getConfigEscape","version","defaultWriter","TypeError","factory","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","prop","SECTION_ID_ATTR","Section","container","properties","Element","getAttribute","validateContainerElement","id","extensions","assign","validatePropertiesObject","onLoad","Function","onUnload","onSelect","onDeselect","onBlockSelect","onBlockDeselect","extend","extension","extensionClone","init","apply","target","to","arguments","nextSource","nextKey","writable","configurable","SECTION_TYPE_ATTR","window","Shopify","theme","registered","instances","register","TypedSection","constructor","create","load","types","containers","normalizeType","document","querySelectorAll","normalizeContainers","forEach","filter","getInstances","selector","filteredInstances","NodeList","isPrototypeOf","firstElement","concat","instance","getInstanceById","keys","map","toLowerCase","designMode","addEventListener","event","detail","sectionId","querySelector","e","splice","win","raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","cb","setTimeout","caf","cancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","copy","checkStorageValue","JSON","setLocalStorage","storage","access","setItem","getBody","doc","body","createElement","fake","docElement","documentElement","setFakeBody","docOverflow","style","overflow","background","appendChild","resetFakeBody","remove","offsetHeight","addCSSRule","sheet","rules","insertRule","addRule","getCssRulesLength","cssRules","arr","callback","scope","l","classListSupport","hasClass","el","str","classList","contains","className","addClass","add","removeClass","hasAttr","attr","hasAttribute","getAttr","isNodeList","item","setAttrs","els","attrs","setAttribute","removeAttrs","attrLength","removeAttribute","arrayFromNodeList","nl","hideElement","forceHide","display","showElement","isVisible","getComputedStyle","whichProperty","props","Props","toUpperCase","substr","prefix","getEndProperty","propIn","propOut","endProp","supportsPassive","opts","passiveOption","passive","addEvents","preventScrolling","option","removeEvents","removeEventListener","Events","topics","on","eventName","fn","off","emit","data","parentNode","removeChild","tns","options","mode","axis","items","gutter","edgePadding","fixedWidth","autoWidth","viewportMax","slideBy","center","controls","controlsPosition","controlsText","controlsContainer","prevButton","nextButton","nav","navPosition","navContainer","navAsThumbnails","arrowKeys","speed","autoplay","autoplayPosition","autoplayTimeout","autoplayDirection","autoplayText","autoplayHoverPause","autoplayButton","autoplayButtonOutput","autoplayResetOnVisibility","animateIn","animateOut","animateNormal","animateDelay","loop","rewind","autoHeight","responsive","lazyload","lazyloadSelector","touch","mouseDrag","swipeAngle","nested","preventActionWhenRunning","preventScrollOnTouch","freezable","onInit","useLocalStorage","nonce","KEYS","ENTER","SPACE","LEFT","RIGHT","tnsStorage","localStorageAccess","browserInfo","navigator","userAgent","uid","Date","localStorage","getItem","removeItem","CALC","div","result","val","vals","width","offsetWidth","calc","PERCENTAGELAYOUT","supported","wrapper","outer","innerHTML","Math","abs","getBoundingClientRect","left","children","count","percentageLayout","CSSMQ","matchMedia","msMatchMedia","position","rule","styleSheet","cssText","createTextNode","currentStyle","mediaquerySupport","TRANSFORM","HAS3DTRANSFORMS","tf","has3d","cssTF","insertBefore","getPropertyValue","has3DTransforms","TRANSITIONDURATION","TRANSITIONDELAY","ANIMATIONDURATION","ANIMATIONDELAY","TRANSITIONEND","ANIMATIONEND","supportConsoleWarn","console","warn","tnsList","optionsElements","nodeName","carousel","responsiveTem","updateOptions","middleWrapper","breakpointZone","horizontal","outerWrapper","innerWrapper","containerParent","containerHTML","outerHTML","slideItems","slideCount","windowWidth","getWindowWidth","isOn","setBreakpointZone","slidePositions","imgsComplete","liveregionCurrent","itemsMax","media","getOption","viewport","getViewportWidth","floor","fixedWidthViewportWidth","slideItemsOut","cloneCount","bp","tem","ceil","min","max","getItemsMax","hasOption","slideCountNew","hasRightDeadZone","rightBoundary","getRightBoundary","updateIndexBeforeTransform","transformAttr","transformPrefix","transformPostfix","getIndexMax","getStartIndex","indexCached","indexMin","getCurrentSlide","indexMax","moveDirectionExpected","running","events","newContainerClasses","slideId","tnsId","disable","disabled","freeze","getFreeze","frozen","controlsEvents","onControlsClick","getEvent","keyIndex","keyCode","navEvents","onTransitionEnd","getTarget","navIndex","navClicked","Number","targetIndexBase","pages","goTo","navCurrentIndex","animating","stopAutoplay","curElement","activeElement","setFocus","navItems","hoverEvents","stopAutoplayTimer","autoplayHoverPaused","setAutoplayTimer","visibilityEvent","hidden","autoplayVisibilityPaused","docmentKeydownEvent","touchEvents","onPanStart","onPanMove","onPanEnd","dragEvents","hasControls","hasNav","hasAutoplay","hasTouch","hasMouseDrag","slideActiveClass","slideClonedClass","imgCompleteClass","imgEvents","imgLoaded","img","imgCompleted","preventScroll","prevIsButton","nextIsButton","controlsContainerHTML","prevButtonHTML","nextButtonHTML","navContainerHTML","getPages","pagesCached","getCurrentNavIndex","navCurrentIndexCached","navActiveClass","navStr","navStrCurrent","autoplayTimer","autoplayUserPaused","autoplayButtonHTML","autoplayHtmlStrings","translateInit","rafIndex","initPosition","lastPosition","panStart","getDist","b","x","y","resetVariblesWhenDisable","fragmentBefore","createDocumentFragment","fragmentAfter","num","cloneFirst","cloneNode","firstChild","cloneLast","initStructure","fontSize","slide","marginLeft","getSlideMarginLeft","getTransitionDurationStyle","getInnerWrapperStyles","getContainerWidth","getSlideWidthStyle","getSlideGutterStyle","getAnimationDurationStyle","parseInt","middleWrapperStr","innerWrapperStr","containerStr","slideStr","itemsBP","fixedWidthBP","speedBP","edgePaddingBP","autoHeightBP","gutterBP","initSheet","initSliderTransform","updateIndex","leftEdge","rightEdge","transformCore","element","postfix","duration","tick","unit","from","positionTick","resetDuration","doContainerTransform","getContainerTransformValue","moveElement","updateContentWrapperHeight","eve","animateSlide","getInfo","info","play","startAutoplay","pause","updateSliderHeight","updateInnerWrapperHeight","refresh","destroy","ownerNode","onResize","toggleAutoplay","clearInterval","htmlList","prevEl","previousElementSibling","parentEl","nextElementSibling","firstElementChild","rebuild","condition","ind","getAbsIndex","absIndex","innerWidth","clientWidth","getInsertPosition","getClientWidth","rect","right","gap","ww","edgePaddingTem","gutterTem","fixedWidthTem","speedTem","gutterTemUnit","itemsTem","dividend","getCSSPrefix","imgs","src","imgsLoadedCheck","getImageArray","initSliderTransformStyleCheck","doContainerTransformSilent","initTools","initEvents","stylesApplicationCheck","initSliderTransformCore","setSlidePositions","updateSlideStatus","insertAdjacentHTML","getLiveRegionStr","txt","navHtml","hiddenStr","updateNavVisibility","isButton","updateControlsStatus","disableUI","resizeTasks","doAutoHeight","doLazyLoad","disableSlider","freezeSlider","additionalUpdates","bpChanged","breakpointZoneTem","needContainerTransform","indChanged","itemsChanged","disableTem","freezeTem","arrowKeysTem","controlsTem","navTem","touchTem","mouseDragTem","autoplayTem","autoplayHoverPauseTem","autoplayResetOnVisibilityTem","indexTem","autoHeightTem","controlsTextTem","centerTem","autoplayTextTem","classN","enableUI","enableSlider","margin","unfreezeSlider","height","html","len","updateLiveRegion","updateGallerySlidePositions","deleteRule","removeRule","removeCSSRule","vp","getVisibleSlideRange","end","rangestart","rangeend","parseFloat","point","cell","arg","stopPropagation","srcset","imgSelector","complete","navPrev","navCurrent","updateNavStatus","getMaxSlideHeight","slideStart","slideRange","heights","maxHeight","wp","attr2","base","range","getLowerCaseNodeName","isAriaDisabled","disEnableElement","prevDisabled","nextDisabled","disablePrev","disableNext","getCenterGap","denominator","number","classOut","classIn","isOut","sliderMoved","strTrans","propertyName","targetIndex","indexGap","isNaN","factor","dir","passEventObject","targetIn","setInterval","updateAutoplayButton","action","focus","isTouchEvent","changedTouches","srcElement","preventDefaultBehavior","preventDefault","returnValue","getMoveDirectionExpected","angle","atan2","PI","direction","$","clientX","clientY","panUpdate","cancelable","err","dist","preventClick","indexMoved","moved","rough","displayIndex","getSizedImageUrl","size","removeProtocol","suffix","path","AT","eventContainers","currency","formatMoney","cents","format","placeholderRegex","formatString","formatWithDelimiters","precision","thousands","decimal","parts","toFixed","cart","debounce","func","wait","timeout","args","later","initTNS","tnsContainer","getElementsByClassName","configId","getElementById","itemClass","initHandleCollapse","btn","collapseContainer","handleCollapse","btnTrigger","first","isComplete","reduce","accu","currentValue","initBackToTop","btnToTop","scroll","top","behavior","pageYOffset","innerHeight","initAddToCart","form","btnAddToCart","fetch","method","headers","Headers","FormData","then","res","json","dataProduct","dispatchEvent","log","message","initProductCard","productCart","getCart","item_count","removeCartItem","URLSearchParams","quantity","registerEvents","error","CustomEvent","serialize","serialized","elements","field","selected","encodeURIComponent","checked","initCountdown","countdownContainers","countdown","daysElm","hoursElm","minutesElm","secondsElm","date","getTime","timer","easytimer","Timer","startValues","seconds","days","getTimeValues","hours","minutes","initTabs","closest","targetID","tabContent","parentElement","initModal","button","modal","cartNotify","setCookie","expiry","expires","setTime","cookie","toUTCString","getCookie","keyValue","image","qty","totalMoney","cartNumber","cartTotalMoney","opacity","featured_image","url","alt","title","onload","product_title","options_with_values","cartNumbers","final_line_price","moneyFormat","total_price","newsletter","initRecentlyView","recentlyView","includes","productHandle","unshift","stringify","initToggleSidebar","openSbBtn","closeSbBtn","Header","elms","mobileDrawerOpenBtn","totalCartItems","totalCartMoney","deskLazyMenu","mobileLazyMenu","drawerMobileVertical","drawerMobileHorizontal","cartDrawer","openDrawerCart","dropdownCart","headerCart","initHandleDrawMenu","initHandleDrawCart","initLazyDropdownCart","initDeskLazyMenu","initMobileLazyMenu","handleCartChange","bind","firstClick","lazyMenu","lazyMenuContainer","togglerBtn","toggle","lazyCartDrawer","closeBtn","cartItems","initCartItem","btnRemove","lazyContainer","lazyDropdownCart","recentlyViewContainer","recentlyViewTemplate","recent_total","recentlyViewTotal","recentlyViewPromise","trim","Promise","all","recentlyViewData","Mustache","ProductDefaultTemplate","mainMedia","thumbnailsMedia","productMedia","qtyBtnPlus","qtyBtnMinus","formElm","formInput","tabControls","tabContents","initSlideMedia","initQuantity","initTab","configID","dataset","control","parentTabsContent","RelatedProduct","tnsWrapper"],"mappings":"6BAEiEA,EAAOC,QAGhE,WAAe,aAOrB,IAAIC,EAAiBC,OAAOC,UAAUC,SAClCC,EAAUC,MAAMD,SAAW,SAA0BE,GACvD,MAAuC,mBAAhCN,EAAeO,KAAKD,IAG7B,SAASE,EAAYF,GACnB,MAAyB,mBAAXA,EAOhB,SAASG,EAASC,GAChB,OAAON,EAAQM,GAAO,eAAiBA,EAGzC,SAASC,EAAcC,GACrB,OAAOA,EAAOC,QAAQ,8BAA+B,QAOvD,SAASC,EAAaJ,EAAKK,GACzB,OAAc,MAAPL,GAA8B,iBAARA,GAAqBK,KAAYL,EAOhE,SAASM,EAAyBC,EAAWF,GAC3C,OACe,MAAbE,GACwB,iBAAdA,GACPA,EAAUC,gBACVD,EAAUC,eAAeH,GAMhC,IAAII,EAAaC,OAAOlB,UAAUmB,KAClC,SAASC,EAAYC,EAAIX,GACvB,OAAOO,EAAWZ,KAAKgB,EAAIX,GAG7B,IAAIY,EAAa,KACjB,SAASC,EAAcb,GACrB,OAAQU,EAAWE,EAAYZ,GAGjC,IAAIc,EAAY,CACd,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,UAGP,SAASC,EAAYf,GACnB,OAAOgB,OAAOhB,GAAQC,QAAQ,gBAAgB,SAAwBgB,GACpE,OAAOH,EAAUG,MAIrB,IAAIC,EAAU,MACVC,EAAU,MACVC,EAAW,OACXC,EAAU,QACVC,EAAQ,qBA4BZ,SAASC,EAAeC,EAAUC,GAChC,IAAKD,EACH,MAAO,GACT,IAuBIE,EAAcC,EAAcC,EAvB5BC,GAAkB,EAClBC,EAAW,GACXC,EAAS,GACTC,EAAS,GACTC,GAAS,EACTC,GAAW,EACXC,EAAc,GACdC,EAAW,EAIf,SAASC,IACP,GAAIJ,IAAWC,EACb,KAAOF,EAAOM,eACLP,EAAOC,EAAOO,YAEvBP,EAAS,GAGXC,GAAS,EACTC,GAAW,EAIb,SAASM,EAAaC,GAIpB,GAH6B,iBAAlBA,IACTA,EAAgBA,EAAcC,MAAMvB,EAAS,KAE1C3B,EAAQiD,IAA2C,IAAzBA,EAAcH,OAC3C,MAAM,IAAIK,MAAM,iBAAmBF,GAErCf,EAAe,IAAIlB,OAAOT,EAAa0C,EAAc,IAAM,QAC3Dd,EAAe,IAAInB,OAAO,OAAST,EAAa0C,EAAc,KAC9Db,EAAiB,IAAIpB,OAAO,OAAST,EAAa,IAAM0C,EAAc,KAGxED,EAAYf,GAAQmB,EAASnB,MAK7B,IAHA,IAEIoB,EAAOC,EAAMC,EAAOC,EAAKC,EAAOC,EAFhCC,EAAU,IAAIC,EAAQ5B,IAGlB2B,EAAQE,OAAO,CAMrB,GALAR,EAAQM,EAAQG,IAGhBP,EAAQI,EAAQI,UAAU7B,GAGxB,IAAK,IAAI8B,EAAI,EAAGC,EAAcV,EAAMT,OAAQkB,EAAIC,IAAeD,EAGzD3C,EAFJmC,EAAMD,EAAMW,OAAOF,KAGjBxB,EAAO2B,KAAK5B,EAAOO,QACnBH,GAAea,IAEfd,GAAW,EACXL,GAAkB,EAClBM,GAAe,KAGjBJ,EAAO4B,KAAK,CAAE,OAAQX,EAAKH,EAAOA,EAAQ,IAC1CA,GAAS,EAGG,OAARG,IACFX,IACAF,EAAc,GACdC,EAAW,EACXP,GAAkB,GAMxB,IAAKsB,EAAQS,KAAKlC,GAChB,MAuBF,GArBAO,GAAS,EAGTa,EAAOK,EAAQS,KAAKtC,IAAU,OAC9B6B,EAAQS,KAAK1C,GAGA,MAAT4B,GACFC,EAAQI,EAAQI,UAAUnC,GAC1B+B,EAAQS,KAAKxC,GACb+B,EAAQI,UAAU5B,IACA,MAATmB,GACTC,EAAQI,EAAQI,UAAU3B,GAC1BuB,EAAQS,KAAKvC,GACb8B,EAAQI,UAAU5B,GAClBmB,EAAO,KAEPC,EAAQI,EAAQI,UAAU5B,IAIvBwB,EAAQS,KAAKjC,GAChB,MAAM,IAAIgB,MAAM,mBAAqBQ,EAAQG,KAU/C,GAPEL,EADU,KAARH,EACM,CAAEA,EAAMC,EAAOF,EAAOM,EAAQG,IAAKnB,EAAaC,EAAUP,GAE1D,CAAEiB,EAAMC,EAAOF,EAAOM,EAAQG,KAExClB,IACAL,EAAO4B,KAAKV,GAEC,MAATH,GAAyB,MAATA,EAClBhB,EAAS6B,KAAKV,QACT,GAAa,MAATH,EAAc,CAIvB,KAFAI,EAAcpB,EAASS,OAGrB,MAAM,IAAII,MAAM,qBAAuBI,EAAQ,QAAUF,GAE3D,GAAIK,EAAY,KAAOH,EACrB,MAAM,IAAIJ,MAAM,qBAAuBO,EAAY,GAAK,QAAUL,OAClD,SAATC,GAA4B,MAATA,GAAyB,MAATA,EAC5CZ,GAAW,EACO,MAATY,GAETN,EAAYO,GAShB,GALAV,IAGAa,EAAcpB,EAASS,MAGrB,MAAM,IAAII,MAAM,qBAAuBO,EAAY,GAAK,QAAUC,EAAQG,KAE5E,OAAOO,EAAWC,EAAa/B,IAOjC,SAAS+B,EAAc/B,GAIrB,IAHA,IAEIkB,EAAOc,EAFPC,EAAiB,GAGZR,EAAI,EAAGS,EAAYlC,EAAOO,OAAQkB,EAAIS,IAAaT,GAC1DP,EAAQlB,EAAOyB,MAGI,SAAbP,EAAM,IAAiBc,GAA8B,SAAjBA,EAAU,IAChDA,EAAU,IAAMd,EAAM,GACtBc,EAAU,GAAKd,EAAM,KAErBe,EAAeL,KAAKV,GACpBc,EAAYd,IAKlB,OAAOe,EAST,SAASH,EAAY9B,GAMnB,IALA,IAIIkB,EAJAiB,EAAe,GACfC,EAAYD,EACZpC,EAAW,GAGN0B,EAAI,EAAGS,EAAYlC,EAAOO,OAAQkB,EAAIS,IAAaT,EAG1D,QAFAP,EAAQlB,EAAOyB,IAED,IACZ,IAAK,IACL,IAAK,IACHW,EAAUR,KAAKV,GACfnB,EAAS6B,KAAKV,GACdkB,EAAYlB,EAAM,GAAK,GACvB,MACF,IAAK,IACOnB,EAASS,MACX,GAAKU,EAAM,GACnBkB,EAAYrC,EAASQ,OAAS,EAAIR,EAASA,EAASQ,OAAS,GAAG,GAAK4B,EACrE,MACF,QACEC,EAAUR,KAAKV,GAIrB,OAAOiB,EAOT,SAASd,EAASpD,GAChBoE,KAAKpE,OAASA,EACdoE,KAAKC,KAAOrE,EACZoE,KAAKd,IAAM,EAyDb,SAASgB,EAASC,EAAMC,GACtBJ,KAAKG,KAAOA,EACZH,KAAKK,MAAQ,CAAE,IAAKL,KAAKG,MACzBH,KAAKM,OAASF,EAuGhB,SAASG,IACPP,KAAKQ,cAAgB,CACnBC,OAAQ,GACRC,IAAK,SAAcC,EAAKhC,GACtBqB,KAAKS,OAAOE,GAAOhC,GAErBiC,IAAK,SAAcD,GACjB,OAAOX,KAAKS,OAAOE,IAErBE,MAAO,WACLb,KAAKS,OAAS,KAvKpBzB,EAAQ9D,UAAU+D,IAAM,WACtB,MAAqB,KAAde,KAAKC,MAOdjB,EAAQ9D,UAAUsE,KAAO,SAAejD,GACtC,IAAIuE,EAAQd,KAAKC,KAAKa,MAAMvE,GAE5B,IAAKuE,GAAyB,IAAhBA,EAAMC,MAClB,MAAO,GAET,IAAInF,EAASkF,EAAM,GAKnB,OAHAd,KAAKC,KAAOD,KAAKC,KAAKe,UAAUpF,EAAOsC,QACvC8B,KAAKd,KAAOtD,EAAOsC,OAEZtC,GAOToD,EAAQ9D,UAAUiE,UAAY,SAAoB5C,GAChD,IAAkCuE,EAA9BC,EAAQf,KAAKC,KAAKgB,OAAO1E,GAE7B,OAAQwE,GACN,KAAM,EACJD,EAAQd,KAAKC,KACbD,KAAKC,KAAO,GACZ,MACF,KAAK,EACHa,EAAQ,GACR,MACF,QACEA,EAAQd,KAAKC,KAAKe,UAAU,EAAGD,GAC/Bf,KAAKC,KAAOD,KAAKC,KAAKe,UAAUD,GAKpC,OAFAf,KAAKd,KAAO4B,EAAM5C,OAEX4C,GAiBTZ,EAAQhF,UAAUqE,KAAO,SAAeY,GACtC,OAAO,IAAID,EAAQC,EAAMH,OAO3BE,EAAQhF,UAAUgG,OAAS,SAAiBC,GAC1C,IAEIxC,EAFA0B,EAAQL,KAAKK,MAGjB,GAAIA,EAAMnE,eAAeiF,GACvBxC,EAAQ0B,EAAMc,OACT,CAGL,IAFA,IAAoBC,EAAmBC,EAAON,EAA1CO,EAAUtB,KAAuCuB,GAAY,EAE1DD,GAAS,CACd,GAAIH,EAAKK,QAAQ,KAAO,EAsBtB,IArBAJ,EAAoBE,EAAQnB,KAC5BkB,EAAQF,EAAK7C,MAAM,KACnByC,EAAQ,EAmBoB,MAArBK,GAA6BL,EAAQM,EAAMnD,QAC5C6C,IAAUM,EAAMnD,OAAS,IAC3BqD,EACEzF,EAAYsF,EAAmBC,EAAMN,KAClC/E,EAAwBoF,EAAmBC,EAAMN,KAGxDK,EAAoBA,EAAkBC,EAAMN,WAG9CK,EAAoBE,EAAQnB,KAAKgB,GAqBjCI,EAAYzF,EAAYwF,EAAQnB,KAAMgB,GAGxC,GAAII,EAAW,CACb5C,EAAQyC,EACR,MAGFE,EAAUA,EAAQhB,OAGpBD,EAAMc,GAAQxC,EAMhB,OAHInD,EAAWmD,KACbA,EAAQA,EAAMpD,KAAKyE,KAAKG,OAEnBxB,GA0BT4B,EAAOrF,UAAUuG,WAAa,gBACM,IAAvBzB,KAAKQ,eACdR,KAAKQ,cAAcK,SASvBN,EAAOrF,UAAUwG,MAAQ,SAAgBtE,EAAUC,GACjD,IAAIgD,EAAQL,KAAKQ,cACbmB,EAAWvE,EAAW,KAAOC,GAAQmB,EAASnB,MAAMuE,KAAK,KACzDC,OAAkC,IAAVxB,EACxB1C,EAASkE,EAAiBxB,EAAMO,IAAIe,QAAYG,EAMpD,OAJcA,MAAVnE,IACFA,EAASR,EAAcC,EAAUC,GACjCwE,GAAkBxB,EAAMK,IAAIiB,EAAUhE,IAEjCA,GA0BT4C,EAAOrF,UAAU6G,OAAS,SAAiB3E,EAAU+C,EAAM6B,EAAUC,GACnE,IAAI5E,EAAO2C,KAAKkC,cAAcD,GAC1BtE,EAASqC,KAAK0B,MAAMtE,EAAUC,GAC9BiE,EAAWnB,aAAgBD,EAAWC,EAAO,IAAID,EAAQC,OAAM2B,GACnE,OAAO9B,KAAKmC,aAAaxE,EAAQ2D,EAASU,EAAU5E,EAAU6E,IAYhE1B,EAAOrF,UAAUiH,aAAe,SAAuBxE,EAAQ2D,EAASU,EAAUI,EAAkBH,GAIlG,IAHA,IAEIpD,EAAOwD,EAAQ1D,EAFf2D,EAAS,GAGJlD,EAAI,EAAGS,EAAYlC,EAAOO,OAAQkB,EAAIS,IAAaT,EAC1DT,OAAQmD,EAIO,OAFfO,GADAxD,EAAQlB,EAAOyB,IACA,IAEKT,EAAQqB,KAAKuC,cAAc1D,EAAOyC,EAASU,EAAUI,EAAkBH,GACvE,MAAXI,EAAgB1D,EAAQqB,KAAKwC,eAAe3D,EAAOyC,EAASU,EAAUI,EAAkBH,GAC7E,MAAXI,EAAgB1D,EAAQqB,KAAKyC,cAAc5D,EAAOyC,EAASU,EAAUC,GAC1D,MAAXI,EAAgB1D,EAAQqB,KAAK0C,eAAe7D,EAAOyC,GACxC,SAAXe,EAAmB1D,EAAQqB,KAAK2C,aAAa9D,EAAOyC,EAASW,GAClD,SAAXI,IAAmB1D,EAAQqB,KAAK4C,SAAS/D,SAEpCiD,IAAVnD,IACF2D,GAAU3D,GAGd,OAAO2D,GAGT/B,EAAOrF,UAAUqH,cAAgB,SAAwB1D,EAAOyC,EAASU,EAAUI,EAAkBH,GACnG,IAAIY,EAAO7C,KACPsC,EAAS,GACT3D,EAAQ2C,EAAQJ,OAAOrC,EAAM,IAIjC,SAASiE,EAAW1F,GAClB,OAAOyF,EAAKd,OAAO3E,EAAUkE,EAASU,EAAUC,GAGlD,GAAKtD,EAAL,CAEA,GAAIvD,EAAQuD,GACV,IAAK,IAAIoE,EAAI,EAAG1D,EAAcV,EAAMT,OAAQ6E,EAAI1D,IAAe0D,EAC7DT,GAAUtC,KAAKmC,aAAatD,EAAM,GAAIyC,EAAQ/B,KAAKZ,EAAMoE,IAAKf,EAAUI,EAAkBH,QAEvF,GAAqB,iBAAVtD,GAAuC,iBAAVA,GAAuC,iBAAVA,EAC1E2D,GAAUtC,KAAKmC,aAAatD,EAAM,GAAIyC,EAAQ/B,KAAKZ,GAAQqD,EAAUI,EAAkBH,QAClF,GAAIzG,EAAWmD,GAAQ,CAC5B,GAAgC,iBAArByD,EACT,MAAM,IAAI7D,MAAM,kEAKL,OAFbI,EAAQA,EAAMpD,KAAK+F,EAAQnB,KAAMiC,EAAiBY,MAAMnE,EAAM,GAAIA,EAAM,IAAKiE,MAG3ER,GAAU3D,QAEZ2D,GAAUtC,KAAKmC,aAAatD,EAAM,GAAIyC,EAASU,EAAUI,EAAkBH,GAE7E,OAAOK,IAGT/B,EAAOrF,UAAUsH,eAAiB,SAAyB3D,EAAOyC,EAASU,EAAUI,EAAkBH,GACrG,IAAItD,EAAQ2C,EAAQJ,OAAOrC,EAAM,IAIjC,IAAKF,GAAUvD,EAAQuD,IAA2B,IAAjBA,EAAMT,OACrC,OAAO8B,KAAKmC,aAAatD,EAAM,GAAIyC,EAASU,EAAUI,EAAkBH,IAG5E1B,EAAOrF,UAAU+H,cAAgB,SAAwBC,EAASnF,EAAaN,GAG7E,IAFA,IAAI0F,EAAsBpF,EAAYlC,QAAQ,UAAW,IACrDuH,EAAcF,EAAQ5E,MAAM,MACvBc,EAAI,EAAGA,EAAIgE,EAAYlF,OAAQkB,IAClCgE,EAAYhE,GAAGlB,SAAWkB,EAAI,IAAM3B,KACtC2F,EAAYhE,GAAK+D,EAAsBC,EAAYhE,IAGvD,OAAOgE,EAAYxB,KAAK,OAG1BrB,EAAOrF,UAAUuH,cAAgB,SAAwB5D,EAAOyC,EAASU,EAAUC,GACjF,GAAKD,EAAL,CACA,IAAI3E,EAAO2C,KAAKkC,cAAcD,GAE1BtD,EAAQnD,EAAWwG,GAAYA,EAASnD,EAAM,IAAMmD,EAASnD,EAAM,IACvE,GAAa,MAATF,EAAe,CACjB,IAAIlB,EAAkBoB,EAAM,GACxBb,EAAWa,EAAM,GACjBd,EAAcc,EAAM,GACpBwE,EAAgB1E,EACJ,GAAZX,GAAiBD,IACnBsF,EAAgBrD,KAAKiD,cAActE,EAAOZ,EAAaN,IAEzD,IAAIE,EAASqC,KAAK0B,MAAM2B,EAAehG,GACvC,OAAO2C,KAAKmC,aAAaxE,EAAQ2D,EAASU,EAAUqB,EAAepB,MAIvE1B,EAAOrF,UAAUwH,eAAiB,SAAyB7D,EAAOyC,GAChE,IAAI3C,EAAQ2C,EAAQJ,OAAOrC,EAAM,IACjC,GAAa,MAATF,EACF,OAAOA,GAGX4B,EAAOrF,UAAUyH,aAAe,SAAuB9D,EAAOyC,EAASW,GACrE,IAAIqB,EAAStD,KAAKuD,gBAAgBtB,IAAWzD,EAAS8E,OAClD3E,EAAQ2C,EAAQJ,OAAOrC,EAAM,IACjC,GAAa,MAATF,EACF,MAAyB,iBAAVA,GAAsB2E,IAAW9E,EAAS8E,OAAU1G,OAAO+B,GAAS2E,EAAO3E,IAG9F4B,EAAOrF,UAAU0H,SAAW,SAAmB/D,GAC7C,OAAOA,EAAM,IAGf0B,EAAOrF,UAAUgH,cAAgB,SAAwBD,GACvD,OAAI7G,EAAQ6G,GACHA,EAEAA,GAA4B,iBAAXA,EACjBA,EAAO5E,UAGd,GAIJkD,EAAOrF,UAAUqI,gBAAkB,SAA0BtB,GAC3D,OAAIA,GAA4B,iBAAXA,IAAwB7G,EAAQ6G,GAC5CA,EAAOqB,YAGd,GAIJ,IAAI9E,EAAW,CACb2C,KAAM,cACNqC,QAAS,QACTnG,KAAM,CAAE,KAAM,MACdoE,gBAAYK,EACZwB,YAAQxB,EACRJ,WAAOI,EACPC,YAAQD,EACR9C,aAAS8C,EACT5B,aAAS4B,EACTvB,YAAQuB,EAMR,kBAAmBzB,GACjBoD,EAAcjD,cAAgBH,GAKhC,oBACE,OAAOoD,EAAcjD,gBAKrBiD,EAAgB,IAAIlD,EAyCxB,OApCA/B,EAASiD,WAAa,WACpB,OAAOgC,EAAchC,cAQvBjD,EAASkD,MAAQ,SAAgBtE,EAAUC,GACzC,OAAOoG,EAAc/B,MAAMtE,EAAUC,IAOvCmB,EAASuD,OAAS,SAAiB3E,EAAU+C,EAAM6B,EAAUC,GAC3D,GAAwB,iBAAb7E,EACT,MAAM,IAAIsG,UAAU,wDACUjI,EAAQ2B,GADlB,mFAKtB,OAAOqG,EAAc1B,OAAO3E,EAAU+C,EAAM6B,EAAUC,IAKxDzD,EAAS8E,OAAS3G,EAGlB6B,EAASQ,QAAUA,EACnBR,EAAS0B,QAAUA,EACnB1B,EAAS+B,OAASA,EAEX/B,EAhwByEmF,KCD9EC,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,GAAGF,EAAyBE,GAC3B,OAAOF,EAAyBE,GAAU/I,QAG3C,IAAID,EAAS8I,EAAyBE,GAAY,CAGjD/I,QAAS,IAOV,OAHAgJ,EAAoBD,GAAUvI,KAAKT,EAAOC,QAASD,EAAQA,EAAOC,QAAS8I,GAGpE/I,EAAOC,QCnBf8I,EAAoBG,EAAKlJ,IACxB,IAAImJ,EAASnJ,GAAUA,EAAOoJ,WAC7B,IAAMpJ,EAAgB,QACtB,IAAMA,EAEP,OADA+I,EAAoBM,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRJ,EAAoBM,EAAI,CAACpJ,EAASsJ,KACjC,IAAI,IAAI1D,KAAO0D,EACXR,EAAoBS,EAAED,EAAY1D,KAASkD,EAAoBS,EAAEvJ,EAAS4F,IAC5E1F,OAAOsJ,eAAexJ,EAAS4F,EAAK,CAAE6D,YAAY,EAAM5D,IAAKyD,EAAW1D,MCJ3EkD,EAAoBS,EAAI,CAAC5I,EAAK+I,IAASxJ,OAAOC,UAAUgB,eAAeX,KAAKG,EAAK+I,G,mBCAjF,IAAIC,EAAkB,kBAEP,SAASC,EAAQC,EAAWC,GACzC7E,KAAK4E,UAkCP,SAAkCA,GAChC,KAAMA,aAAqBE,SACzB,MAAM,IAAIpB,UACR,mGAGJ,GAAgD,OAA5CkB,EAAUG,aAAaL,GACzB,MAAM,IAAInG,MACR,iHAMJ,OAAOqG,EAhDUI,CAAyBJ,GAC1C5E,KAAKiF,GAAKL,EAAUG,aAAaL,GACjC1E,KAAKkF,WAAa,GAGlBjK,OAAOkK,OAAOnF,KA8ChB,SAAkCrB,GAChC,QACoB,IAAVA,GAA0C,iBAAVA,GAC9B,OAAVA,EAEA,MAAM,IAAI+E,UACR,iEAIJ,OAAO/E,EAxDayG,CAAyBP,IAE7C7E,KAAKqF,SAGPV,EAAQzJ,UAAY,CAClBmK,OAAQC,SAASpK,UACjBqK,SAAUD,SAASpK,UACnBsK,SAAUF,SAASpK,UACnBuK,WAAYH,SAASpK,UACrBwK,cAAeJ,SAASpK,UACxByK,gBAAiBL,SAASpK,UAE1B0K,OAAQ,SAAgBC,GACtB7F,KAAKkF,WAAW3F,KAAKsG,GAGrB,IAAIC,EAAiB7K,OAAOkK,OAAO,GAAIU,UAChCC,EAAeC,KAGtB9K,OAAOkK,OAAOnF,KAAM8F,GAEU,mBAAnBD,EAAUE,MACnBF,EAAUE,KAAKC,MAAMhG,QAoCC,mBAAjB/E,OAAOkK,QAEhBlK,OAAOsJ,eAAetJ,OAAQ,SAAU,CACtC0D,MAAO,SAAgBsH,GAGrB,GAAc,MAAVA,EAEF,MAAM,IAAIvC,UAAU,8CAKtB,IAFA,IAAIwC,EAAKjL,OAAOgL,GAEPlF,EAAQ,EAAGA,EAAQoF,UAAUjI,OAAQ6C,IAAS,CACrD,IAAIqF,EAAaD,UAAUpF,GAE3B,GAAkB,MAAdqF,EAEF,IAAK,IAAIC,KAAWD,EAEdnL,OAAOC,UAAUgB,eAAeX,KAAK6K,EAAYC,KACnDH,EAAGG,GAAWD,EAAWC,IAKjC,OAAOH,GAETI,UAAU,EACVC,cAAc,ICrFlB,IAAIC,EAAoB,oBAGxBC,OAAOC,QAAUD,OAAOC,SAAW,GACnCD,OAAOC,QAAQC,MAAQF,OAAOC,QAAQC,OAAS,GAC/CF,OAAOC,QAAQC,MAAMjJ,SAAW+I,OAAOC,QAAQC,MAAMjJ,UAAY,GAE1D,IAAIkJ,EAAcH,OAAOC,QAAQC,MAAMjJ,SAASkJ,WACrDH,OAAOC,QAAQC,MAAMjJ,SAASkJ,YAAc,GACnCC,EAAaJ,OAAOC,QAAQC,MAAMjJ,SAASmJ,UACpDJ,OAAOC,QAAQC,MAAMjJ,SAASmJ,WAAa,GAEtC,SAASC,EAASpI,EAAMmG,GAC7B,GAAoB,iBAATnG,EACT,MAAM,IAAIgF,UACR,6HAIJ,QAAgC,IAArBkD,EAAWlI,GACpB,MAAM,IAAIH,MACR,sCACEG,EACA,kFAIN,SAASqI,EAAanC,GACpBD,EAAQpJ,KAAKyE,KAAM4E,EAAWC,GAOhC,OAJAkC,EAAaC,YAAcrC,EAC3BoC,EAAa7L,UAAYD,OAAOgM,OAAOtC,EAAQzJ,WAC/C6L,EAAa7L,UAAUwD,KAAOA,EAEtBkI,EAAWlI,GAAQqI,EAWtB,SAASG,EAAKC,EAAOC,GAC1BD,EAAQE,EAAcF,QAEI,IAAfC,IACTA,EAAaE,SAASC,iBAAiB,wBAGzCH,EAAaI,EAAoBJ,GAEjCD,EAAMM,SAAQ,SAAS/I,GACrB,IAAIqI,EAAeH,EAAWlI,QAEF,IAAjBqI,IAIXK,EAAaA,EAAWM,QAAO,SAAS9C,GAEtC,QA6FG+C,EA7FY/C,GA6FW1G,OAAS,KAxFe,OAA9C0G,EAAUG,aAAayB,KAKvB5B,EAAUG,aAAayB,KAAuB9H,IAIlDmI,EAAUtH,KAAK,IAAIwH,EAAanC,KAGzB,YA2BN,SAAS+C,EAAaC,GAC3B,IAAIC,EAAoB,GAGxB,GAAIC,SAAS5M,UAAU6M,cAAcH,IAAavM,MAAMD,QAAQwM,GAC9D,IAAII,EAAeJ,EAAS,GAI9B,GAAIA,aAAoB9C,SAAWkD,aAAwBlD,QACxC0C,EAAoBI,GAE1BH,SAAQ,SAAS7C,GAC1BiD,EAAoBA,EAAkBI,OACpCpB,EAAUa,QAAO,SAASQ,GACxB,OAAOA,EAAStD,YAAcA,cAM/B,GAAwB,iBAAbgD,GAAiD,iBAAjBI,EAA2B,CAC/DX,EAAcO,GAEpBH,SAAQ,SAAS/I,GACrBmJ,EAAoBA,EAAkBI,OACpCpB,EAAUa,QAAO,SAASQ,GACxB,OAAOA,EAASxJ,OAASA,SAMjC,OAAOmJ,EAGF,SAASM,EAAgBlD,GAG9B,IAFA,IAAIiD,EAEK9I,EAAI,EAAGA,EAAIyH,EAAU3I,OAAQkB,IACpC,GAAIyH,EAAUzH,GAAG6F,KAAOA,EAAI,CAC1BiD,EAAWrB,EAAUzH,GACrB,MAGJ,OAAO8I,EAOT,SAASb,EAAcF,GA0BrB,MAxBc,MAAVA,EACFA,EAAQlM,OAAOmN,KAAKxB,GAGM,iBAAVO,EAChBA,EAAQ,CAACA,GAIAA,EAAMH,cAAgBrC,EAC/BwC,EAAQ,CAACA,EAAMjM,UAAUwD,MAIhBrD,MAAMD,QAAQ+L,IAAUA,EAAM,GAAGH,cAAgBrC,IAC1DwC,EAAQA,EAAMkB,KAAI,SAAStB,GACzB,OAAOA,EAAa7L,UAAUwD,SAIlCyI,EAAQA,EAAMkB,KAAI,SAAS3J,GACzB,OAAOA,EAAK4J,iBAMhB,SAASd,EAAoBJ,GAqB3B,OAnBIU,SAAS5M,UAAU6M,cAAcX,IAAeA,EAAWlJ,OAAS,EACtEkJ,EAAa/L,MAAMH,UAAU8H,MAAMzH,KAAK6L,GAIxCU,SAAS5M,UAAU6M,cAAcX,IACX,IAAtBA,EAAWlJ,QAKa,OAAfkJ,EAHTA,EAAa,IAOH/L,MAAMD,QAAQgM,IAAeA,aAAsBtC,UAC7DsC,EAAa,CAACA,IAGTA,EAGLX,OAAOC,QAAQ6B,aACjBjB,SAASkB,iBAAiB,wBAAwB,SAASC,GACzD,IAAIxD,EAAKwD,EAAMC,OAAOC,UAClB/D,EAAY6D,EAAMxC,OAAO2C,cAC3B,qBAA+B3D,EAAK,MAGpB,OAAdL,GACFsC,EAAKtC,EAAUG,aAAayB,GAAoB5B,MAIpD0C,SAASkB,iBAAiB,0BAA0B,SAASC,GAC3D,IAAIxD,EAAKwD,EAAMC,OAAOC,UAClB/D,EAAY6D,EAAMxC,OAAO2C,cAC3B,qBAA+B3D,EAAK,MAId,iBAFT0C,EAAa/C,GAAW,IA/IjB+C,EAkJb/C,GAhJO6C,SAAQ,SAASS,GACjC,IAAInH,EAAQ8F,EACTwB,KAAI,SAASQ,GACZ,OAAOA,EAAE5D,MAEVzD,QAAQ0G,EAASjD,IACpB4B,EAAUiC,OAAO/H,EAAO,GACxBmH,EAAS3C,iBA6IX+B,SAASkB,iBAAiB,0BAA0B,SAASC,GAC3D,IAAIP,EAAWC,EAAgBM,EAAMC,OAAOC,WAEpB,iBAAbT,GACTA,EAAS1C,SAASiD,MAItBnB,SAASkB,iBAAiB,4BAA4B,SAASC,GAC7D,IAAIP,EAAWC,EAAgBM,EAAMC,OAAOC,WAEpB,iBAAbT,GACTA,EAASzC,WAAWgD,MAIxBnB,SAASkB,iBAAiB,wBAAwB,SAASC,GACzD,IAAIP,EAAWC,EAAgBM,EAAMC,OAAOC,WAEpB,iBAAbT,GACTA,EAASxC,cAAc+C,MAI3BnB,SAASkB,iBAAiB,0BAA0B,SAASC,GAC3D,IAAIP,EAAWC,EAAgBM,EAAMC,OAAOC,WAEpB,iBAAbT,GACTA,EAASvC,gBAAgB8C,OCrR/B,IAAIM,EAAMtC,OAECuC,EAAMD,EAAIE,uBAChBF,EAAIG,6BACJH,EAAII,0BACJJ,EAAIK,yBACJ,SAASC,GAAM,OAAOC,WAAWD,EAAI,KCNtC,EAAM5C,OAEC8C,EAAM,EAAIC,sBAChB,EAAIC,yBACJ,SAASxE,GAAKyE,aAAazE,ICJzB,SAAS,IAMd,IALA,IAAIvJ,EAAKyF,EAAMwI,EACX1D,EAASE,UAAU,IAAM,GACzB/G,EAAI,EACJlB,EAASiI,UAAUjI,OAEhBkB,EAAIlB,EAAQkB,IACjB,GAA6B,QAAxB1D,EAAMyK,UAAU/G,IACnB,IAAK+B,KAAQzF,EAGPuK,KAFJ0D,EAAOjO,EAAIyF,UAISW,IAAT6H,IACT1D,EAAO9E,GAAQwI,GAKvB,OAAO1D,ECnBF,SAAS2D,EAAmBjL,GACjC,MAAO,CAAC,OAAQ,SAAS6C,QAAQ7C,IAAU,EAAIkL,KAAKnI,MAAM/C,GAASA,ECD9D,SAASmL,EAAgBC,EAASpJ,EAAKhC,EAAOqL,GACnD,GAAIA,EACF,IAAMD,EAAQE,QAAQtJ,EAAKhC,GAAU,MAAOkK,IAE9C,OAAOlK,ECJF,SAASuL,IACd,IAAIC,EAAM7C,SACN8C,EAAOD,EAAIC,KAOf,OALKA,KACHA,EAAOD,EAAIE,cAAc,SACpBC,MAAO,GAGPF,ECTF,IAAIG,EAAajD,SAASkD,gBCE1B,SAASC,EAAaL,GAC3B,IAAIM,EAAc,GAUlB,OATIN,EAAKE,OACPI,EAAcH,EAAWI,MAAMC,SAE/BR,EAAKO,MAAME,WAAa,GAExBT,EAAKO,MAAMC,SAAWL,EAAWI,MAAMC,SAAW,SAClDL,EAAWO,YAAYV,IAGlBM,ECXF,SAASK,EAAeX,EAAMM,GAC/BN,EAAKE,OACPF,EAAKY,SACLT,EAAWI,MAAMC,SAAWF,EAG5BH,EAAWU,cCNR,SAASC,EAAWC,EAAOvD,EAAUwD,EAAOrK,GAE/C,eAAgBoK,EACdA,EAAME,WAAWzD,EAAW,IAAMwD,EAAQ,IAAKrK,GAC/CoK,EAAMG,QAAQ1D,EAAUwD,EAAOrK,GCN9B,SAASwK,EAAkBJ,GAEhC,OADY,eAAgBA,EAASA,EAAMK,SAAWL,EAAMC,OAChDlN,OCDP,SAASuJ,EAASgE,EAAKC,EAAUC,GACtC,IAAK,IAAIvM,EAAI,EAAGwM,EAAIH,EAAIvN,OAAQkB,EAAIwM,EAAGxM,IACrCsM,EAASnQ,KAAKoQ,EAAOF,EAAIrM,GAAIA,GCH1B,IAAIyM,EAAmB,cAAevE,SAAS+C,cAAc,KCEhEyB,EAAWD,EACX,SAAUE,EAAIC,GAAO,OAAOD,EAAGE,UAAUC,SAASF,IAClD,SAAUD,EAAIC,GAAO,OAAOD,EAAGI,UAAU3K,QAAQwK,IAAQ,GCHzDI,EAAWP,EACX,SAAUE,EAAIC,GACPF,EAASC,EAAKC,IAAQD,EAAGE,UAAUI,IAAIL,IAE9C,SAAUD,EAAIC,GACPF,EAASC,EAAKC,KAAQD,EAAGI,WAAa,IAAMH,ICLnDM,EAAcT,EACd,SAAUE,EAAIC,GACRF,EAASC,EAAKC,IAAQD,EAAGE,UAAUjB,OAAOgB,IAEhD,SAAUD,EAAIC,GACRF,EAASC,EAAIC,KAAQD,EAAGI,UAAYJ,EAAGI,UAAUtQ,QAAQmQ,EAAK,MCNjE,SAASO,EAAQR,EAAIS,GAC1B,OAAOT,EAAGU,aAAaD,GCDlB,SAASE,EAAQX,EAAIS,GAC1B,OAAOT,EAAGhH,aAAayH,GCDlB,SAASG,EAAWZ,GAEzB,YAA0B,IAAZA,EAAGa,KCAZ,SAASC,EAASC,EAAKC,GAE5B,GADAD,EAAOH,EAAWG,IAAQA,aAAezR,MAASyR,EAAM,CAACA,GACX,oBAA1C7R,OAAOC,UAAUC,SAASI,KAAKwR,GAEnC,IAAK,IAAI3N,EAAI0N,EAAI5O,OAAQkB,KACvB,IAAI,IAAIuB,KAAOoM,EACbD,EAAI1N,GAAG4N,aAAarM,EAAKoM,EAAMpM,ICN9B,SAASsM,EAAYH,EAAKC,GAC/BD,EAAOH,EAAWG,IAAQA,aAAezR,MAASyR,EAAM,CAACA,GAIzD,IADA,IAAII,GAFJH,EAASA,aAAiB1R,MAAS0R,EAAQ,CAACA,IAErB7O,OACdkB,EAAI0N,EAAI5O,OAAQkB,KACvB,IAAK,IAAI2D,EAAImK,EAAYnK,KACvB+J,EAAI1N,GAAG+N,gBAAgBJ,EAAMhK,ICT5B,SAASqK,EAAmBC,GAEjC,IADA,IAAI5B,EAAM,GACDrM,EAAI,EAAGwM,EAAIyB,EAAGnP,OAAQkB,EAAIwM,EAAGxM,IACpCqM,EAAIlM,KAAK8N,EAAGjO,IAEd,OAAOqM,ECLF,SAAS6B,EAAYvB,EAAIwB,GACL,SAArBxB,EAAGpB,MAAM6C,UAAsBzB,EAAGpB,MAAM6C,QAAU,QCDjD,SAASC,EAAY1B,EAAIwB,GACL,SAArBxB,EAAGpB,MAAM6C,UAAsBzB,EAAGpB,MAAM6C,QAAU,ICDjD,SAASE,EAAU3B,GACxB,MAA+C,SAAxCtF,OAAOkH,iBAAiB5B,GAAIyB,QCD9B,SAASI,EAAcC,GAC5B,GAAqB,iBAAVA,EAAoB,CAC7B,IAAIpC,EAAM,CAACoC,GACPC,EAAQD,EAAMvO,OAAO,GAAGyO,cAAgBF,EAAMG,OAAO,GAC1C,CAAC,SAAU,MAAO,KAAM,KAE9BvG,SAAQ,SAASwG,GACT,OAAXA,GAA6B,cAAVJ,GACrBpC,EAAIlM,KAAK0O,EAASH,MAItBD,EAAQpC,EAKV,IAFA,IAAIM,EAAKzE,SAAS+C,cAAc,eAExBjL,GADEyO,EAAM3P,OACJ,GAAGkB,EAAIyO,EAAM3P,OAAQkB,IAAI,CACnC,IAAIqF,EAAOoJ,EAAMzO,GACjB,QAAuB0C,IAAnBiK,EAAGpB,MAAMlG,GAAuB,OAAOA,EAG7C,OAAO,EClBF,SAASyJ,EAAeC,EAAQC,GACrC,IAAIC,GAAU,EAQd,MAPI,UAAUhS,KAAK8R,GACjBE,EAAU,SAAWD,EAAU,MACtB,KAAK/R,KAAK8R,GACnBE,EAAU,IAAMD,EAAU,MACjBD,IACTE,EAAUD,EAAQ9F,cAAgB,OAE7B+F,ECZT,IAAIC,GAAkB,EACtB,IACE,IAAIC,EAAOtT,OAAOsJ,eAAe,GAAI,UAAW,CAC9C3D,IAAK,WACH0N,GAAkB,KAGtB7H,OAAO+B,iBAAiB,OAAQ,KAAM+F,GACtC,MAAO1F,IACF,IAAI2F,IAAgBF,GAAkB,CAAEG,SAAS,GCRjD,SAASC,EAAU3C,EAAIrQ,EAAKiT,GACjC,IAAK,IAAIlK,KAAQ/I,EAAK,CACpB,IAAIkT,EAAS,CAAC,aAAc,aAAapN,QAAQiD,IAAS,IAAMkK,GAAmBH,EACnFzC,EAAGvD,iBAAiB/D,EAAM/I,EAAI+I,GAAOmK,ICHlC,SAASC,EAAa9C,EAAIrQ,GAC/B,IAAK,IAAI+I,KAAQ/I,EAAK,CACpB,IAAIkT,EAAS,CAAC,aAAc,aAAapN,QAAQiD,IAAS,GAAI+J,EAC9DzC,EAAG+C,oBAAoBrK,EAAM/I,EAAI+I,GAAOmK,ICLrC,SAASG,IACd,MAAO,CACLC,OAAQ,GACRC,GAAI,SAAUC,EAAWC,GACvBnP,KAAKgP,OAAOE,GAAalP,KAAKgP,OAAOE,IAAc,GACnDlP,KAAKgP,OAAOE,GAAW3P,KAAK4P,IAE9BC,IAAK,SAASF,EAAWC,GACvB,GAAInP,KAAKgP,OAAOE,GACd,IAAK,IAAI9P,EAAI,EAAGA,EAAIY,KAAKgP,OAAOE,GAAWhR,OAAQkB,IACjD,GAAIY,KAAKgP,OAAOE,GAAW9P,KAAO+P,EAAI,CACpCnP,KAAKgP,OAAOE,GAAWpG,OAAO1J,EAAG,GACjC,QAKRiQ,KAAM,SAAUH,EAAWI,GACzBA,EAAK5Q,KAAOwQ,EACRlP,KAAKgP,OAAOE,IACdlP,KAAKgP,OAAOE,GAAWzH,SAAQ,SAAS0H,GACtCA,EAAGG,EAAMJ,QCpBdjU,OAAOmN,OACVnN,OAAOmN,KAAO,SAAS9M,GACrB,IAAI8M,EAAO,GACX,IAAK,IAAIjH,KAAQ7F,EACXL,OAAOC,UAAUgB,eAAeX,KAAKD,EAAQ6F,IAC/CiH,EAAK7I,KAAK4B,GAGd,OAAOiH,IAKN,WAAYtD,QAAQ5J,YACvB4J,QAAQ5J,UAAU8P,OAAS,WACtBhL,KAAKuP,YACNvP,KAAKuP,WAAWC,YAAYxP,QAwC3B,IAAIyP,EAAM,SAASC,GACxBA,EAAU,EAAO,CACf9K,UAAW,UACX+K,KAAM,WACNC,KAAM,aACNC,MAAO,EACPC,OAAQ,EACRC,YAAa,EACbC,YAAY,EACZC,WAAW,EACXC,aAAa,EACbC,QAAS,EACTC,QAAQ,EACRC,UAAU,EACVC,iBAAkB,MAClBC,aAAc,CAAC,OAAQ,QACvBC,mBAAmB,EACnBC,YAAY,EACZC,YAAY,EACZC,KAAK,EACLC,YAAa,MACbC,cAAc,EACdC,iBAAiB,EACjBC,WAAW,EACXC,MAAO,IACPC,UAAU,EACVC,iBAAkB,MAClBC,gBAAiB,IACjBC,kBAAmB,UACnBC,aAAc,CAAC,QAAS,QACxBC,oBAAoB,EACpBC,gBAAgB,EAChBC,sBAAsB,EACtBC,2BAA2B,EAC3BC,UAAW,aACXC,WAAY,cACZC,cAAe,aACfC,cAAc,EACdC,MAAM,EACNC,QAAQ,EACRC,YAAY,EACZC,YAAY,EACZC,UAAU,EACVC,iBAAkB,gBAClBC,OAAO,EACPC,WAAW,EACXC,WAAY,GACZC,QAAQ,EACRC,0BAA0B,EAC1BC,sBAAsB,EACtBC,WAAW,EACXC,QAAQ,EACRC,iBAAiB,EACjBC,OAAO,GACNnD,GAAW,IAEd,IAAIvF,EAAM7C,SACNyB,EAAMtC,OACNqM,EAAO,CACLC,MAAO,GACPC,MAAO,GACPC,KAAM,GACNC,MAAO,IAETC,EAAa,GACbC,EAAqB1D,EAAQkD,gBAEjC,GAAIQ,EAAoB,CAEtB,IAAIC,EAAcC,UAAUC,UACxBC,EAAM,IAAIC,KAEd,KACEN,EAAapK,EAAI2K,eAEfP,EAAWlJ,QAAQuJ,EAAKA,GACxBJ,EAAqBD,EAAWQ,QAAQH,IAAQA,EAChDL,EAAWS,WAAWJ,IAEtBJ,GAAqB,EAElBA,IAAsBD,EAAa,IACxC,MAAMtK,GACNuK,GAAqB,EAGnBA,IAEED,EAAmB,QAAKA,EAAmB,SAAME,GACnD,CAAC,KAAM,MAAO,MAAO,MAAO,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,OAAO5L,SAAQ,SAASmF,GAAQuG,EAAWS,WAAWhH,MAGlI8G,aAAqB,OAAIL,GAI7B,IAAIQ,EAAOV,EAAe,GAAIvJ,EAAkBuJ,EAAe,IAAKrJ,EAAgBqJ,EAAY,KClJ3F,WACL,IAAIhJ,EAAM7C,SACN8C,EAAOF,IACPQ,EAAcD,EAAYL,GAC1B0J,EAAM3J,EAAIE,cAAc,OACxB0J,GAAS,EAEb3J,EAAKU,YAAYgJ,GACjB,IAIE,IAHA,IAEIE,EAFAhI,EAAM,cACNiI,EAAO,CAAC,OAASjI,EAAK,YAAcA,EAAK,eAAiBA,GAErD5M,EAAI,EAAGA,EAAI,EAAGA,IAGrB,GAFA4U,EAAMC,EAAK7U,GACX0U,EAAInJ,MAAMuJ,MAAQF,EACM,MAApBF,EAAIK,YAAqB,CAC3BJ,EAASC,EAAInY,QAAQmQ,EAAK,IAC1B,OAGJ,MAAOnD,IAIT,OAFAuB,EAAKE,KAAOS,EAAcX,EAAMM,GAAeoJ,EAAI9I,SAE5C+I,ED0H+FK,GAAQhB,GAC1GiB,EAAmBlB,EAAgB,IAAIvJ,EAAkBuJ,EAAgB,KAAKrJ,EAAgBqJ,EAAY,MEpJzG,WAEL,IAQImB,EARAnK,EAAM7C,SACN8C,EAAOF,IACPQ,EAAcD,EAAYL,GAC1BmK,EAAUpK,EAAIE,cAAc,OAC5BmK,EAAQrK,EAAIE,cAAc,OAC1B2B,EAAM,GAKVuI,EAAQpI,UAAY,cACpBqI,EAAMrI,UAAY,WAElB,IAAK,IAAI/M,EAAI,EAAGA,EAPJ,GAOeA,IACzB4M,GAAO,cAWT,OARAwI,EAAMC,UAAYzI,EAClBuI,EAAQzJ,YAAY0J,GACpBpK,EAAKU,YAAYyJ,GAEjBD,EAAYI,KAAKC,IAAIJ,EAAQK,wBAAwBC,KAAOL,EAAMM,SAASC,IAAiBH,wBAAwBC,MAAQ,EAE5HzK,EAAKE,KAAOS,EAAcX,EAAMM,GAAe6J,EAAQvJ,SAEhDsJ,EFyH8GU,GAAoB5B,GACrI6B,EAAQ9B,EAAgB,IAAIvJ,EAAkBuJ,EAAgB,KAAKrJ,EAAgBqJ,EAAY,MGvJ9F,WACL,GAAI1M,OAAOyO,YAAczO,OAAO0O,aAC9B,OAAO,EAGT,IAMIC,EANAjL,EAAM7C,SACN8C,EAAOF,IACPQ,EAAcD,EAAYL,GAC1B0J,EAAM3J,EAAIE,cAAc,OACxBM,EAAQR,EAAIE,cAAc,SAC1BgL,EAAO,kEAmBX,OAhBA1K,EAAMjM,KAAO,WACboV,EAAI3H,UAAY,cAEhB/B,EAAKU,YAAYH,GACjBP,EAAKU,YAAYgJ,GAEbnJ,EAAM2K,WACR3K,EAAM2K,WAAWC,QAAUF,EAE3B1K,EAAMG,YAAYX,EAAIqL,eAAeH,IAGvCD,EAAW3O,OAAOkH,iBAAmBlH,OAAOkH,iBAAiBmG,GAAKsB,SAAWtB,EAAI2B,aAAuB,SAExGrL,EAAKE,KAAOS,EAAcX,EAAMM,GAAeoJ,EAAI9I,SAE/B,aAAboK,EH0HmGM,GAAqBtC,GAC3HuC,EAAYxC,EAAgB,IAAIvJ,EAAkBuJ,EAAgB,KAAKrJ,EAAgBqJ,EAAY,MAAOvF,EAAc,aAAcwF,GACtIwC,EAAkBzC,EAAgB,IAAIvJ,EAAkBuJ,EAAgB,KAAKrJ,EAAgBqJ,EAAY,MIzJxG,SAAyB0C,GAC9B,IAAKA,EAAM,OAAO,EAClB,IAAKpP,OAAOkH,iBAAoB,OAAO,EAEvC,IAIImI,EAJA3L,EAAM7C,SACN8C,EAAOF,IACPQ,EAAcD,EAAYL,GAC1B2B,EAAK5B,EAAIE,cAAc,KAEvB0L,EAAQF,EAAG3X,OAAS,EAAI,IAAM2X,EAAG7S,MAAM,GAAI,GAAGsF,cAAgB,IAAM,GAYxE,OAVAyN,GAAS,YAGT3L,EAAK4L,aAAajK,EAAI,MAEtBA,EAAGpB,MAAMkL,GAAM,2BACfC,EAAQrP,OAAOkH,iBAAiB5B,GAAIkK,iBAAiBF,GAErD3L,EAAKE,KAAOS,EAAcX,EAAMM,GAAeqB,EAAGf,cAEhClJ,IAAVgU,GAAuBA,EAAM5X,OAAS,GAAe,SAAV4X,EJoIiEI,CAAgBP,GAAYvC,GAC5I+C,EAAqBhD,EAAiB,KAAIvJ,EAAkBuJ,EAAiB,MAAKrJ,EAAgBqJ,EAAY,OAAQvF,EAAc,sBAAuBwF,GAC3JgD,EAAkBjD,EAAiB,KAAIvJ,EAAkBuJ,EAAiB,MAAKrJ,EAAgBqJ,EAAY,OAAQvF,EAAc,mBAAoBwF,GACrJiD,EAAoBlD,EAAiB,KAAIvJ,EAAkBuJ,EAAiB,MAAKrJ,EAAgBqJ,EAAY,OAAQvF,EAAc,qBAAsBwF,GACzJkD,EAAiBnD,EAAiB,KAAIvJ,EAAkBuJ,EAAiB,MAAKrJ,EAAgBqJ,EAAY,OAAQvF,EAAc,kBAAmBwF,GACnJmD,EAAgBpD,EAAgB,IAAIvJ,EAAkBuJ,EAAgB,KAAKrJ,EAAgBqJ,EAAY,MAAOjF,EAAeiI,EAAoB,cAAe/C,GAChKoD,EAAerD,EAAgB,IAAIvJ,EAAkBuJ,EAAgB,KAAKrJ,EAAgBqJ,EAAY,MAAOjF,EAAemI,EAAmB,aAAcjD,GAG7JqD,EAAqB1N,EAAI2N,SAAuC,mBAArB3N,EAAI2N,QAAQC,KACvDC,EAAU,CAAC,YAAa,oBAAqB,aAAc,aAAc,eAAgB,kBACzFC,EAAkB,GAkBtB,GAhBAD,EAAQnP,SAAQ,SAASmF,GACvB,GAA6B,iBAAlB8C,EAAQ9C,GAAoB,CACrC,IAAIZ,EAAM0D,EAAQ9C,GACdb,EAAK5B,EAAIvB,cAAcoD,GAG3B,GAFA6K,EAAgBjK,GAAQZ,GAEpBD,IAAMA,EAAG+K,SAIX,YADIL,GAAsBC,QAAQC,KAAK,aAAejH,EAAQ9C,KAF9D8C,EAAQ9C,GAAQb,QASlB2D,EAAQ9K,UAAUkQ,SAAS5W,OAAS,GAAxC,CAMA,IAAI+T,EAAavC,EAAQuC,WACrBM,EAAS7C,EAAQ6C,OACjBwE,EAA4B,aAAjBrH,EAAQC,KAEvB,GAAIsC,EAAY,CAEV,KAAKA,IACPvC,EAAU,EAAOA,EAASuC,EAAW,WAC9BA,EAAW,IAGpB,IAAI+E,EAAgB,GACpB,IAAK,IAAIrW,MAAOsR,EAAY,CAC1B,IAAI+B,GAAM/B,EAAWtR,IAOrBqT,GAAqB,iBAARA,GAAmB,CAACnE,MAAOmE,IAAOA,GAC/CgD,EAAcrW,IAAOqT,GAEvB/B,EAAa+E,EACbA,EAAgB,KAoBlB,GAJKD,GAZL,SAASE,EAAevb,GACtB,IAAK,IAAIiF,KAAOjF,EACTqb,IACS,YAARpW,IAAqBjF,EAAIiF,GAAO,QACxB,gBAARA,IAAyBjF,EAAIiF,IAAO,GAC5B,eAARA,IAAwBjF,EAAIiF,IAAO,IAI7B,eAARA,GAAwBsW,EAAcvb,EAAIiF,IAGjCsW,CAAcvH,IAI1BqH,EAAU,CACbrH,EAAQE,KAAO,aACfF,EAAQS,QAAU,OAClBT,EAAQK,aAAc,EAEtB,IAAI2B,GAAYhC,EAAQgC,UACpBC,GAAajC,EAAQiC,WACrBE,GAAenC,EAAQmC,aACvBD,GAAgBlC,EAAQkC,cAG9B,IAGIsF,GAMAC,GATAC,GAA8B,eAAjB1H,EAAQE,KACrByH,GAAelN,EAAIE,cAAc,OACjCiN,GAAenN,EAAIE,cAAc,OAEjCzF,GAAY8K,EAAQ9K,UACpB2S,GAAkB3S,GAAU2K,WAC5BiI,GAAgB5S,GAAU6S,UAC1BC,GAAa9S,GAAUkQ,SACvB6C,GAAaD,GAAWxZ,OAExB0Z,GAAcC,KACdC,IAAO,EACP7F,GAAc8F,KACdhB,IAAYnS,GAAUuH,WAAa,cAGvC,IA2BI6L,GA0FAC,GACAC,GK5XAjT,GL4gBEkT,GACApE,GM7gB0BqE,GAAOvF,GAEnClI,GNoQAsF,GAAYP,EAAQO,UACpBD,GAAaqI,GAAU,cACvBtI,GAAcsI,GAAU,eACxBvI,GAASuI,GAAU,UACnBC,GAAWC,KACXnI,GAASiI,GAAU,UACnBxI,GAASI,GAA6C,EAAjCyE,KAAK8D,MAAMH,GAAU,UAC1ClI,GAAUkI,GAAU,WACpBnI,GAAcR,EAAQQ,aAAeR,EAAQ+I,wBAC7C1H,GAAYsH,GAAU,aACtBrH,GAAQqH,GAAU,SAClBtG,GAASrC,EAAQqC,OACjBD,IAAOC,IAAiBrC,EAAQoC,KAChCE,GAAaqG,GAAU,cACvBhI,GAAWgI,GAAU,YACrB9H,GAAe8H,GAAU,gBACzB1H,GAAM0H,GAAU,OAChBjG,GAAQiG,GAAU,SAClBhG,GAAYgG,GAAU,aACtBpH,GAAWoH,GAAU,YACrBlH,GAAkBkH,GAAU,mBAC5BhH,GAAegH,GAAU,gBACzB/G,GAAqB+G,GAAU,sBAC/B5G,GAA4B4G,GAAU,6BACtClN,IM9R4BiN,GN8RH,KM9RUvF,GN8RJwF,GAAU,SM5RzC1N,GAAQrD,SAAS+C,cAAc,SAM/B+N,IAASzN,GAAMqC,aAAa,QAASoL,IAGrCvF,IAASlI,GAAMqC,aAAa,QAAS6F,IAMzCvL,SAASsB,cAAc,QAAQkC,YAAYH,IAEpCA,GAAMQ,MAAQR,GAAMQ,MAAQR,GAAM2K,YN4QrCpD,GAAWxC,EAAQwC,SACnBC,GAAmBzC,EAAQyC,iBAE3BuG,GAAgB,GAChBC,GAAa7G,IAyOXqG,GAzBN,WAEE,GAAIlI,IAAcD,KAAeE,GAC/B,OAAOyH,GAAa,EAGpB,IAAI3L,EAAMgE,GAAa,aAAe,QAClCvE,EAAM,GAIV,IAFIuE,IAAcN,EAAQ1D,GAAO2L,KAAclM,EAAIlM,KAAKmQ,EAAQ1D,IAE5DiG,EACF,IAAK,IAAI2G,KAAM3G,EAAY,CACzB,IAAI4G,EAAM5G,EAAW2G,GAAI5M,GACrB6M,IAAQ7I,IAAc6I,EAAMlB,KAAelM,EAAIlM,KAAKsZ,GAM5D,OAFKpN,EAAIvN,QAAUuN,EAAIlM,KAAK,GAErBmV,KAAKoE,KAAK9I,GAAaE,GAAcwE,KAAKqE,IAAI/S,MAAM,KAAMyF,GAAOiJ,KAAKsE,IAAIhT,MAAM,KAAMyF,IAKhFwN,GACXlF,GAASgD,EAAWrC,KAAKoE,MAAiB,EAAXX,GAAeR,IAAY,GAAiB,EAAXQ,GAAeR,GACnF5D,GAASW,KAAKsE,IAAIb,GAAUpE,IAErBmF,GAAU,eAAiBnF,GAAS,EAAIA,IA7OA,EAC7CoF,GAAiBpC,EAAqCY,GAA0B,EAAbgB,GAAvChB,GAAagB,GACzCS,MAAoBpJ,KAAcC,IAAe6B,IACjDuH,GAAgBrJ,GAAasJ,KAAqB,KAClDC,IAA+BxC,IAAajF,GAE5C0H,GAAgBpC,GAAa,OAAS,MACtCqC,GAAkB,GAClBC,GAAmB,GAEnBC,GACM3J,GACK,WAAa,OAAOI,KAAW0B,GAAO6F,GAAa,EAAIjD,KAAKoE,MAAOO,IAAiBrJ,GAAaF,MAC/FG,GACF,WACL,IAAK,IAAI7Q,EAAI,EAAGA,EAAI+Z,GAAe/Z,IACjC,GAAI4Y,GAAe5Y,KAAQia,GAAiB,OAAOja,GAIhD,WACL,OAAIgR,IAAU2G,IAAajF,GAClB6F,GAAa,EAEb7F,IAAQiF,EAAWrC,KAAKsE,IAAI,EAAGG,GAAgBzE,KAAKoE,KAAKjJ,KAAUsJ,GAAgB,GAKlGpY,GAAQ6Y,GAAcvB,GAAU,eAChCwB,GAAc9Y,GAEd+Y,IADeC,KACJ,GACXC,GAAY/J,GAA4B,KAAhB0J,KAGxBnH,GAA2B9C,EAAQ8C,yBACnCF,GAAa5C,EAAQ4C,WACrB2H,IAAwB3H,IAAa,IACrC4H,IAAU,EACVvH,GAASjD,EAAQiD,OACjBwH,GAAS,IAAIpL,EAEbqL,GAAsB,mBAAqB1K,EAAQC,KACnD0K,GAAUzV,GAAUK,KK/UpBA,GAAKwB,OAAO6T,MAChB7T,OAAO6T,MAASrV,GAASA,GAAK,EAAT,EAEd,MAAQwB,OAAO6T,OL6UlBC,GAAUlC,GAAU,WACpBmC,IAAW,EACX9H,GAAYhD,EAAQgD,UACpB+H,MAAS/H,IAAczC,KAAYyK,KACnCC,IAAS,EACTC,GAAiB,CACf,MAASC,GACT,QAulEN,SAA4BhS,GAC1BA,EAAIiS,GAASjS,GACb,IAAIkS,EAAW,CAACjI,EAAKG,KAAMH,EAAKI,OAAO1R,QAAQqH,EAAEmS,SAE7CD,GAAY,IACG,IAAbA,EACGtK,GAAW+J,UAAYK,GAAgBhS,GAAI,GACtC6H,GAAW8J,UACrBK,GAAgBhS,EAAG,MA7lErBoS,GAAY,CACV,MAm+DN,SAAqBpS,GACnB,GAAIqR,GAAS,CACX,GAAI1H,GAA4B,OAAiB0I,KAInD,IAAIjV,EAASkV,GADbtS,EAAIiS,GAASjS,IAIb,KAAO5C,IAAW4K,KAAiBtE,EAAQtG,EAAQ,aAAeA,EAASA,EAAOsJ,WAClF,GAAIhD,EAAQtG,EAAQ,YAAa,CAC/B,IAAImV,EAAWC,GAAaC,OAAO5O,EAAQzG,EAAQ,aAC/CsV,EAAkBvL,IAAcC,GAAYmL,EAAWzD,GAAa6D,GAAQJ,EAAWvL,GAE3F4L,GADkB3K,GAAkBsK,EAAW1G,KAAKqE,IAAIrE,KAAKoE,KAAKyC,GAAkB5D,GAAa,GAC/E9O,GAEd6S,KAAoBN,IAClBO,IAAaC,KACjBP,IAAc,KAp/Dd,QAsmEN,SAAuBxS,GACrBA,EAAIiS,GAASjS,GACb,IAAIgT,EAAa1R,EAAI2R,cACrB,IAAKvP,EAAQsP,EAAY,YAAe,OAGxC,IAAId,EAAW,CAACjI,EAAKG,KAAMH,EAAKI,MAAOJ,EAAKC,MAAOD,EAAKE,OAAOxR,QAAQqH,EAAEmS,SACrEI,EAAWE,OAAO5O,EAAQmP,EAAY,aAEtCd,GAAY,IACG,IAAbA,EACEK,EAAW,GAAKW,GAASC,GAASZ,EAAW,IAC3B,IAAbL,EACLK,EAAWI,GAAQ,GAAKO,GAASC,GAASZ,EAAW,KAEzDC,GAAaD,EACbK,GAAKL,EAAUvS,OApnEjBoT,GAAc,CACZ,UAujEN,WACMN,KACFO,KACAC,IAAsB,IAzjEpB,SA6jEN,WACMA,KACFC,KACAD,IAAsB,KA9jEtBE,GAAkB,CAAC,iBAwiEvB,WACMlS,EAAImS,OACFX,KACFO,KACAK,IAA2B,GAEpBA,KACTH,KACAG,IAA2B,KA/iE3BC,GAAsB,CAAC,QAkkE3B,SAA4B3T,GAC1BA,EAAIiS,GAASjS,GACb,IAAIkS,EAAW,CAACjI,EAAKG,KAAMH,EAAKI,OAAO1R,QAAQqH,EAAEmS,SAE7CD,GAAY,GACdF,GAAgBhS,EAAgB,IAAbkS,GAAkB,EAAI,KAtkEzC0B,GAAc,CACZ,WAAcC,GACd,UAAaC,GACb,SAAYC,GACZ,YAAeA,IACdC,GAAa,CACd,UAAaH,GACb,UAAaC,GACb,QAAWC,GACX,WAAcA,IAEhBE,GAAc5D,GAAU,YACxB6D,GAAS7D,GAAU,OACnBpI,KAAkBb,IAAmBP,EAAQoB,gBAC7CkM,GAAc9D,GAAU,YACxB+D,GAAW/D,GAAU,SACrBgE,GAAehE,GAAU,aACzBiE,GAAmB,mBACnBC,GAAmB,mBACnBC,GAAmB,eACnBC,GAAY,CACV,KA85CN,SAAsBzU,GACpB0U,GAAUpC,GAAUtS,KA95ChB,MAi6CN,SAAsBA,GASF2U,EARRrC,GAAUtS,GASpBuD,EAASoR,EAAK,UACdC,GAAaD,GAFf,IAAoBA,IAt6ChBE,GAAiD,UAAjChO,EAAQ+C,qBAG5B,GAAIqK,GACF,IAMIa,GACAC,GAPApN,GAAoBd,EAAQc,kBAC5BqN,GAAwBnO,EAAQc,kBAAoBd,EAAQc,kBAAkBiH,UAAY,GAC1FhH,GAAaf,EAAQe,WACrBC,GAAahB,EAAQgB,WACrBoN,GAAiBpO,EAAQe,WAAaf,EAAQe,WAAWgH,UAAY,GACrEsG,GAAiBrO,EAAQgB,WAAahB,EAAQgB,WAAW+G,UAAY,GAM3E,GAAIsF,GACF,IAEIf,GAFAnL,GAAenB,EAAQmB,aACvBmN,GAAmBtO,EAAQmB,aAAenB,EAAQmB,aAAa4G,UAAY,GAE3E+D,GAAQvL,GAAY0H,GAAasG,KACjCC,GAAc,EACd7C,IAAc,EACdK,GAAkByC,KAClBC,GAAwB1C,GACxB2C,GAAiB,iBACjBC,GAAS,iBACTC,GAAgB,mBAItB,GAAIvB,GACF,IAIIwB,GACA7C,GACAQ,GACAsC,GACAlC,GARAnL,GAAkD,YAA9B1B,EAAQ0B,kBAAkC,GAAK,EACnEG,GAAiB7B,EAAQ6B,eACzBmN,GAAqBhP,EAAQ6B,eAAiB7B,EAAQ6B,eAAekG,UAAY,GACjFkH,GAAsB,CAAC,qCAAwC,qBAQrE,GAAI1B,IAAYC,GACd,IAEI0B,GAIAC,GANAC,GAAe,GACfC,GAAe,GAIfC,IAAW,EAEXC,GAAU7H,GACR,SAAShT,EAAG8a,GAAK,OAAO9a,EAAE+a,EAAID,EAAEC,GAChC,SAAS/a,EAAG8a,GAAK,OAAO9a,EAAEgb,EAAIF,EAAEE,GAInCnP,IAAaoP,GAAyB9E,IAAWE,IAElD9E,IACF6D,GAAgB7D,EAChB8D,GAAkB,YAEd7D,GACF6D,IAAmBrC,GAAa,MAAQ,WACxCsC,GAAmBtC,GAAa,cAAgB,WAEhDqC,IAAmBrC,GAAa,KAAO,KACvCsC,GAAmB,MAKnB3C,IAAYnS,GAAUuH,UAAYvH,GAAUuH,UAAUtQ,QAAQ,YAAa,KAkO/E,WAGkBqd,GAAU,UAE1B7B,GAAalL,UAJI,YAKjBmL,GAAanL,UAJI,YAKjBkL,GAAapS,GAAKoV,GAAU,MAC5B/C,GAAarS,GAAKoV,GAAU,MAGP,KAAjBzV,GAAUK,KAAaL,GAAUK,GAAKoV,IAC1CD,IAAuB/F,GAAoBpE,GAAY,gBAAkB,mBACzEmK,IAAuBvG,EAAO,YAAc,eACxC5D,KAAamK,IAAuB,kBACxCA,IAAuB,QAAU1K,EAAQE,KACzChL,GAAUuH,WAAaiO,GAGnBrD,IACFG,GAAgB/M,EAAIE,cAAc,QACpBpF,GAAKoV,GAAU,MAC7BnD,GAAc/K,UAAY,UAE1BkL,GAAavM,YAAYoM,IACzBA,GAAcpM,YAAYwM,KAE1BD,GAAavM,YAAYwM,IAG3B,GAAItF,GAAY,EACLkF,IAAgCI,IACtCnL,WAAa,UAqBlB,GAlBAoL,GAAgBvB,aAAaqB,GAAczS,IAC3C0S,GAAaxM,YAAYlG,IAIzB6C,EAAQiQ,IAAY,SAAS9K,EAAMxN,GACjCgN,EAASQ,EAAM,YACVA,EAAK3H,KAAM2H,EAAK3H,GAAKoV,GAAU,QAAUjb,IACzC2X,GAAYnF,IAAiBxF,EAASQ,EAAMgF,IACjD/E,EAASD,EAAM,CACb,cAAe,OACf,SAAY,UAOZ+L,GAAY,CAId,IAHA,IAAI2G,EAAiBnV,EAAIoV,yBACrBC,EAAgBrV,EAAIoV,yBAEfxc,EAAI4V,GAAY5V,KAAM,CAC7B,IAAI0c,EAAM1c,EAAE4U,GACR+H,EAAahI,GAAW+H,GAAKE,WAAU,GAK3C,GAJAvT,EAASsT,EAAYtC,IACrBnQ,EAAYyS,EAAY,MACxBF,EAAcxJ,aAAa0J,EAAYF,EAAcI,YAEjD7I,EAAU,CACZ,IAAI8I,EAAYnI,GAAWC,GAAa,EAAI8H,GAAKE,WAAU,GAC3DvT,EAASyT,EAAWzC,IACpBnQ,EAAY4S,EAAW,MACvBP,EAAexU,YAAY+U,IAI/Bjb,GAAUoR,aAAasJ,EAAgB1a,GAAUgb,YACjDhb,GAAUkG,YAAY0U,GACtB9H,GAAa9S,GAAUkQ,UA3S3BgL,GAqYA,WAGE,IAAK/I,EACH,IAAK,IAAI3X,EAAI2B,GAAO6K,EAAI7K,GAAQ2T,KAAKqE,IAAIpB,GAAY9H,IAAQzQ,EAAIwM,EAAGxM,IAAK,CACvE,IAAIwN,EAAO8K,GAAWtY,GACtBwN,EAAKjC,MAAMkK,KAAqB,KAAbzV,EAAI2B,IAAe8O,GAAQ,IAC9CzD,EAASQ,EAAM8E,IACfpF,EAAYM,EAAMgF,IAkBlBwF,KACE/C,GAAoBpE,IACtB/E,EAAWC,GAAO,IAAMkP,GAAU,eAAgB,aAAetR,EAAI4E,iBAAiB+J,GAAW,IAAIqI,SAAW,IAAKxU,EAAkBJ,KACvID,EAAWC,GAAO,IAAMkP,GAAS,eAAgB9O,EAAkBJ,MAC1D4L,GACTtP,EAAQiQ,IAAY,SAAUsI,EAAO5gB,GACnC4gB,EAAMrV,MAAMsV,WAvRpB,SAA6B7gB,GAC3B,OAAOyU,EACLA,EAAO,IAAU,IAAJzU,EAAU,OAAS+Z,GAAgB,IAC5C,IAAJ/Z,EAAU+Z,GAAgB,IAoRG+G,CAAmB9gB,OAOlD,GAAI6V,EAAO,CAET,GAAIkB,EAAoB,CACtB,IAAInK,EAAMkL,IAAiBxH,EAAQsC,WAAamO,GAA2BzQ,EAAQsB,OAAS,GAC5F9F,EAAWC,GAAO,IAAMkP,GAAU,MAAOrO,EAAKT,EAAkBJ,KAIlEa,EAAMoU,GAAsB1Q,EAAQK,YAAaL,EAAQI,OAAQJ,EAAQM,WAAYN,EAAQsB,MAAOtB,EAAQsC,YAC5G9G,EAAWC,GAAO,IAAMkP,GAAU,MAAOrO,EAAKT,EAAkBJ,KAG5D4L,IACF/K,EAAMoL,KAAenH,GAAY,SAAWoQ,GAAkB3Q,EAAQM,WAAYN,EAAQI,OAAQJ,EAAQG,OAAS,IAAM,GACrHsG,IAAsBnK,GAAOmU,GAA2BnP,KAC5D9F,EAAWC,GAAO,IAAMkP,GAASrO,EAAKT,EAAkBJ,MAI1Da,EAAMoL,KAAenH,GAAYqQ,GAAmB5Q,EAAQM,WAAYN,EAAQI,OAAQJ,EAAQG,OAAS,GACrGH,EAAQI,SAAU9D,GAAOuU,GAAoB7Q,EAAQI,SAEpDiH,IACCZ,IAAsBnK,GAAOmU,GAA2BnP,KACxDqF,IAAqBrK,GAAOwU,GAA0BxP,MAExDhF,GAAOd,EAAWC,GAAO,IAAMkP,GAAU,eAAgBrO,EAAKT,EAAkBJ,SAM/E,CA08BH4L,GAAY/E,KACdkF,GAAcvM,MAAMwL,GAAsBnF,GAAQ,IAAO,KAt8BzDsG,GAAa3M,MAAM4K,QAAU6K,GAAsBrQ,GAAaD,GAAQE,GAAYgC,IAGhF+E,GAAYK,KAAenH,KAC7BrL,GAAU+F,MAAMuJ,MAAQmM,GAAkBrQ,GAAYF,GAAQD,KAI5D7D,EAAMoL,KAAenH,GAAYqQ,GAAmBtQ,GAAYF,GAAQD,IAAS,GACjFC,KAAU9D,GAAOuU,GAAoBzQ,KAGrC9D,GAAOd,EAAWC,GAAO,IAAMkP,GAAU,eAAgBrO,EAAKT,EAAkBJ,KAItF,GAAI8G,GAAcgD,EAChB,IAAK,IAAI2D,KAAM3G,EAAY,CAEzB2G,EAAK6H,SAAS7H,GAEd,IAAIrK,EAAO0D,EAAW2G,GAElB8H,GADA1U,EAAM,GACa,IACnB2U,EAAkB,GAClBC,EAAe,GACfC,EAAW,GACXC,EAAW7Q,GAAqC,KAAzBoI,GAAU,QAASO,GAC1CmI,EAAe1I,GAAU,aAAcO,GACvCoI,EAAU3I,GAAU,QAASO,GAC7BqI,EAAgB5I,GAAU,cAAeO,GACzCsI,EAAe7I,GAAU,aAAcO,GACvCuI,EAAW9I,GAAU,SAAUO,GAG/BzC,GAAsBe,IAAiBmB,GAAU,aAAcO,IAAO,UAAWrK,IACnFmS,EAAmB,IAAMrG,GAAU,OAAS8F,GAA2Ba,GAAW,MAIhF,gBAAiBzS,GAAQ,WAAYA,KACvCoS,EAAkB,IAAMtG,GAAU,OAAS+F,GAAsBa,EAAeE,EAAUJ,EAAcC,EAASE,GAAgB,KAI/HnK,GAAYK,KAAenH,KAAc,eAAgB1B,GAAQ,UAAWA,GAASyB,IAAc,WAAYzB,KACjHqS,EAAe,SAAWP,GAAkBU,EAAcI,EAAUL,GAAW,KAE7E3K,GAAsB,UAAW5H,IACnCqS,GAAgBT,GAA2Ba,IAEzCJ,IACFA,EAAe,IAAMvG,GAAU,IAAMuG,EAAe,MAIlD,eAAgBrS,GAASyB,IAAc,WAAYzB,IAAUwI,GAAY,UAAWxI,KACtFsS,GAAYP,GAAmBS,EAAcI,EAAUL,IAErD,WAAYvS,IACdsS,GAAYN,GAAoBY,KAG7BpK,GAAY,UAAWxI,IACtB4H,IAAsB0K,GAAYV,GAA2Ba,IAC7D3K,IAAqBwK,GAAYL,GAA0BQ,KAE7DH,IAAYA,EAAW,IAAMxG,GAAU,gBAAkBwG,EAAW,MAGxE7U,EAAM0U,EAAmBC,EAAkBC,EAAeC,IAGxD1V,GAAME,WAAW,sBAAwBuN,EAAK,GAAK,QAAU5M,EAAM,IAAKb,GAAMK,SAAStN,SAzhB/FkjB,GACAC,KAqjCA,IAAIC,GACKxP,GACLiF,EAEE,WACE,IAAIwK,EAAWzH,GACX0H,EAAYxH,GAEhBuH,GAAYpR,GACZqR,GAAarR,GAITJ,IACFwR,GAAY,EACZC,GAAa,GACJxR,KACJsI,GAAWxI,KAASE,GAAaF,MAAW0R,GAAa,GAG5D7I,KACE5X,GAAQygB,EACVzgB,IAAS4W,GACA5W,GAAQwgB,IACjBxgB,IAAS4W,MAKf,WACE,GAAI5W,GAAQiZ,GACV,KAAOjZ,IAAS+Y,GAAWnC,IAAc5W,IAAS4W,QAC7C,GAAI5W,GAAQ+Y,GACjB,KAAO/Y,IAASiZ,GAAWrC,IAAc5W,IAAS4W,IAIxD,WACE5W,GAAQ2T,KAAKsE,IAAIc,GAAUpF,KAAKqE,IAAIiB,GAAUjZ,MA4jBhD0gB,GACK1K,EACL,WOlmEC,IAAqB2K,EAASlV,EAAMyB,EAAQ0T,EAASzb,EAAI0b,EAAUlW,EACpEmW,EACAC,EAEAC,EACAC,EP8lEEC,GAAcrd,GAAW,IACrBuR,IAAuBnF,IAGzBkR,KAGKlR,IAAUtD,EAAU9I,KAAcsW,OO1mErBwG,EP8mEN9c,GO9mEe4H,EP8mEJgN,GO9mEUvL,EP8mEKwL,GO9mEGkI,EP8mEcjI,GO9mELxT,EP8mEuBic,KO9mEnBP,EP8mEiD5Q,GO9mEvCtF,EP8mE8CwP,GO7mElH2G,EAAOnN,KAAKqE,IAAI6I,EAAU,IAC1BE,EAAQ5b,EAAG1E,QAAQ,MAAQ,EAAK,IAAM,KACtC0E,EAAKA,EAAGrK,QAAQimB,EAAM,IACtBC,EAAOzG,OAAOoG,EAAQ/W,MAAM6B,GAAM3Q,QAAQoS,EAAQ,IAAIpS,QAAQ8lB,EAAS,IAAI9lB,QAAQimB,EAAM,KACzFE,GAAgB9b,EAAK6b,GAAQH,EAAWC,EAG5CvY,YACA,SAAS8Y,IACPR,GAAYC,EACZE,GAAQC,EACRN,EAAQ/W,MAAM6B,GAAQyB,EAAS8T,EAAOD,EAAOH,EACzCC,EAAW,EACbtY,WAAW8Y,EAAaP,GAExBnW,MARoBmW,IPymEbzK,IAAciL,MAErB,WACE3J,GAAgB,GAEhB,IAAI4J,EAAM,GACVA,EAAI/L,GAAiB+L,EAAI9L,GAAgB0E,GACzCrM,EAAa6I,GAAWmC,IAAcyI,GACtC5T,EAAUgJ,GAAW3W,IAAQuhB,GAE7BC,GAAa1I,GAAanI,GAAWC,IAAY,GACjD4Q,GAAaxhB,GAAO6Q,GAAeF,IAI9B6E,GAAkBC,GAAiBxF,IAAUtD,EAAU9I,KAAcsW,MA8jBhF,MAAO,CACL1X,QAAS,QACTgf,QAASC,GACTtI,OAAQA,GACRsB,KAAMA,GACNiH,KAhVF,WACMzR,KAAa0K,KACfgH,KACAlE,IAAqB,IA8UvBmE,MA3UF,WACMjH,KACFC,KACA6C,IAAqB,IAyUvB3G,KAAMA,GACN+K,mBAAoBC,GACpBC,QAAS1B,GACT2B,QArjDF,WAoBE,GAlBA7X,GAAMqP,UAAW,EACbrP,GAAM8X,WAAa9X,GAAM8X,UAAUjY,SAGvC6D,EAAa9F,EAAK,CAAC,OAAUma,KAGzBnS,IAAalC,EAAa1E,EAAKqS,IAC/BhM,IAAqB3B,EAAa2B,GAAmBoK,IACrD/J,IAAgBhC,EAAagC,GAAcoK,IAG/CpM,EAAajK,GAAWqX,IACxBpN,EAAajK,GAAWyX,IACpB9K,IAAkB1C,EAAa0C,GAAgB,CAAC,MAAS4R,KACzDlS,IAAYmS,cAAc5E,IAG1BzH,GAAYR,EAAe,CAC7B,IAAI+L,EAAM,GACVA,EAAI/L,GAAiB2E,GACrBrM,EAAajK,GAAW0d,GAEtBlQ,IAASvD,EAAajK,GAAW6X,IACjCpK,IAAaxD,EAAajK,GAAWiY,IAGzC,IAAIwG,EAAW,CAAC7L,GAAeqG,GAAuBC,GAAgBC,GAAgBC,GAAkBU,IAmBxG,IAAK,IAAIta,KAjBTwS,EAAQnP,SAAQ,SAASmF,EAAMxN,GAC7B,IAAI2M,EAAc,cAATa,EAAuByK,GAAe3H,EAAQ9C,GAEvD,GAAkB,iBAAPb,GAAmBA,EAAI,CAChC,IAAIuX,IAASvX,EAAGwX,wBAAyBxX,EAAGwX,uBACxCC,EAAWzX,EAAGwD,WAClBxD,EAAG0L,UAAY4L,EAASjkB,GACxBsQ,EAAQ9C,GAAQ0W,EAASA,EAAOG,mBAAqBD,EAASE,sBAMlE9M,EAAUlF,GAAYC,GAAaE,GAAeD,GAAgBwF,GAAaC,GAAeC,GAAe1S,GAAY2S,GAAkBC,GAAgBE,GAAaC,GAAaR,GAAiBS,GAAc3H,GAAYD,GAAaD,GAAcD,GAASwI,GAAWzI,GAAQM,GAAUD,GAAca,GAAYC,GAAQe,GAASD,GAAOE,GAAa7G,GAAQ+G,GAAW8F,GAAiBU,GAAgBC,GAAaQ,GAAgBC,GAAmBC,GAAgBE,GAA6BC,GAAgBC,GAAkBC,GAAmBC,GAAc5Y,GAAQ8Y,GAAcC,GAAWE,GAAyB1H,GAAa2H,GAAwBC,GAAUvH,GAASwH,GAASC,GAAsBC,GAAUE,GAAUC,GAAW9H,GAAY+H,GAASE,GAASC,GAAiBK,GAAYgB,GAAcI,GAAkBG,GAAsBC,GAAcI,GAAaC,GAAcC,GAASjM,GAAkBkM,GAAcC,GAAWC,GAAeC,GAAmBE,GAAmBC,GAAYrF,GAAe5H,GAAWE,GAAeC,GAAoBqN,GAAwBpN,GAAaC,GAAaiN,GAAeC,GAAejN,GAAME,GAAemN,GAAmBhC,GAAWR,GAAQ0C,GAAc7C,GAAaK,GAAkB0C,GAAwBC,GAAiBC,GAASC,GAAgBtN,GAAWE,GAAkBC,GAAoBC,GAAeC,GAAqBC,GAAiBmN,GAAqBjN,GAA4BkN,GAAsBH,GAAgB7C,GAAYQ,GAAsBsC,GAAqBlC,GAA2BuC,GAAeC,GAAeH,GAA8BI,GAAWH,GAAWI,GAAU7M,GAAQC,GAAY,KAI3pDrS,KACF,YAANoE,IAAmBpE,KAAKoE,GAAK,MAEnC0T,IAAO,GAmgDP6L,QAAS,WACP,OAAOlU,EAAI,EAAOC,EAASmH,MA9vE/B,SAASwI,GAA0BuE,GAC7BA,IACFvT,GAAWM,GAAMyB,GAAQC,GAAYtB,GAAYE,GAAWK,GAAqBG,IAA4B,GAIjH,SAASsI,KAEP,IADA,IAAIlB,EAAM9B,EAAWhW,GAAQ4X,GAAa5X,GACnC8X,EAAM,GAAKA,GAAOlB,GACzB,OAAOkB,EAAIlB,GAAa,EAG1B,SAASiC,GAAeiK,GAEtB,OADAA,EAAMA,EAAMnP,KAAKsE,IAAI,EAAGtE,KAAKqE,IAAIjH,GAAO6F,GAAa,EAAIA,GAAa9H,GAAOgU,IAAQ,EAC9E9M,EAAW8M,EAAMlL,GAAakL,EAGvC,SAASC,GAAa1kB,GAIpB,IAHS,MAALA,IAAaA,EAAI2B,IAEjBgW,IAAY3X,GAAKuZ,IACdvZ,EAAI,GAAKA,GAAKuY,GAErB,OAAOjD,KAAK8D,MAAMpZ,EAAEuY,IAGtB,SAASwG,KACP,IACIpK,EADAgQ,EAAWD,KAUf,OAPA/P,EAASjD,GAAkBiT,EACzB/T,IAAcC,GAAYyE,KAAKoE,MAAMiL,EAAW,GAAKvI,GAAQ7D,GAAa,GACtEjD,KAAK8D,MAAMuL,EAAWlU,KAGvBiC,IAAQiF,GAAYhW,KAAUiZ,KAAYjG,EAASyH,GAAQ,GAEzDzH,EAmCT,SAAS8D,KACP,OAAO9O,EAAIib,YAAc7Z,EAAIK,gBAAgByZ,aAAe9Z,EAAIC,KAAK6Z,YAGvE,SAASC,GAAmBhlB,GAC1B,MAAe,QAARA,EAAgB,aAAe,YAGxC,SAASilB,GAAgBpY,GACvB,GAAU,MAANA,EAAJ,CACA,IAAoCqY,EAAMlQ,EAAtCJ,EAAM3J,EAAIE,cAAc,OAK5B,OAJA0B,EAAGjB,YAAYgJ,GAEfI,GADAkQ,EAAOtQ,EAAIc,yBACEyP,MAAQD,EAAKvP,KAC1Bf,EAAI9I,SACGkJ,GAASiQ,GAAepY,EAAGwD,aAGpC,SAASgJ,KACP,IAAI+L,EAAMvU,GAA4B,EAAdA,GAAkBD,GAAS,EACnD,OAAOqU,GAAe5M,IAAmB+M,EAG3C,SAASpL,GAAWtM,GAClB,GAAI8C,EAAQ9C,GACV,OAAO,EAEP,GAAIqF,EACF,IAAK,IAAI2G,KAAM3G,EACb,GAAIA,EAAW2G,GAAIhM,GAAS,OAAO,EAGvC,OAAO,EAQX,SAASyL,GAAWzL,EAAM2X,GAGxB,GAFU,MAANA,IAAcA,EAAK3M,IAEV,UAAThL,GAAoBoD,GACtB,OAAO0E,KAAK8D,OAAOF,GAAWxI,KAAWE,GAAaF,MAAY,EAGlE,IAAIiE,EAASrE,EAAQ9C,GAErB,GAAIqF,EACF,IAAK,IAAI2G,KAAM3G,EAETsS,GAAM9D,SAAS7H,IACbhM,KAAQqF,EAAW2G,KAAO7E,EAAS9B,EAAW2G,GAAIhM,IAQ5D,MAHa,YAATA,GAAiC,SAAXmH,IAAqBA,EAASsE,GAAU,UAC7DtB,GAAsB,YAATnK,GAA+B,UAATA,IAAqBmH,EAASW,KAAK8D,MAAMzE,IAE1EA,EAUX,SAASqM,GAAuBoE,EAAgBC,EAAWC,EAAeC,EAAUzD,GAClF,IAAIlV,EAAM,GAEV,QAAuBlK,IAAnB0iB,EAA8B,CAChC,IAAIF,EAAME,EACNC,IAAaH,GAAOG,GACxBzY,EAAMoL,GACJ,aAAekN,EAAM,QAAUE,EAAiB,MAChD,WAAaA,EAAiB,QAAUF,EAAM,aAC3C,GAAIG,IAAcC,EAAe,CACtC,IAAIE,EAAgB,IAAMH,EAAY,KAEtCzY,EAAM,cADIoL,GAAawN,EAAgB,OAAS,KAAOA,EAAgB,MAC5C,IAI7B,OADK7N,GAAYmK,GAAgB/K,GAAsBwO,IAAY3Y,GAAOmU,GAA2BwE,IAC9F3Y,EAGT,SAASqU,GAAmBqE,EAAeD,EAAWI,GACpD,OAAIH,GACMA,EAAgBD,GAAatL,GAAgB,KAE9CtF,EACLA,EAAO,IAAsB,IAAhBsF,GAAsB,OAAS0L,EAAW,IACvC,IAAhB1L,GAAsB0L,EAAW,IAIvC,SAASvE,GAAoBoE,EAAeD,EAAWI,GACrD,IAAI3Q,EAEJ,GAAIwQ,EACFxQ,EAASwQ,EAAgBD,EAAa,SACjC,CACA1N,IAAY8N,EAAWnQ,KAAK8D,MAAMqM,IACvC,IAAIC,EAAW/N,EAAWoC,GAAgB0L,EAC1C3Q,EAAQL,EACNA,EAAO,WAAaiR,EAAW,IAC/B,IAAMA,EAAW,IAMrB,OAHA5Q,EAAQ,SAAWA,EAGD,UAAX3B,EAAqB2B,EAAQ,IAAMA,EAAQ,eAGpD,SAASqM,GAAqBkE,GAC5B,IAAIzY,EAAM,IAIQ,IAAdyY,IAGFzY,GAFWoL,GAAa,WAAa,YAC3BA,GAAa,QAAU,UACb,KAAOqN,EAAY,OAGzC,OAAOzY,EAGT,SAAS+Y,GAAc5jB,EAAMse,GAC3B,IAAIxR,EAAS9M,EAAKH,UAAU,EAAGG,EAAKjD,OAASuhB,GAAKnX,cAGlD,OAFI2F,IAAUA,EAAS,IAAMA,EAAS,KAE/BA,EAGT,SAASkS,GAA4BnP,GACnC,OAAO+T,GAAa5O,EAAoB,IAAM,uBAAyBnF,EAAQ,IAAO,KAGxF,SAASwP,GAA2BxP,GAClC,OAAO+T,GAAa1O,EAAmB,IAAM,sBAAwBrF,EAAQ,IAAO,KAkFtF,SAASqQ,KAEP,GAAInI,GAAU,eAAiBjJ,KAAcmH,GAAY,CACvD,IAAI4N,EAAOpgB,GAAU2C,iBAAiB,OAGtCE,EAAQud,GAAM,SAASxH,GACrB,IAAIyH,EAAMzH,EAAIyH,IAET/S,KAEC+S,GAAOA,EAAIzjB,QAAQ,cAAgB,GACrCgc,EAAIyH,IAAM,GACVvW,EAAU8O,EAAKF,IACflR,EAASoR,EAAK,WAEdA,EAAIyH,IAAMA,GAGV1H,GAAUC,OAMhBxU,GAAI,WAAYkc,GAAgB9X,EAAkB4X,IAAO,WAAa/M,IAAe,QAGjFiB,GAAU,gBAAiB8L,EAAOG,GAAcpkB,GAAO2T,KAAKqE,IAAIhY,GAAQ8O,GAAQ,EAAGsJ,GAAgB,KAEvGjH,GAAWkT,KAAkCpc,GAAI,WAAYkc,GAAgB9X,EAAkB4X,GAAOI,YAIlGrO,GAAYsO,KAGhBC,KACAC,KAIJ,SAASH,KACP,GAAInV,IAAa0H,GAAa,EAAG,CAE/B,IAAI8H,EAAM3N,GAAO/Q,GAAQ4W,GAAa,GAEtC,SAAU6N,IACR,IAAI3Q,EAAO6C,GAAW+H,GAAK7K,wBAAwBC,KAC/CwP,EAAQ3M,GAAW+H,EAAM,GAAG7K,wBAAwByP,MAEvD3P,KAAKC,IAAIE,EAAOwP,IAAU,EACzBoB,KACAnc,YAAW,WAAYkc,MAA4B,IANvD,QAUAC,KAKJ,SAASA,KAEFrO,KAAcnH,KACjByV,KAEIzV,IACFoJ,GAAgBC,KACZ5G,KAAa+H,GAASC,MAC1BV,GAAWL,KACX0F,GAAyB9E,IAAWE,KAEpC4H,MAKAtL,GAAYsO,KAGhBC,KACAC,KA8JF,SAASD,KASP,GAPAK,KAGAtO,GAAauO,mBAAmB,aAAc,qHAAuHC,KAAqB,eAAiBlO,GAAa,UACxNO,GAAoBb,GAAazO,cAAc,4BAG3CoU,GAAa,CACf,IAAI8I,EAAM7U,GAAW,OAAS,QAC1BM,GACF1E,EAAS0E,GAAgB,CAAC,cAAeuU,IAChCpW,EAAQ8B,uBACjB6F,GAAauO,mBAAmB1B,GAAkBxU,EAAQwB,kBAAmB,sCAAwC4U,EAAM,KAAOnH,GAAoB,GAAKmH,EAAMnH,GAAoB,GAAKtN,GAAa,GAAK,aAC5ME,GAAiB8F,GAAazO,cAAc,kBAI1C2I,IACF7C,EAAU6C,GAAgB,CAAC,MAAS4R,KAGlClS,KACF0R,KACIrR,IAAsB5C,EAAU9J,GAAWqX,IAC3CxK,IAA6B/C,EAAU9J,GAAWyX,KAK1D,GAAIU,GAAQ,CAIV,GAAIlM,GACFhE,EAASgE,GAAc,CAAC,aAAc,wBAEtCpJ,EADAuU,GAAWnL,GAAaiE,UACN,SAASlI,EAAMxN,GAC/ByN,EAASD,EAAM,CACb,WAAYxN,EACZ,SAAY,KACZ,aAAckf,IAAUlf,EAAI,GAC5B,gBAAiBib,YAKhB,CAGL,IAFA,IAAI0L,EAAU,GACVC,EAAYlV,GAAkB,GAAK,uBAC9B1R,EAAI,EAAGA,EAAIuY,GAAYvY,IAE9B2mB,GAAW,mCAAqC3mB,EAAG,kCAAoCib,GAAU,KAAO2L,EAAY,gBAAkB1H,IAAUlf,EAAI,GAAI,cAE1J2mB,EAAU,yDAA2DA,EAAU,SAC/E1O,GAAauO,mBAAmB1B,GAAkBxU,EAAQkB,aAAcmV,GAExElV,GAAewG,GAAazO,cAAc,YAC1CoT,GAAWnL,GAAaiE,SAM1B,GAHAmR,KAGI9P,EAAoB,CACtB,IAAIlI,EAASkI,EAAmBnV,UAAU,EAAGmV,EAAmBjY,OAAS,IAAIoK,cACzE0D,EAAM,mBAAqBgF,GAAQ,IAAO,IAE1C/C,IACFjC,EAAM,IAAMiC,EAAS,IAAMjC,GAG7Bd,EAAWC,GAAO,mBAAqBkP,GAAU,SAAUrO,EAAKT,EAAkBJ,KAGpF0B,EAASmP,GAASN,IAAkB,CAAC,aAAc4C,IAAU5C,GAAkB,GAAK6C,KACpFtR,EAAY+O,GAASN,IAAkB,YACvCtP,EAAS4P,GAASN,IAAkB2C,IAGpC3P,EAAUmC,GAAcoK,IAMtB6B,KACGtM,IAAuBC,IAAeC,KACzC2G,GAAauO,mBAAmB1B,GAAkBxU,EAAQY,kBAAmB,mJAAqJ+J,GAAS,KAAO9J,GAAa,GAAK,oFAAsF8J,GAAS,KAAO9J,GAAa,GAAK,mBAE5XC,GAAoB6G,GAAazO,cAAc,kBAG5C6H,IAAeC,KAClBD,GAAaD,GAAkBsE,SAAS,GACxCpE,GAAaF,GAAkBsE,SAAS,IAGtCpF,EAAQc,mBACV3D,EAAS2D,GAAmB,CAC1B,aAAc,sBACd,SAAY,OAIZd,EAAQc,mBAAsBd,EAAQe,YAAcf,EAAQgB,aAC9D7D,EAAS,CAAC4D,GAAYC,IAAa,CACjC,gBAAiB2J,GACjB,SAAY,QAIZ3K,EAAQc,mBAAsBd,EAAQe,YAAcf,EAAQgB,cAC9D7D,EAAS4D,GAAY,CAAC,gBAAkB,SACxC5D,EAAS6D,GAAY,CAAC,gBAAkB,UAG1CiN,GAAeuI,GAASzV,IACxBmN,GAAesI,GAASxV,IAExByV,KAGI3V,GACF9B,EAAU8B,GAAmBoK,KAE7BlM,EAAU+B,GAAYmK,IACtBlM,EAAUgC,GAAYkK,MAK1BwL,KAGF,SAASb,KAEP,GAAIxO,GAAYR,EAAe,CAC7B,IAAI+L,EAAM,GACVA,EAAI/L,GAAiB2E,GACrBxM,EAAU9J,GAAW0d,GAGnBlQ,IAAS1D,EAAU9J,GAAW6X,GAAa/M,EAAQ+C,sBACnDJ,IAAa3D,EAAU9J,GAAWiY,IAClC9L,IAAarC,EAAUvE,EAAKqS,IAEjB,UAAXjK,EACF4H,GAAOlL,GAAG,gBAAgB,WACxBoX,KACAlM,GAAO9K,KAAK,cAAeoT,UAEpBxQ,GAAcjC,IAAcC,IAAa+B,KAAeoF,KACjE1I,EAAU3F,EAAK,CAAC,OAAUma,KAGxBlR,KACa,UAAXO,EACF4H,GAAOlL,GAAG,cAAeqX,IACf/L,IAAW+L,MAGzBC,KACIhM,GAAWiM,KAA4B/L,IAAUgM,KAErDtM,GAAOlL,GAAG,eAAgByX,IACX,UAAXnU,GAAsB4H,GAAO9K,KAAK,cAAeoT,MAC/B,mBAAX9P,IAAyBA,GAAO8P,MAC3C3K,IAAO,EA2DT,SAASoL,GAAUra,GACjBG,GAAI,WAAYqd,GAAYvL,GAASjS,OAGvC,SAASwd,GAAaxd,GACpB,GAAKiP,GAAL,CACe,UAAXvF,GAAsB4H,GAAO9K,KAAK,eAAgBoT,GAAK5Z,IAC3D+O,GAAcC,KACd,IAAI8O,EACAC,EAAoBzP,GACpB0P,GAAyB,EAEzB5U,IACF8F,MACA4O,EAAYC,IAAsBzP,KAEjBgD,GAAO9K,KAAK,qBAAsBoT,GAAK5Z,KAG1D,IAAIie,EACAC,EACAlC,EAAWhV,GACXmX,EAAazM,GACb0M,EAAYxM,GACZyM,EAAenW,GACfoW,EAAc9W,GACd+W,EAASzW,GACT0W,EAAWjV,GACXkV,EAAejV,GACfkV,EAActW,GACduW,EAAwBlW,GACxBmW,EAA+BhW,GAC/BiW,EAAW3mB,GAEf,GAAI4lB,EAAW,CACb,IAAIjC,EAAgB1U,GAChB2X,EAAgB3V,GAChB4V,EAAkBrX,GAClBsX,EAAYzX,GACZ0X,EAAkBzW,GAEtB,IAAK4D,EACH,IAAIwP,EAAY3U,GACZ0U,EAAiBzU,GAwJzB,GAhJAgB,GAAYsH,GAAU,aACtBhI,GAAWgI,GAAU,YACrB1H,GAAM0H,GAAU,OAChBjG,GAAQiG,GAAU,SAClBjI,GAASiI,GAAU,UACnBhG,GAAYgG,GAAU,aACtBpH,GAAWoH,GAAU,YACrB/G,GAAqB+G,GAAU,sBAC/B5G,GAA4B4G,GAAU,6BAElCsO,IACFpM,GAAUlC,GAAU,WACpBrI,GAAaqI,GAAU,cACvBrH,GAAQqH,GAAU,SAClBrG,GAAaqG,GAAU,cACvB9H,GAAe8H,GAAU,gBACzBhH,GAAegH,GAAU,gBACzBlH,GAAkBkH,GAAU,mBAEvBpD,IACHlF,GAAcsI,GAAU,eACxBvI,GAASuI,GAAU,YAIvBgH,GAAyB9E,IAEzBjC,GAAWC,KACLnB,KAAcnH,IAAesK,KACjCmL,KACKtO,KACHiL,KACAwE,GAAyB,KAGzB7W,IAAcC,MAChBoJ,GAAgBC,KAEhBU,GAAWL,OAITgN,GAAa3W,MACfH,GAAQwI,GAAU,SAClBlI,GAAUkI,GAAU,YACpB0O,EAAelX,KAAUgV,KAGlB7U,IAAeC,KAAa+J,GAAWL,MAG5C2H,OAIAqF,GACEpM,KAAYyM,IACVzM,GACFiM,KAqVR,WACE,IAAKhM,GAAY,OAMjB,GAJArP,GAAMqP,UAAW,EACjB5V,GAAUuH,WAAaiO,GACvBiL,KAEIvT,GACF,IAAK,IAAI/O,EAAI4V,GAAY5V,KACnBgU,GAAYtJ,EAAYiK,GAAW3U,IACvC0K,EAAYiK,GAAWyB,GAAgBpW,EAAI,IAK/C,IAAKgU,EACH,IAAK,IAAI3X,EAAI2B,GAAO6K,EAAI7K,GAAQ4W,GAAYvY,EAAIwM,EAAGxM,IAAK,CACtD,IAAIwN,EAAO8K,GAAWtY,GAClB2oB,EAAS3oB,EAAI2B,GAAQ8O,GAAQ6B,GAAYE,GAC7ChF,EAAKjC,MAAMkK,KAAqB,KAAbzV,EAAI2B,IAAe8O,GAAQ,IAC9CzD,EAASQ,EAAMmb,GAKnBC,KAEAxN,IAAW,EA9WLyN,IAKFvV,KAAciU,GAAa3W,IAAcC,MAC3CwK,GAASC,QAIMuM,IACTxM,IACFyH,GAAqBC,GAA2BvI,GAAc,KAC9D6M,QAgRR,WACE,IAAK9L,GAAU,OAIX5K,IAAekF,IAASqC,GAAa3M,MAAMud,OAAS,IAGxD,GAAIvP,GAEF,IADA,IAAI3M,EAAM,kBACD5M,EAAIuZ,GAAYvZ,KACnB2X,GAAYzK,EAAYoL,GAAWtY,GAAI4M,GAC3CM,EAAYoL,GAAWyB,GAAgB/Z,EAAI,GAAI4M,GAKnDgc,KAEArN,IAAS,EAjSHwN,GACAtB,GAAyB,IAK/BxH,GAAyB9E,IAAWE,IAC/BxJ,KAAYK,GAAqBG,IAA4B,GAE9DV,KAAcmW,IAChBnW,GACErC,EAAUvE,EAAKqS,IACf3N,EAAa1E,EAAKqS,KAElBnM,KAAa8W,IACX9W,GACEG,GACF/C,EAAY+C,KAERC,IAAchD,EAAYgD,IAC1BC,IAAcjD,EAAYiD,KAG5BF,GACFlD,EAAYkD,KAERC,IAAcnD,EAAYmD,IAC1BC,IAAcpD,EAAYoD,MAIhCC,KAAQyW,IACNzW,IACFlD,EAAYoD,IACZoV,MAEA3Y,EAAYuD,KAGZuB,KAAUiV,IACZjV,GACE1D,EAAU9J,GAAW6X,GAAa/M,EAAQ+C,sBAC1C5D,EAAajK,GAAW6X,KAExBpK,KAAciV,IAChBjV,GACE3D,EAAU9J,GAAWiY,IACrBhO,EAAajK,GAAWiY,KAExB5L,KAAasW,IACXtW,IACEM,IAAkB9D,EAAY8D,IAC7BoK,IAAc8C,IAAsBkE,OAErCpR,IAAkBjE,EAAYiE,IAC9BoK,IAAaC,OAGjBtK,KAAuBkW,IACzBlW,GACE5C,EAAU9J,GAAWqX,IACrBpN,EAAajK,GAAWqX,KAExBxK,KAA8BgW,IAChChW,GACE/C,EAAUvE,EAAKkS,IACfxN,EAAa1E,EAAKkS,KAGlBsK,GAYF,GAXI3W,KAAe0U,GAAiBtU,KAAWyX,IAAahB,GAAyB,GAEjF7U,KAAe2V,IACZ3V,KAAcsF,GAAa3M,MAAMyd,OAAS,KAG7C/X,IAAYE,KAAiBqX,IAC/BnX,GAAWgE,UAAYlE,GAAa,GACpCG,GAAW+D,UAAYlE,GAAa,IAGlCgB,IAAkBF,KAAiByW,EAAiB,CACtD,IAAI1oB,EAAI6R,GAAW,EAAI,EACnBoX,EAAO9W,GAAekD,UACtB6T,EAAMD,EAAKnqB,OAAS4pB,EAAgB1oB,GAAGlB,OACvCmqB,EAAKrnB,UAAUsnB,KAASR,EAAgB1oB,KAC1CmS,GAAekD,UAAY4T,EAAKrnB,UAAU,EAAGsnB,GAAOjX,GAAajS,UAIjEgR,KAAWJ,IAAcC,MAAc4W,GAAyB,GAsBtE,IAnBIE,GAAgB/W,KAAeC,MACjCuL,GAAQyC,KACRgI,OAGFa,EAAa/lB,KAAU2mB,IAErBvN,GAAO9K,KAAK,eAAgBoT,MAC5BoE,GAAyB,GAChBE,EACJD,GAAcJ,MACV1W,IAAcC,MACvBsW,KACAZ,KACA4C,MAGExB,IAAiBhQ,GA2evB,WAEE,IADA,IAAInL,EAAI7K,GAAQ2T,KAAKqE,IAAIpB,GAAY9H,IAC5BzQ,EAAI+Z,GAAe/Z,KAAM,CAChC,IAAIwN,EAAO8K,GAAWtY,GAElBA,GAAK2B,IAAS3B,EAAIwM,GAEpBQ,EAASQ,EAAM,cAEfA,EAAKjC,MAAMkK,KAAqB,KAAbzV,EAAI2B,IAAe8O,GAAQ,IAC9CzD,EAASQ,EAAM8E,IACfpF,EAAYM,EAAMgF,KACThF,EAAKjC,MAAMkK,OACpBjI,EAAKjC,MAAMkK,KAAO,GAClBzI,EAASQ,EAAMgF,IACftF,EAAYM,EAAM8E,KAIpBpF,EAAYM,EAAM+E,IAIpBrI,YAAW,WACT7B,EAAQiQ,IAAY,SAAS3L,GAC3BO,EAAYP,EAAI,mBAEjB,KAtgB8Byc,IAE5BjO,KAAYE,GAAQ,CAEvB,GAAIkM,IAAc1R,IAIZlF,KAAgByU,GAAkB1U,KAAW2U,IAC/CnN,GAAa3M,MAAM4K,QAAU6K,GAAsBrQ,GAAaD,GAAQE,GAAYgB,GAAOgB,KAGzFoF,IAAY,CAEVL,IACFnS,GAAU+F,MAAMuJ,MAAQmM,GAAkBrQ,GAAYF,GAAQD,KAIhE,IAAI7D,EAAMsU,GAAmBtQ,GAAYF,GAAQD,IACvC0Q,GAAoBzQ,KQz8CjC,SAAuB3E,EAAOpK,GAEjC,eAAgBoK,EACdA,EAAMsd,WAAW1nB,GACjBoK,EAAMud,WAAW3nB,GRy8Cb4nB,CAAcxd,GAAOI,EAAkBJ,IAAS,GAChDD,EAAWC,GAAO,IAAMkP,GAAU,eAAgBrO,EAAKT,EAAkBJ,KAKzE6G,IAAcsU,KAEdO,IACFxB,KACAxL,GAAc9Y,IAId4lB,GAAaxM,GAAO9K,KAAK,mBAAoBoT,GAAK5Z,KAQxD,SAAS6R,KACP,IAAK1K,KAAeC,GAElB,OAAQ0H,KADAvH,GAASP,IAASA,GAAQ,GAAK,EAAIA,IAI7C,IAAIqE,EAAQlE,IAAcA,GAAaF,IAAU6H,GAAaK,GAAeL,IACzEiR,EAAK7Y,GAAcuI,GAAyB,EAAdvI,GAAkBuI,GAAWxI,GAM/D,OAJIM,KACFwY,GAAM5Y,IAAcsI,GAAWtI,IAAc,GAAKsI,IAAYN,GAAejX,GAAQ,GAAKiX,GAAejX,IAAS+O,KAAW,GAGxHoE,GAAS0U,EAGlB,SAAS7Q,KAEP,IAAK,IAAIa,KADTzB,GAAiB,EACFlF,EACb2G,EAAK6H,SAAS7H,GACVhB,IAAegB,IAAMzB,GAAiByB,GA+C9C,SAASwN,MACFnV,IAAYM,IAAkBjE,EAAYiE,KAC1CZ,IAAOE,IAAgBvD,EAAYuD,IACnCR,KACCG,GACFlD,EAAYkD,KAERC,IAAcnD,EAAYmD,IAC1BC,IAAcpD,EAAYoD,MAKpC,SAASsX,KACH/W,IAAYM,IAAkB9D,EAAY8D,IAC1CZ,IAAOE,IAAgBpD,EAAYoD,IACnCR,KACEG,GACF/C,EAAY+C,KAERC,IAAchD,EAAYgD,IAC1BC,IAAcjD,EAAYiD,MAKpC,SAAS+V,KACP,IAAI9L,GAAJ,CAMA,GAHI5K,KAAeuH,GAAa3M,MAAMud,OAAS,OAG3CvP,GAEF,IADA,IAAI3M,EAAM,kBACD5M,EAAIuZ,GAAYvZ,KACnB2X,GAAY3K,EAASsL,GAAWtY,GAAI4M,GACxCI,EAASsL,GAAWyB,GAAgB/Z,EAAI,GAAI4M,GAKhDoa,KAEAzL,IAAS,GAyBX,SAAS6L,KACP,IAAIhM,GAAJ,CAKA,GAHArP,GAAMqP,UAAW,EACjB5V,GAAUuH,UAAYvH,GAAUuH,UAAUtQ,QAAQue,GAAoBpZ,UAAU,GAAI,IACpFiM,EAAYrI,GAAW,CAAC,UACpBkN,GACF,IAAK,IAAI/O,EAAI4V,GAAY5V,KACnBgU,GAAYzJ,EAAYoK,GAAW3U,IACvCuK,EAAYoK,GAAWyB,GAAgBpW,EAAI,IAQ/C,GAHKqU,IAAeL,GAAY9J,EAAYqK,GAAc,CAAC,WAGtDP,EACH,IAAK,IAAI3X,EAAI2B,GAAO6K,EAAI7K,GAAQ4W,GAAYvY,EAAIwM,EAAGxM,IAAK,CACtD,IAAIwN,EAAO8K,GAAWtY,GACtB6N,EAAYL,EAAM,CAAC,UACnBN,EAAYM,EAAM8E,IAClBpF,EAAYM,EAAMgF,IAKtBwU,KAEA5L,IAAW,GAiCb,SAAS+N,KACP,IAAIvc,EAAM6Z,KACN3N,GAAkBzD,YAAczI,IAAOkM,GAAkBzD,UAAYzI,GAG3E,SAAS6Z,KACP,IAAIpa,EAAMod,KACNpqB,EAAQgN,EAAI,GAAK,EACjBqd,EAAMrd,EAAI,GAAK,EACnB,OAAOhN,IAAUqqB,EAAMrqB,EAAQ,GAAKA,EAAQ,OAASqqB,EAGvD,SAASD,GAAsB7U,GAClB,MAAPA,IAAeA,EAAMmO,MACzB,IAAmB2G,EAAKC,EAAYC,EAAhCvqB,EAAQsC,GAiBZ,GAdIqP,IAAUL,IACRE,IAAaD,MACf+Y,IAAgBE,WAAWjV,GAAOjE,IAClCiZ,EAAWD,EAAazQ,GAAyB,EAAdvI,IAGjCE,KACF8Y,EAAa/Q,GAAejX,IAC5BioB,EAAWD,EAAazQ,IAMxBrI,GACF+H,GAAevQ,SAAQ,SAASyhB,EAAO9pB,GACjCA,EAAI+Z,MACD/I,IAAUL,KAAgBmZ,GAASH,EAAa,KAAOtqB,EAAQW,GAChE4pB,EAAWE,GAAS,KAAOJ,EAAM1pB,WAKpC,CAEL,GAAI4Q,GAAY,CACd,IAAImZ,EAAOnZ,GAAaF,GACpBM,IAAUL,IACZtR,EAAQiW,KAAK8D,MAAMuQ,EAAWI,GAC9BL,EAAMpU,KAAKoE,KAAKkQ,EAASG,EAAO,IAEhCL,EAAMrqB,EAAQiW,KAAKoE,KAAKR,GAAS6Q,GAAQ,OAI3C,GAAI/Y,IAAUL,GAAa,CACzB,IAAI3L,EAAIyL,GAAQ,EAQhB,GAPIO,IACF3R,GAAS2F,EAAI,EACb0kB,EAAM/nB,GAAQqD,EAAI,GAElB0kB,EAAM/nB,GAAQqD,EAGZ2L,GAAa,CACf,IAAImP,EAAInP,GAAcF,GAAQyI,GAC9B7Z,GAASygB,EACT4J,GAAO5J,EAGTzgB,EAAQiW,KAAK8D,MAAM/Z,GACnBqqB,EAAMpU,KAAKoE,KAAKgQ,QAEhBA,EAAMrqB,EAAQoR,GAAQ,EAI1BpR,EAAQiW,KAAKsE,IAAIva,EAAO,GACxBqqB,EAAMpU,KAAKqE,IAAI+P,EAAK3P,GAAgB,GAGtC,MAAO,CAAC1a,EAAOqqB,GAGjB,SAASvC,KACP,GAAIrU,KAAaqI,GAAS,CACxB,IAAI6O,EAAMP,KACVO,EAAI7pB,KAAK4S,IAETgT,GAAcnf,MAAM,KAAMojB,GAAK3hB,SAAQ,SAAU+V,GAC/C,IAAK1R,EAAS0R,EAAKH,IAAmB,CAEpC,IAAIiF,EAAM,GACVA,EAAI/L,GAAiB,SAAU1N,GAAKA,EAAEwgB,mBACtC3a,EAAU8O,EAAK8E,GAEf5T,EAAU8O,EAAKF,IAGfE,EAAIyH,IAAMvY,EAAQ8Q,EAAK,YAGvB,IAAI8L,EAAS5c,EAAQ8Q,EAAK,eACtB8L,IAAU9L,EAAI8L,OAASA,GAE3Bld,EAASoR,EAAK,gBActB,SAASD,GAAWC,GAClBpR,EAASoR,EAAK,UACdC,GAAaD,GAQf,SAASC,GAAcD,GACrBpR,EAASoR,EAAKH,IACd/Q,EAAYkR,EAAK,WACjB3O,EAAa2O,EAAKF,IAGpB,SAAS6H,GAAe1mB,EAAOqqB,EAAKS,GAClC,IAAIvE,EAAO,GAGX,IAFKuE,IAAeA,EAAc,OAE3B9qB,GAASqqB,GACdrhB,EAAQiQ,GAAWjZ,GAAO8I,iBAAiBgiB,IAAc,SAAU/L,GAAOwH,EAAKzlB,KAAKie,MACpF/e,IAGF,OAAOumB,EAKT,SAASsB,KACP,IAAItB,EAAOG,GAAcnf,MAAM,KAAM6iB,MACrC7f,GAAI,WAAYkc,GAAgBF,EAAMlC,OAGxC,SAASoC,GAAiBF,EAAM3b,GAE9B,OAAI4O,GAAuB5O,KAG3B2b,EAAKvd,SAAQ,SAAU+V,EAAKzc,IACrBmR,IAAYsL,EAAIgM,UAAY/L,GAAaD,GAC1C1R,EAAS0R,EAAKH,KAAqB2H,EAAKlc,OAAO/H,EAAO,MAIvDikB,EAAK9mB,YAGV8K,GAAI,WAAYkc,GAAgBF,EAAM3b,MAHXA,KAM7B,SAASqd,KACPH,KACAZ,KACA4C,KACApC,KA0GF,WAEE,GAAIxV,KACF+K,GAAkBL,IAAc,EAAIA,GAAa8C,KACjD9C,IAAc,EAEVK,KAAoB0C,IAAuB,CAC7C,IAAIqL,EAAUzN,GAASoC,IACnBsL,EAAa1N,GAASN,IAE1B7O,EAAS4c,EAAS,CAChB,SAAY,KACZ,aAAcnL,IAAUF,GAAwB,KAElD9R,EAAYmd,EAASpL,IAErBxR,EAAS6c,EAAY,CAAC,aAAcpL,IAAU5C,GAAkB,GAAK6C,KACrEtR,EAAYyc,EAAY,YACxBtd,EAASsd,EAAYrL,IAErBD,GAAwB1C,IA7H5BiO,GAUF,SAASC,GAAmBC,EAAYC,GAEtC,IADA,IAAIC,EAAU,GACL3qB,EAAIyqB,EAAYje,EAAI8I,KAAKqE,IAAI8Q,EAAaC,EAAY3Q,IAAgB/Z,EAAIwM,EAAGxM,IACpF2qB,EAAQxqB,KAAKmY,GAAWtY,GAAG6L,cAG7B,OAAOyJ,KAAKsE,IAAIhT,MAAM,KAAM+jB,GAQ9B,SAASjH,KACP,IAAIkH,EAAYhY,GAAa4X,GAAkB7oB,GAAO8O,IAAS+Z,GAAkBjR,GAAYhB,IACzFsS,EAAK/S,IAAgCI,GAErC2S,EAAGtf,MAAMyd,SAAW4B,IAAaC,EAAGtf,MAAMyd,OAAS4B,EAAY,MAKrE,SAAStE,KACP1N,GAAiB,CAAC,GAClB,IAAIxL,EAAO4K,GAAa,OAAS,MAC7B8S,EAAQ9S,GAAa,QAAU,SAC/B+S,EAAOzS,GAAW,GAAG9C,wBAAwBpI,GAEjD/E,EAAQiQ,IAAY,SAAS9K,EAAMxN,GAE7BA,GAAK4Y,GAAezY,KAAKqN,EAAKgI,wBAAwBpI,GAAQ2d,GAE9D/qB,IAAM+Z,GAAgB,GAAKnB,GAAezY,KAAKqN,EAAKgI,wBAAwBsV,GAASC,MAK7F,SAASxE,KACP,IAAIyE,EAAQvB,KACRpqB,EAAQ2rB,EAAM,GACdtB,EAAMsB,EAAM,GAEhB3iB,EAAQiQ,IAAY,SAAS9K,EAAMxN,GAE7BA,GAAKX,GAASW,GAAK0pB,EACjBvc,EAAQK,EAAM,iBAChBK,EAAYL,EAAM,CAAC,cAAe,aAClCR,EAASQ,EAAMuQ,KAIZ5Q,EAAQK,EAAM,iBACjBC,EAASD,EAAM,CACb,cAAe,OACf,SAAY,OAEdN,EAAYM,EAAMuQ,QA+D1B,SAASkN,GAAsBte,GAC7B,OAAOA,EAAG+K,SAASxO,cAGrB,SAAS4d,GAAUna,GACjB,MAAoC,WAA7Bse,GAAqBte,GAG9B,SAASue,GAAgBve,GACvB,MAA4C,SAArCA,EAAGhH,aAAa,iBAGzB,SAASwlB,GAAkBrE,EAAUna,EAAIiI,GACnCkS,EACFna,EAAGyO,SAAWxG,EAEdjI,EAAGiB,aAAa,gBAAiBgH,EAAI7Y,YAKzC,SAASgrB,KACP,GAAK9V,KAAY0B,KAAUD,GAA3B,CAEA,IAAI0Y,EAAe,GAAiB/Z,GAAW+J,SAAW8P,GAAe7Z,IACrEga,EAAe,GAAiB/Z,GAAW8J,SAAW8P,GAAe5Z,IACrEga,EAAe3pB,IAAS+Y,GACxB6Q,GAAgB5Y,IAAUhR,IAASiZ,GAEnC0Q,IAAgBF,GAClBD,GAAiB5M,GAAclN,IAAY,IAExCia,GAAeF,GAClBD,GAAiB5M,GAAclN,IAAY,GAEzCka,IAAgBF,GAClBF,GAAiB3M,GAAclN,IAAY,IAExCia,GAAeF,GAClBF,GAAiB3M,GAAclN,IAAY,IAK/C,SAASuR,GAAelW,EAAIC,GACtBmK,IAAsBpK,EAAGpB,MAAMwL,GAAsBnK,GAO3D,SAAS4e,GAAcnL,GAIrB,OAHW,MAAPA,IAAeA,EAAM1e,IAGlBkP,IAAcqI,IADXvI,GAAcD,GAAS,IACOkI,GAAeyH,EAAM,GAAKzH,GAAeyH,GAAO3P,KAAS,EAC/FE,IAAcsI,GAAWtI,IAAc,GACpCH,GAAQ,GAAK,EAGpB,SAASyJ,KACP,IACIvF,EAAUuE,IADJvI,GAAcD,GAAS,IAb1BE,IAAcA,GAAaF,IAAUqJ,GAAgBnB,GAAemB,KAsB3E,OANI/I,KAAW0B,KACbiC,EAAS/D,KAAgBA,GAAaF,KAAWqJ,GAAgB,GAAKyR,KACpEA,GAAazR,GAAgB,GAAKnB,GAAemB,GAAgB,IAEjEpF,EAAS,IAAKA,EAAS,GAEpBA,EAGT,SAASoO,GAA4B1C,GAGnC,IAAIzL,EACJ,GAHW,MAAPyL,IAAeA,EAAM1e,IAGrBqW,KAAenH,GACjB,GAAID,GACFgE,IAAShE,GAAaF,IAAU2P,EAC5BrP,KAAU4D,GAAO4W,UAChB,CACL,IAAIC,EAAclV,EAAYwD,GAAgBtJ,GAC1CO,KAAUqP,GAAOmL,MACrB5W,EAAc,KAANyL,EAAYoL,OAGtB7W,GAAQgE,GAAeyH,GACnBrP,IAAUH,KACZ+D,GAAO4W,MAQX,OAJIxR,KAAoBpF,EAAMU,KAAKsE,IAAIhF,EAAKqF,KAE5CrF,IAAQoD,IAAenH,IAAcD,GAAoB,KAAN,IAKrD,SAASqV,GAA4BrR,GACnCiO,GAAcrd,GAAW,MACzBsd,GAAqBlO,GAGvB,SAASkO,GAAsBlO,GAClB,MAAPA,IAAeA,EAAMmO,MACzBvd,GAAU+F,MAAM6O,IAAiBC,GAAkBzF,EAAM0F,GAG3D,SAAS6I,GAAcuI,EAAQC,EAAUC,EAASC,GAChD,IAAIrf,EAAIkf,EAASjb,GACZiC,KAAQlG,EAAI8I,KAAKqE,IAAInN,EAAGuN,KAE7B,IAAK,IAAI/Z,EAAI0rB,EAAQ1rB,EAAIwM,EAAGxM,IAAK,CAC7B,IAAIwN,EAAO8K,GAAWtY,GAGnB6rB,IAASre,EAAKjC,MAAMkK,KAAqB,KAAbzV,EAAI2B,IAAe8O,GAAQ,KAExDgC,IAAgBuE,IAClBxJ,EAAKjC,MAAMyL,GAAmBxJ,EAAKjC,MAAM2L,GAAkBzE,IAAgBzS,EAAI0rB,GAAU,IAAO,KAElGxe,EAAYM,EAAMme,GAClB3e,EAASQ,EAAMoe,GAEXC,GAASvS,GAAcnZ,KAAKqN,IA2CpC,SAAS7K,GAAQ8G,EAAGqiB,GACd3R,IAA8B+H,MAG9BvgB,KAAU8Y,IAAeqR,KAE3B/Q,GAAO9K,KAAK,eAAgBoT,MAC5BtI,GAAO9K,KAAK,kBAAmBoT,MAC3BzQ,IAAcsU,KAGd3K,IAAa9S,GAAK,CAAC,QAAS,WAAWrH,QAAQqH,EAAEnK,OAAS,GAAKkd,KAEnE1B,IAAU,EACVuH,MAWJ,SAAS0J,GAAUnf,GACjB,OAAOA,EAAI1D,cAAczM,QAAQ,KAAM,IAWzC,SAASqf,GAAiBzS,GAGxB,GAAIsO,GAAYmD,GAAS,CAGvB,GAFAC,GAAO9K,KAAK,gBAAiBoT,GAAKha,KAE7BsO,GAAY2B,GAAcxa,OAAS,EACtC,IAAK,IAAIkB,EAAI,EAAGA,EAAIsZ,GAAcxa,OAAQkB,IAAK,CAC7C,IAAIwN,EAAO8L,GAActZ,GAEzBwN,EAAKjC,MAAMkK,KAAO,GAEdyB,GAAkBF,IACpBxJ,EAAKjC,MAAM2L,GAAkB,GAC7B1J,EAAKjC,MAAMyL,GAAmB,IAEhC9J,EAAYM,EAAM+E,IAClBvF,EAASQ,EAAMgF,IAanB,IAAKnJ,IACAsO,GAAYtO,EAAMxC,OAAOsJ,aAAe3K,IACzC6D,EAAMxC,SAAWrB,IAAaumB,GAAS1iB,EAAM2iB,gBAAkBD,GAAS3R,IAAgB,CAE1F,IAAKD,GAA4B,CAC/B,IAAImO,EAAW3mB,GACfugB,KACIvgB,KAAU2mB,IACZvN,GAAO9K,KAAK,eAAgBoT,MAE5B4C,MAIW,UAAX9S,GAAsB4H,GAAO9K,KAAK,cAAeoT,MACrDvI,IAAU,EACVL,GAAc9Y,KAOpB,SAAS0a,GAAM4P,EAAaxiB,GAC1B,IAAI4R,GAGJ,GAAoB,SAAhB4Q,EACFxQ,GAAgBhS,GAAI,QAGf,GAAoB,SAAhBwiB,EACTxQ,GAAgBhS,EAAG,OAGd,CACL,GAAIqR,GAAS,CACX,GAAI1H,GAA4B,OAAiB0I,KAGnD,IAAI6I,EAAWD,KACXwH,EAAW,EAkBf,GAhBoB,UAAhBD,EACFC,GAAavH,EACY,SAAhBsH,EACTC,EAAWvU,EAAWY,GAAa9H,GAAQkU,EAAWpM,GAAa,EAAIoM,GAE5C,iBAAhBsH,IAA4BA,EAAc5K,SAAS4K,IAEzDE,MAAMF,KAEJxiB,IAAKwiB,EAAc3W,KAAKsE,IAAI,EAAGtE,KAAKqE,IAAIpB,GAAa,EAAG0T,KAE7DC,EAAWD,EAActH,KAKxBhN,GAAYuU,GAAY5W,KAAKC,IAAI2W,GAAYzb,GAAO,CACvD,IAAI2b,EAASF,EAAW,EAAI,GAAK,EACjCA,GAAavqB,GAAQuqB,EAAW3T,IAAemC,GAAWnC,GAAa6T,EAAsB,EAAb7T,GAAiB6T,GAAU,EAG7GzqB,IAASuqB,EAGLvU,GAAYjF,KACV/Q,GAAQ+Y,KAAY/Y,IAAS4W,IAC7B5W,GAAQiZ,KAAYjZ,IAAS4W,KAI/BmM,GAAY/iB,MAAW+iB,GAAYjK,KACrC9X,GAAO8G,IAOb,SAASgS,GAAiBhS,EAAG4iB,GAC3B,GAAIvR,GAAS,CACX,GAAI1H,GAA4B,OAAiB0I,KAEnD,IAAIwQ,EAEJ,IAAKD,EAAK,CAIR,IAFA,IAAIxlB,EAASkV,GADbtS,EAAIiS,GAASjS,IAGN5C,IAAWuK,IAAqB,CAACC,GAAYC,IAAYlP,QAAQyE,GAAU,GAAKA,EAASA,EAAOsJ,WAEvG,IAAIoc,EAAW,CAAClb,GAAYC,IAAYlP,QAAQyE,GAC5C0lB,GAAY,IACdD,GAAkB,EAClBD,EAAmB,IAAbE,GAAkB,EAAI,GAIhC,GAAI5Z,GAAQ,CACV,GAAIhR,KAAU+Y,KAAqB,IAAT2R,EAExB,YADAhQ,GAAK,OAAQ5S,GAER,GAAI9H,KAAUiZ,IAAoB,IAARyR,EAE/B,YADAhQ,GAAK,QAAS5S,GAKd4iB,IACF1qB,IAASoP,GAAUsb,EACfxb,KAAalP,GAAQ2T,KAAK8D,MAAMzX,KAEpCgB,GAAQ2pB,GAAoB7iB,GAAgB,YAAXA,EAAEnK,KAAuBmK,EAAI,OA6BlE,SAASuT,KACPoC,GAAgBoN,aAAY,WAC1B/Q,GAAgB,KAAMzJ,MACrBD,IAEHwK,IAAY,EAGd,SAASO,KACPkH,cAAc5E,IACd7C,IAAY,EAGd,SAASkQ,GAAsBC,EAAQhG,GACrCjZ,EAAS0E,GAAgB,CAAC,cAAeua,IACzCva,GAAekD,UAAYkK,GAAoB,GAAKmN,EAASnN,GAAoB,GAAKmH,EAGxF,SAASnD,KACPvG,KACI7K,IAAkBsa,GAAqB,OAAQxa,GAAa,IAGlE,SAASuK,KACPM,KACI3K,IAAkBsa,GAAqB,QAASxa,GAAa,IAiBnE,SAAS8R,KACHxH,IACFC,KACA6C,IAAqB,IAErBkE,KACAlE,IAAqB,GAuDzB,SAAS1C,GAAUhQ,GACjBA,EAAGggB,QAyBL,SAASjR,GAAUjS,GAEjB,OAAOmjB,GADPnjB,EAAIA,GAAKE,EAAIN,OACYI,EAAEojB,eAAe,GAAKpjB,EAEjD,SAASsS,GAAWtS,GAClB,OAAOA,EAAE5C,QAAU8C,EAAIN,MAAMyjB,WAG/B,SAASF,GAAcnjB,GACrB,OAAOA,EAAEnK,KAAK8C,QAAQ,UAAY,EAGpC,SAAS2qB,GAAwBtjB,GAC/BA,EAAEujB,eAAiBvjB,EAAEujB,iBAAmBvjB,EAAEwjB,aAAc,EAG1D,SAASC,KACP,OSx+EsBlN,ETw+EYL,GAAaK,EAAIN,GAAaM,ESx+EvCD,ETw+E0CJ,GAAaI,EAAIL,GAAaK,EUx+EnEoN,EDCzB7X,KAAK8X,MAAMpN,EAAGD,IAAM,IAAMzK,KAAK+X,ICDCrC,EVw+EgE9X,GUv+EnGoa,GAAY,GACZpI,EAAM5P,KAAKC,IAAI,GAAKD,KAAKC,IAAI4X,MAEtB,GAAKnC,EACdsC,EAAY,aACHpI,GAAO8F,IAChBsC,EAAY,YAGPA,IV89EgHhd,EAAQE,KUx+E1H,IAA2B2c,EAAOnC,EACnCsC,EACApI,EDFoBlF,EAAGD,ET2+E3B,SAASzC,GAAY7T,GACnB,GAAIqR,GAAS,CACX,GAAI1H,GAA4B,OAAiB0I,KAG/CjK,IAAY0K,IAAaO,KAE7B8C,IAAW,EACPH,KACFtV,EAAIsV,IACJA,GAAW,MAGb,IAAI8N,EAAI7R,GAASjS,GACjBsR,GAAO9K,KAAK2c,GAAanjB,GAAK,aAAe,YAAa4Z,GAAK5Z,KAE1DmjB,GAAanjB,IAAM,CAAC,MAAO,KAAKrH,QAAQ6oB,GAAqBlP,GAAUtS,MAAQ,GAClFsjB,GAAuBtjB,GAGzBkW,GAAaI,EAAIL,GAAaK,EAAIwN,EAAEC,QACpC7N,GAAaK,EAAIN,GAAaM,EAAIuN,EAAEE,QAChC9V,IACF6H,GAAgBqK,WAAWrkB,GAAU+F,MAAM6O,IAAe3d,QAAQ4d,GAAiB,KACnFwI,GAAcrd,GAAW,OAI7B,SAAS+X,GAAW9T,GAClB,GAAImW,GAAU,CACZ,IAAI2N,EAAI7R,GAASjS,GACjBkW,GAAaI,EAAIwN,EAAEC,QACnB7N,GAAaK,EAAIuN,EAAEE,QAEf9V,EACG8H,KAAYA,GAAW7V,GAAI,WAAY8jB,GAAUjkB,QAExB,MAA1BoR,KAAiCA,GAAwBqS,MACzDrS,KAAyByD,IAAgB,KAGlB,kBAAjB7U,EAAEkkB,YAA4BlkB,EAAEkkB,aAAerP,IACzD7U,EAAEujB,kBAKR,SAASU,GAAWjkB,GAClB,GAAKoR,IAQL,GAJA1Q,EAAIsV,IACAG,KAAYH,GAAW7V,GAAI,WAAY8jB,GAAUjkB,OAEvB,MAA1BoR,KAAiCA,GAAwBqS,MACzDrS,GAAuB,EACpByD,IAAiBsO,GAAanjB,KAAM6U,IAAgB,GAEzD,IACM7U,EAAEnK,MAAQyb,GAAO9K,KAAK2c,GAAanjB,GAAK,YAAc,WAAY4Z,GAAK5Z,IAC3E,MAAMmkB,IAER,IAAI7N,EAAIP,GACJqO,EAAOhO,GAAQF,GAAcD,IACjC,IAAK1H,IAAcpH,IAAcC,GAC/BkP,GAAK8N,EACL9N,GAAK,UAGLA,GADkBxJ,EAAYsX,EAAOpd,GAAQ,MAAQyI,GAAWxI,IAAUqJ,IAAuB,IAAP8T,GAAc3U,GAAWxI,IAEnHqP,GAAK,IAGPva,GAAU+F,MAAM6O,IAAiBC,GAAkB0F,EAAIzF,SAzBvDsF,IAAW,EA6Bf,SAASpC,GAAU/T,GACjB,GAAImW,GAAU,CACRH,KACFtV,EAAIsV,IACJA,GAAW,MAET9H,GAAYkL,GAAcrd,GAAW,IACzCoa,IAAW,EAEX,IAAI2N,EAAI7R,GAASjS,GACjBkW,GAAaI,EAAIwN,EAAEC,QACnB7N,GAAaK,EAAIuN,EAAEE,QACnB,IAAII,EAAOhO,GAAQF,GAAcD,IAEjC,GAAIpK,KAAKC,IAAIsY,GAAO,CAElB,IAAKjB,GAAanjB,GAAI,CAEpB,IAAI5C,EAASkV,GAAUtS,GACvB6F,EAAUzI,EAAQ,CAAC,MAAS,SAASinB,EAAcrkB,GACjDsjB,GAAuBtjB,GACvBgG,EAAa5I,EAAQ,CAAC,MAASinB,OAI/BnW,EACF8H,GAAW7V,GAAI,WACb,GAAIoO,KAAenH,GAAW,CAC5B,IAAIkd,GAAeF,EAAOpd,IAASyI,GAAWxI,IAC9Cqd,EAAaF,EAAO,EAAIvY,KAAK8D,MAAM2U,GAAczY,KAAKoE,KAAKqU,GAC3DpsB,IAASosB,MACJ,CACL,IAAIC,IAAWxO,GAAgBqO,GAC/B,GAAIG,GAAS,EACXrsB,GAAQ+Y,QACH,GAAIsT,GAASpV,GAAemB,GAAgB,GACjDpY,GAAQiZ,QAGR,IADA,IAAI5a,EAAI,EACDA,EAAI+Z,IAAiBiU,GAASpV,GAAe5Y,IAClD2B,GAAQ3B,EACJguB,EAAQpV,GAAe5Y,IAAM6tB,EAAO,IAAKlsB,IAAS,GACtD3B,IAKN2C,GAAO8G,EAAGokB,GACV9S,GAAO9K,KAAK2c,GAAanjB,GAAK,WAAa,UAAW4Z,GAAK5Z,OAGzDoR,IACFY,GAAgBhS,EAAGokB,EAAO,GAAK,EAAI,IAON,SAAjCvd,EAAQ+C,uBAAmCiL,IAAgB,GAC3DpL,KAAc2H,GAAwB,KACtChJ,KAAa0K,IAAaS,KAKhC,SAASiG,MACEnL,IAAgCI,IACtC3M,MAAMyd,OAASpQ,GAAejX,GAAQ8O,IAASmI,GAAejX,IAAS,KAG5E,SAASkd,KACP,IAAIoP,EAAQrd,IAAcA,GAAaF,IAAU6H,GAAaW,GAAWX,GAAa9H,GACtF,OAAO6E,KAAKqE,IAAIrE,KAAKoE,KAAKuU,GAAQ1V,IAQpC,SAASsO,KACP,GAAKtV,KAAOG,IAER0K,KAAU0C,GAAa,CACzB,IAAInF,EAAMmF,GACNlF,EAAMwC,GACNrM,EAAK1B,EAQT,IANIyQ,GAAc1C,KAChBzC,EAAMyC,GACNxC,EAAMkF,GACN/O,EAAK7B,GAGAyL,EAAMC,GACX7J,EAAG6M,GAASjD,IACZA,IAIFmF,GAAc1C,IAIlB,SAASiH,GAAM5Z,GACb,MAAO,CACLjE,UAAWA,GACX8S,WAAYA,GACZ7G,aAAcA,GACdmL,SAAUA,GACVxL,kBAAmBA,GACnBsM,YAAaA,GACbrM,WAAYA,GACZC,WAAYA,GACZb,MAAOA,GACPM,QAASA,GACTwI,WAAYA,GACZhB,WAAYA,GACZwB,cAAeA,GACfpY,MAAOA,GACP8Y,YAAaA,GACbyT,aAAcvT,KACd2B,gBAAiBA,GACjB0C,sBAAuBA,GACvB5C,MAAOA,GACP0C,YAAaA,GACb/S,MAAOA,GACP2M,KAAMA,GACNrP,MAAOI,GAAK,IA//EV4N,GAAsBC,QAAQC,KAAK,qBAAsBjH,EAAQ9K,YWjIlE,SAAS2oB,EAAiBtI,EAAKuI,GACpC,GAAa,OAATA,EACF,OAAOvI,EAGT,GAAa,WAATuI,EACF,OAAOC,EAAexI,GAGxB,MAAMnkB,EAAQmkB,EAAInkB,MAAM,wDAExB,GAAIA,EAAO,CACT,MAAMmN,EAASgX,EAAI3mB,MAAMwC,EAAM,IACzB4sB,EAAS5sB,EAAM,GAErB,OAAO2sB,EAAe,GAAGxf,EAAO,MAAMuf,IAAOE,KAE7C,OAAO,KAIJ,SAASD,EAAeE,GAC7B,OAAOA,EAAK9xB,QAAQ,YAAa,I,+1CC9EnC,IAAI+xB,GAAK,CACPC,gBAAiB,GACjBC,SAoDS,CACLC,YAlDF,SAAqBC,EAAOC,GACL,iBAAVD,IACTA,EAAQA,EAAMnyB,QAAQ,IAAK,KAE7B,IAAI8C,EAAQ,GACRuvB,EAAmB,sBACnBC,EAAeF,GARH,cAUhB,SAASG,EAAqBtD,EAAQuD,EAAWC,EAAWC,GAI1D,GAHAD,EAAYA,GAAa,IACzBC,EAAUA,GAAW,IAEjBhD,MAAMT,IAAsB,OAAXA,EACnB,OAAO,EAKT,IAAI0D,GAFJ1D,GAAUA,EAAS,KAAO2D,QAAQJ,IAEf/vB,MAAM,KAIzB,OAHoBkwB,EAAM,GAAG3yB,QAAQ,2BAA4B,KAAOyyB,IACtDE,EAAM,GAAKD,EAAUC,EAAM,GAAK,IAKpD,OAAQL,EAAartB,MAAMotB,GAAkB,IAC3C,IAAK,SACHvvB,EAAQyvB,EAAqBJ,EAAO,GACpC,MACF,IAAK,qBACHrvB,EAAQyvB,EAAqBJ,EAAO,GACpC,MACF,IAAK,8BACHrvB,EAAQyvB,EAAqBJ,EAAO,EAAG,IAAK,KAC5C,MACF,IAAK,0CACHrvB,EAAQyvB,EAAqBJ,EAAO,EAAG,IAAK,KAC5C,MACF,IAAK,0CACHrvB,EAAQyvB,EAAqBJ,EAAO,EAAG,KACvC,MACF,IAAK,mCACHrvB,EAAQyvB,EAAqBJ,EAAO,EAAG,KAI3C,OAAOG,EAAatyB,QAAQqyB,EAAkBvvB,KAOlD+vB,KAAM,GACNC,SAAU,SAACC,EAAMC,GACf,IAAIC,EACJ,OAAO,WAAmB,2BAANC,EAAM,yBAANA,EAAM,gBACxB,IAAMC,EAAQ,WACZtlB,aAAaolB,GACbF,EAAI,WAAJ,EAAQG,IAEVrlB,aAAaolB,GACbA,EAAUxlB,WAAW0lB,EAAOH,KAGhCI,QAAS,SAAUrqB,GACjB,IAAIsqB,EAAetqB,EAAUuqB,uBAAuB,UAAU,GAC1D3e,EAAoB5L,EAAUuqB,uBAAuB,mBAAmB,GACxEC,EAAWF,EAAanqB,aAAa,eAErC9C,IAAYmtB,GAAYvlB,KAAKnI,MAAM4F,SAAS+nB,eAAeD,GAAU3a,YAAe,GAKxF,GAHMxS,EAAOoO,WACXpO,EAAOuO,kBAAoBA,GAEJ,KAArBvO,EAAOqtB,gBAAgD,IAArBrtB,EAAOqtB,UAA2B,WACnDJ,EAAapa,UADsC,IACtE,2BAA0C,SACnC3I,UAAYlK,EAAOqtB,WAF4C,+BAYxE,OAPAr0B,OAAOkK,OAAOlD,EAAQ,CACpB2C,UAAWsqB,EACXvc,OAAQ,WACNuc,EAAajjB,UAAUjB,OAAO,MAAO,aAIlCyE,EAAIxN,IAEbstB,mBAAoB,WAClB,IAD8B,MACZjoB,SAAS6nB,uBAAuB,oBADpB,IAG9B,2BAA+B,KAApBK,EAAoB,QACzBvqB,EAAKuqB,EAAIzqB,aAAa,eACtB0qB,EAAoBnoB,SAAS+nB,eAAepqB,GAChD2oB,GAAG8B,eAAeF,EAAKC,IANK,gCAShCC,eAAgB,SAAUC,EAAYF,GACpC,IAAIG,GAAQ,EACVC,GAAa,EAEfF,EAAWnnB,iBAAiB,SAAS,WAAY,WAC/C,GAAIonB,GAASC,EAIX,GAHAD,GAAQ,EACRC,GAAa,EAETJ,EAAkBxjB,UAAUC,SAAS,WAAY,CACnD,IAAIkc,EAASqH,EAAkBxkB,aAC/BwkB,EAAkB9kB,MAAMyd,OAAxB,UAAoCA,EAApC,MACAwF,GAAGe,UAAS,WACVc,EAAkB9kB,MAAMyd,OAAS,QAChC,EAFHwF,GAGAA,GAAGe,UAAS,WACVc,EAAkB9kB,MAAMyd,OAAS,GACjCqH,EAAkBxjB,UAAUjB,OAAO,WACnC,EAAKiB,UAAUjB,OAAO,WACtB6kB,GAAa,IACZ,IALHjC,OAMK,CACL6B,EAAkBxjB,UAAUI,IAAI,WAChCojB,EAAkB9kB,MAAMyd,OAAS,MACjC,IAAIA,EAAS,EAAIqH,EAAkB3a,UAAUgb,QAC3C,SAACC,EAAMC,GAAP,OAAwBD,EAAOC,EAAa/kB,eAC5C,GAEFwkB,EAAkB9kB,MAAMyd,OAAxB,UAAoCA,EAApC,MACAwF,GAAGe,UAAS,WACVc,EAAkB9kB,MAAMyd,OAAS,GACjC,EAAKnc,UAAUI,IAAI,WACnBwjB,GAAa,IACZ,IAJHjC,QASRqC,cAAe,WACb,IAAIC,EAAW5oB,SAAS+nB,eAAe,eAErCa,GACAA,EAAS1nB,iBAAiB,SAAS,SAAUK,GAC3CpC,OAAO0pB,OAAO,CACZC,IAAK,EACLvb,KAAM,EACNwb,SAAU,cAGhB5pB,OAAO+B,iBAAiB,UAAU,WAC5B/B,OAAO6pB,YAAc7pB,OAAO8pB,YAC9BL,EAASjkB,UAAUI,IAAI,QAEvB6jB,EAASjkB,UAAUjB,OAAO,YAIhCwlB,cAAe,SAAUC,GAGvB,IAAIC,EAAeD,EAAKtB,uBAAuB,mBAAmB,GAClEsB,EAAKjoB,iBAAiB,UAAU,SAAUK,GACxCA,EAAEujB,iBACFsE,EAAazkB,UAAUI,IAAI,WAC3BskB,MAAM,eAAgB,CACpBC,OAAQ,OACRC,QAAS,IAAIC,QACb1mB,KAAM,IAAI2mB,SAASN,KAElBO,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GACLR,MAAM,YACHK,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACtC,GACLd,GAAGc,KAAOA,EACVd,GAAGwD,cAAc,aAAc1C,GAC/BgC,EAAazkB,UAAUjB,OAAO,WAC9B4iB,GAAGwD,cAAc,aAAcD,SAbvC,OAgBS,SAACnE,GAAD,OAAStW,QAAQ2a,IAAIrE,EAAIsE,gBAKtCC,gBAAiB,SAAUC,GACzB,IAAIf,EAAOe,EAAY5oB,cAAc,QACrCglB,GAAG4C,cAAcC,IAEnBgB,QAAS,WACPd,MAAM,WAAY,CAChBC,OAAQ,MACRC,QAAS,IAAIC,UAEZE,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACC,GACkB,IAAnBA,EAAIS,aACN9D,GAAGc,KAAOuC,OAIlBU,eAAgB,SAAUhxB,EAAK+K,GAC7BilB,MAAM,kBAAmB,CAAEC,OAAQ,OAAQxmB,KAAM,IAAIwnB,gBAAgB,CAAE3sB,GAAItE,EAAKkxB,SAAU,MACvFb,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACtC,GAAD,OAAWd,GAAGwD,cAAc,aAAc1C,GAAOhjB,QAE3DomB,eAAgB,SAAU5iB,EAAWtK,QACV,IAAdA,GACT5E,KAAK6tB,gBAAgB3e,GAAalP,KAAK6tB,gBAAgB3e,IAAc,GACrElP,KAAK6tB,gBAAgB3e,GAArB,YAAsClP,KAAK6tB,gBAAgB3e,IAA3D,CAAuEtK,KAEvE8R,QAAQqb,MAAM,mCAGlBX,cAAe,SAAUliB,EAAWI,IACjBse,GAAGC,gBAAgB3e,IAAc,IACvCzH,SAAQ,SAAC7C,GAChBA,GAAaA,EAAUwsB,cAAc,IAAIY,YAAY9iB,EAAW,CAAExG,OAAQ4G,SAGhF2iB,UAAW,SAAUxB,GAKnB,IAHA,IAAIyB,EAAa,GAGR9yB,EAAI,EAAGA,EAAIqxB,EAAK0B,SAASj0B,OAAQkB,IAAK,CAC7C,IAAIgzB,EAAQ3B,EAAK0B,SAAS/yB,GAG1B,GACGgzB,EAAMjxB,OACPixB,EAAM5X,UACS,SAAf4X,EAAM1zB,MACS,UAAf0zB,EAAM1zB,MACS,WAAf0zB,EAAM1zB,MACS,WAAf0zB,EAAM1zB,KAKR,GAAmB,oBAAf0zB,EAAM1zB,KACR,IAAK,IAAIsF,EAAI,EAAGA,EAAIouB,EAAM1iB,QAAQxR,OAAQ8F,IACnCouB,EAAM1iB,QAAQ1L,GAAGquB,UACtBH,EAAW3yB,KAAK+yB,mBAAmBF,EAAMjxB,MAAQ,IAAMmxB,mBAAmBF,EAAM1iB,QAAQ1L,GAAGrF,aAKtE,aAAfyzB,EAAM1zB,MAAsC,UAAf0zB,EAAM1zB,MAAqB0zB,EAAMG,UACtEL,EAAW3yB,KAAK+yB,mBAAmBF,EAAMjxB,MAAQ,IAAMmxB,mBAAmBF,EAAMzzB,QAIpF,OAAOuzB,EAAWtwB,KAAK,MAEzB4wB,cAAe,WACb,IAAIC,EAAsBnrB,SAAS6nB,uBAAuB,gBAC1DvD,aAAY,WAAY,UACE6G,GADF,yBACXC,EADW,QAEhBC,EAAUD,EAAUvD,uBAAuB,qBAAqB,GAChEyD,EAAWF,EAAUvD,uBAAuB,sBAAsB,GAClE0D,EAAaH,EAAUvD,uBAAuB,wBAAwB,GACtE2D,EAAaJ,EAAUvD,uBAAuB,wBAAwB,GACtE4D,EAAO,IAAItf,KAAKif,EAAU3tB,aAAa,cAAciuB,WAAY,IAAIvf,MAAOuf,UAC5EC,EAAQ,IAAIC,UAAUC,MAE1BF,EAAMx0B,MAAM,CAAEi0B,WAAW,EAAMU,YAAa,CAAEC,QAASN,EAAO,OAE9DE,EAAMzqB,iBAAiB,kBAAkB,SAAUK,GACjD,IAAIyqB,EAAOL,EAAMM,gBAAgBD,KAC7BE,EAAQP,EAAMM,gBAAgBC,MAC9BC,EAAUR,EAAMM,gBAAgBE,QAChCJ,EAAUJ,EAAMM,gBAAgBF,QAEpCV,EAAQle,UAAY6e,EAAO,EAAIA,EAAX,WAAsBA,GAC1CV,EAASne,UAAY+e,EAAQ,EAAIA,EAAZ,WAAwBA,GAC7CX,EAAWpe,UAAYgf,EAAU,EAAIA,EAAd,WAA4BA,GACnDX,EAAWre,UAAY4e,EAAU,EAAIA,EAAd,WAA4BA,MAErDX,EAAUzmB,UAAUjB,OAAO,gBAC3B0nB,EAAUzmB,UAAUI,IAAI,wBAtB1B,2BAA6C,IADvB,iCAyBrB,MAELqnB,SAAU,WACR,IADoB,MACFpsB,SAAS6nB,uBAAuB,mBAD9B,IAGpB,2BAAmC,SACzB3mB,iBAAiB,SAAS,SAAUK,GAC1C,IAAI7I,KAAKiM,UAAUC,SAAS,UAA5B,CAGA,IAJ6C,MAIhClM,KAAK2zB,QAAQ,uBACC7e,UALkB,IAK7C,2BAAqC,SAC7B7I,UAAUjB,OAAO,WANoB,8BAS7C,IAT6C,EASzC4oB,EAAW5zB,KAAK+E,aAAa,eAC7B8uB,EAAavsB,SAAS+nB,eAAeuE,GAVI,IAYrBC,EAAWF,QAAQ,uBAEL7e,UAdO,IAc7C,2BAAgD,SACxC7I,UAAUjB,OAAO,WAfoB,8BAkB7C6oB,EAAW5nB,UAAUI,IAAI,UACzBrM,KAAK8zB,cAAc7nB,UAAUI,IAAI,eAvBjB,gCA2BtB0nB,UAAW,WAET,IAFqB,MAENzsB,SAAS6nB,uBAAuB,mBAF1B,yBAGV6E,EAHU,QAIfC,EAAQD,EAAOL,QAAQ,UAC3BK,EAAOxrB,iBAAiB,SAAS,WAC/ByrB,EAAMhoB,UAAUjB,OAAO,eAH3B,2BAA+B,IAHV,8BAWrB,IAAIkpB,EAAa5sB,SAAS+nB,eAAe,qBAoCzC,SAAS8E,EAAUxzB,EAAKhC,EAAOy1B,GAC7B,IAAIC,EAAU,IAAI5gB,KAClB4gB,EAAQC,QAAQD,EAAQrB,UAAqB,GAAToB,EAAc,GAAK,GAAK,KAC5D9sB,SAASitB,OAAS5zB,EAAM,IAAMhC,EAAQ,YAAc01B,EAAQG,cAG9D,SAASC,EAAU9zB,GACjB,IAAI+zB,EAAWptB,SAASitB,OAAOzzB,MAAM,UAAYH,EAAM,iBACvD,OAAO+zB,EAAWA,EAAS,GAAK,KA3ClC9G,GAAGkE,eAAe,aAAcoC,GAEhCA,EAAW1rB,iBAAiB,cAAc,SAAU,GAAY,IAAVE,EAAU,EAAVA,OAChDisB,EAAQ30B,KAAK4I,cAAc,aAC3BgsB,EAAM50B,KAAK4I,cAAc,WACzBzH,EAAOnB,KAAK4I,cAAc,YAC1BisB,EAAa70B,KAAK4I,cAAc,wBAChCksB,EAAa90B,KAAK4I,cAAc,mBAChCmsB,EAAiB/0B,KAAK4I,cAAc,wBACxC+rB,EAAMhqB,MAAMqqB,QAAU,EACtBL,EAAM1P,IAAMsI,EAAiB7kB,EAAOusB,eAAeC,IAAK,QACxDP,EAAMQ,IAAMzsB,EAAO0sB,MACnBT,EAAMU,OAAS,WACbr1B,KAAK2K,MAAMqqB,QAAU,GAEvBJ,EAAIngB,UAAY/L,EAAOmpB,SACvB1wB,EAAKsT,UACH/L,EAAO4sB,cAAP,+BACwB5sB,EAAO6sB,oBAC5BltB,KAAI,SAAUuE,GACb,OAAOA,EAAKjO,SAEbiD,KAAK,KALR,WAMFkzB,EAAWrgB,UACTmZ,GAAGc,KAAKgD,WAAa,EACjB/qB,MAAM/K,OAAO45B,YAAY35B,QAAQ,YAAa+xB,GAAGc,KAAKgD,YACtD/qB,MAAM/K,OAAOk5B,WAAWj5B,QAAQ,YAAa+xB,GAAGc,KAAKgD,YAE3DmD,EAAWpgB,UAAYmZ,GAAGE,SAASC,YAAYrlB,EAAO+sB,iBAAkB9uB,MAAMmnB,SAAS4H,aACvFX,EAAetgB,UAAYmZ,GAAGE,SAASC,YAAYH,GAAGc,KAAKiH,YAAahvB,MAAMmnB,SAASC,aACvF/tB,KAAKiM,UAAUI,IAAI,cAqBrB,IAAIupB,EAAatuB,SAAS+nB,eAAe,oBACvCuG,IACCnB,EAAU,aACX7G,GAAGe,UAAS,WACViH,EAAW3pB,UAAUI,IAAI,WACzB8nB,EAAU,YAAY,EAAM,KAC3B,IAHHvG,GAKE6G,EAAU,qBACZmB,EAAW5qB,UAGf6qB,iBAAkB,WAChB,IAAIC,EAAejsB,KAAKnI,MAAMgS,aAAaC,QAAQ,kBAAoB,IAEtEmiB,EAAaC,SAASpvB,MAAMqvB,gBAAkBF,EAAaG,QAAQtvB,MAAMqvB,eAC1EF,EAAa53B,OAAS,GAEtBwV,aAAazJ,QAAQ,eAAgBJ,KAAKqsB,UAAUJ,KAEtDK,kBAAmB,WACjB,IAAIC,EAAY,EAAI9uB,SAAS6nB,uBAAuB,mBAChDkH,EAAa,EAAI/uB,SAAS6nB,uBAAuB,oBAErDiH,EAAU3uB,SAAQ,SAAUusB,GAC1B,IAAIJ,EAAWI,EAAOjvB,aAAa,eAC/BkB,EAASqB,SAAS+nB,eAAeuE,GACrCI,EAAOxrB,iBAAiB,SAAS,WAC/BvC,EAAOgG,UAAUI,IAAI,iBAIzBgqB,EAAW5uB,SAAQ,SAAUusB,GAC3B,IAAIJ,EAAWI,EAAOjvB,aAAa,eAC/BkB,EAASqB,SAAS+nB,eAAeuE,GACrCI,EAAOxrB,iBAAiB,SAAS,WAC/BvC,EAAOgG,UAAUjB,OAAO,mBAMhCvE,OAAOmnB,GAAK3yB,OAAOkK,OAAOsB,OAAOmnB,GAAK,GAAIA,IAE1C,Y,w2CCraO,IAAI0I,GAAS,CAClBjxB,OAAQ,WACN,IAAIT,EAAY5E,KAAK4E,UACrB5E,KAAKu2B,KAAO,CACVC,oBAAqB,GAAI5xB,EAAUuqB,uBAAuB,0BAC1DsH,eAAgBnvB,SAAS+nB,eAAe,oBACxCqH,eAAgB9xB,EAAUuqB,uBAAuB,uBAAuB,GACxEwH,aAAc/xB,EAAUuqB,uBAAuB,kBAC/CyH,eAAgB,GAAIhyB,EAAUuqB,uBAAuB,qBACrD0H,qBAAsBvvB,SAAS+nB,eAAe,wBAC9CyH,uBAAwBxvB,SAAS+nB,eAAe,0BAChD0H,WAAYzvB,SAAS+nB,eAAe,eACpC2H,eAAgBpyB,EAAUuqB,uBAAuB,kBACjD8H,aAAcryB,EAAUuqB,uBAAuB,oBAAoB,GACnE+H,WAAY5vB,SAAS+nB,eAAe,gBAGtCrvB,KAAKm3B,qBACHn3B,KAAKu2B,KAAKQ,YAAc/2B,KAAKo3B,qBAC7Bp3B,KAAKu2B,KAAKU,cAAgBj3B,KAAKq3B,uBACjCr3B,KAAKs3B,mBACLt3B,KAAKu3B,qBACL3J,kBAAkB,aAAchpB,GAEhCA,EAAU4D,iBAAiB,aAAcxI,KAAKw3B,iBAAiBC,KAAKz3B,QAEtEm3B,mBAAoB,WAAY,aACxBX,EAAwBx2B,KAAKu2B,KAA7BC,oBACFkB,GAAa,EAFa,KAGTlB,GAHS,yBAGnBxC,EAHmB,QAI5BA,EAAOxrB,iBAAiB,SAAS,WAClB,EAAK+tB,KAAKvC,EAAOjvB,aAAa,gBACpCkH,UAAUI,IAAI,WACjBqrB,IACF,EAAK9yB,UAAUwsB,cAAc,IAAIY,YAAY,mBAC7C0F,GAAa,OANnB,2BAA0C,IAHZ,gCAchCF,iBAAkB,YAA4B,IAAR9I,EAAQ,EAAhBhmB,OAAgB,EACH1I,KAAKu2B,KAAxCE,EADsC,EACtCA,eAAgBC,EADsB,EACtBA,eAEtBD,EAAehiB,UAAYia,EAAKgD,WAChCgF,EAAejiB,UAAYmZ,wBAAwBc,EAAKiH,YAAahvB,MAAMmnB,SAASC,cAEtFuJ,iBAAkB,WAAY,WACtBX,EAAiB32B,KAAKu2B,KAAtBI,aASN32B,KAAK4E,UAAU4D,iBAAiB,gBARf,SAAXmvB,IAAiB,IACfhB,EAAiB,EAAKJ,KAAtBI,aACN,EAAK/xB,UAAUkK,oBAAoB,eAAgB6oB,GAF9B,WAGFhB,GAHE,IAGrB,2BAAiC,SAC1B/tB,cAAc,cAAcqD,UAAUI,IAAI,aAJ5B,kCAFK,WAYTsqB,GAZS,IAY5B,2BAAiC,SAC1BnuB,iBAAiB,aAAa,WACjC,EAAK5D,UAAUwsB,cAAc,IAAIY,YAAY,qBAdrB,gCAkB9BuF,mBAAoB,WAAY,WACxBX,EAAmB52B,KAAKu2B,KAAxBK,eA4BN52B,KAAK4E,UAAU4D,iBAAiB,kBA3Bf,SAAXmvB,IAAiB,WACFf,GADE,IACrB,2BAAmC,KAC7BgB,EAD6B,QACJhvB,cAAc,cAE3CgvB,EAAkB3rB,UAAUI,IAAI,YAChCurB,EAAkBpvB,iBAAiB,gBAAgB,WACjD,IAD6D,EACzDqvB,EAAa,GAAI73B,KAAKmvB,uBAAuB,mBADY,KAExC,GAAInvB,KAAKmvB,uBAAuB,0BAFQ,IAI7D,2BAAqC,SAC5B3mB,iBAAiB,SAAS,WAC/B,IAAIorB,EAAW5zB,KAAK+E,aAAa,eACjCuC,SAAS+nB,eAAeuE,GAAU3nB,UAAUjB,OAAO,eAPM,yCAWxC6sB,GAXwC,IAW7D,2BAAiC,SACxBrvB,iBAAiB,SAAS,WAC/B,IAAIorB,EAAW5zB,KAAK+E,aAAa,eACjCuC,SAAS+nB,eAAeuE,GAAU3nB,UAAU6rB,OAAO,eAdM,kCAkB/D,EAAKlzB,UAAUkK,oBAAoB,iBAAkB6oB,IAvBlC,mCA6BzBP,mBAAoB,WAAY,QACOp3B,KAAKu2B,KAApCS,EADwB,EACxBA,eAAgBD,EADQ,EACRA,WAClBgB,EAAiBhB,EAAWnuB,cAAc,qBAFhB,KAITouB,GAJS,IAI9B,2BAAqC,SAC5BxuB,iBAAiB,SAAS,WAC/BuuB,EAAW9qB,UAAUI,IAAI,WACzB/E,SAAS8C,KAAK6B,UAAUI,IAAI,mBACvB0rB,EAAe9rB,UAAUC,SAAS,eACrC6rB,EAAe9rB,UAAUI,IAAI,gBATL,8BAc9B0rB,EAAevvB,iBAAiB,gBAAgB,WAC9C,IAAIwvB,EAAWjB,EAAW5H,uBAAuB,mBAC7C8I,EAAYj4B,KAAKmvB,uBAAuB,gBAE5CmH,GAAO4B,aAAaD,GAJsC,WAMrCD,GANqC,IAM1D,2BAA+B,SACtBxvB,iBAAiB,SAAS,WAC/BuuB,EAAW9qB,UAAUjB,OAAO,WAC5B4iB,aAAY,WACVtmB,SAAS8C,KAAK6B,UAAUjB,OAAO,qBAC9B,IAFH4iB,OATsD,mCAgB9DsK,aAAc,SAAUD,GAAW,WACdA,GADc,yBACtBrrB,EADsB,QAE3BurB,EAAYvrB,EAAKhE,cAAc,kBAE/BjI,EAAMw3B,EAAUpzB,aAAa,YACjCozB,EAAU3vB,iBAAiB,SAAS,WAClC2vB,EAAUlsB,UAAUI,IAAI,WACxBuhB,kBAAkBjtB,GAAK,WACrBiM,EAAK5B,gBAPX,2BAA8B,IADG,gCAanCqsB,qBAAsB,WAAY,MACGr3B,KAAKu2B,KAAlCU,EAD0B,EAC1BA,aAAcC,EADY,EACZA,WAChBkB,EAAgBnB,EAAa9H,uBAAuB,sBAAsB,IAE1EiJ,EAAc3rB,aAAa,oBAAuB2rB,IAGtDlB,EAAW1uB,iBAAiB,aAO5B,SAAS6vB,IACPD,EAAcnsB,UAAUI,IAAI,YAC5B6qB,EAAWpoB,oBAAoB,YAAaupB,MAR5CD,EAAc5vB,iBAAiB,gBAAgB,WAC7C,IAAIyvB,EAAYj4B,KAAKmvB,uBAAuB,gBAE5CmH,GAAO4B,aAAaD,SCrJrB,I,+ICAA,I,GAgGW,G,GAAA,yBAAE,gHACVK,EAA0Bt4B,KAAKu2B,KAA/B+B,sBACFC,EAAuBjxB,SAAS+nB,eAAe,8BAC9CiJ,EAHW,wDAMZE,EAAe7xB,MAAM8xB,mBACrB3C,EAAejsB,KAAKnI,MAAMgS,aAAaC,QAAQ,kBAAoB,IAE1DzV,OAASs6B,EAElBE,EAAsB5C,EAAaztB,KACrC,SAACuE,GAAD,QAAYA,GAAQ+jB,MAAM,aAAD,OAAc/jB,EAAK+rB,OAAnB,QAAgC3H,MAAK,SAACC,GAAD,OAASA,EAAIC,aAE7Exa,QAAQ2a,IAAIkH,GAdI,UAeaK,QAAQC,IAAIH,GAfzB,QAeZI,EAfY,OAgBSC,YACvBR,EACAO,EAAiBpxB,QAAO,SAACkF,GAAD,QAAYA,MAlBtB,gDAAF,G,yhDChGX,IAAIosB,GAAyB,CAClC3zB,OAAQ,WACN,IAAIT,EAAY5E,KAAK4E,UACrB5E,KAAKu2B,KAAO,CACV0C,UAAW3xB,SAAS+nB,eAAe,sBACnC6J,gBAAiB5xB,SAAS+nB,eAAe,4BACzC8J,aAAc7xB,SAAS+nB,eAAe,iBACtC+J,WAAYx0B,EAAUuqB,uBAAuB,eAAe,GAC5DkK,YAAaz0B,EAAUuqB,uBAAuB,gBAAgB,GAC9DmK,QAAShyB,SAAS+nB,eAAe,gBACjCkK,UAAWjyB,SAAS+nB,eAAe,sBACnCmK,YAAa50B,EAAUuqB,uBAAuB,kBAC9CsK,YAAa70B,EAAUuqB,uBAAuB,mBAGhDnvB,KAAK05B,iBACL15B,KAAK25B,eACL35B,KAAK45B,WAEPF,eAAgB,WAAY,IAKpBG,EACA53B,EANoB,EACWjC,KAAKu2B,KAApC0C,EADoB,EACpBA,UAAWC,EADS,EACTA,gBAIXW,EAAWZ,EAAUa,QAAQ73B,OAC7BA,EAAS4H,KAAKnI,MAAM4F,SAAS+nB,eAAewK,GAAUplB,WAExChF,EAAIxN,GAGxB,WACE,IAAI43B,EAAWX,EAAgBY,QAAQ73B,OACnCA,EAAS4H,KAAKnI,MAAM4F,SAAS+nB,eAAewK,GAAUplB,WAClChF,EAAIxN,GAH9B,IAMF03B,aAAc,WAAY,MACqB35B,KAAKu2B,KAA5C6C,EADkB,EAClBA,WAAYC,EADM,EACNA,YAAaE,EADP,EACOA,UAE1BA,IAGLH,EAAW5wB,iBAAiB,SAAS,WACnC+wB,EAAU56B,OAAS46B,EAAU56B,MAAQ,KAEvC06B,EAAY7wB,iBAAiB,SAAS,WACX,IAApB+wB,EAAU56B,QAGb46B,EAAU56B,OAAS46B,EAAU56B,MAAQ,QAI3Ci7B,QAAS,WAAY,IACbJ,EAAgBx5B,KAAKu2B,KAArBiD,YAEN,GAAgC,IAA5B,GAAIA,GAAat7B,OAArB,CAHmB,WAOGs7B,GAPH,yBAORO,EAPQ,QAQbz5B,EAASy5B,EAAQpG,QAAQ,uBACzBC,EAAWmG,EAAQh1B,aAAa,eAChC8uB,EAAavsB,SAAS+nB,eAAeuE,GAErCoG,EAAoBnG,EAAWF,QAAQ,uBAC3CoG,EAAQvxB,iBAAiB,SAAS,SAAUK,GAC1C,IAAI7I,KAAKiM,UAAUC,SAAS,UAA5B,CAD6C,WAKzB5L,EAAOwU,UALkB,IAK7C,2BAAqC,SAC7B7I,UAAUjB,OAAO,WANoB,yCASzBgvB,EAAkBllB,UATO,IAS7C,2BAAgD,SACxC7I,UAAUjB,OAAO,WAVoB,8BAa7C6oB,EAAW5nB,UAAUI,IAAI,UACzBrM,KAAKiM,UAAUI,IAAI,eApBvB,2BAAmC,IAPhB,kCCrDZ4tB,GAAiB,CAC1B50B,OAAQ,WACN,IAAI60B,EAAal6B,KAAK4E,UAAUuqB,uBAAuB,eAAe,GACtEnvB,KAAKyP,IAAMme,WAAWsM,KCCxBpzB,EAAS,SAAUwvB,IACnBxvB,EAAS,mBAAoBkyB,IAC7BlyB,EAAS,kBAAmBmzB,IAC5B/yB,EAAK,KAEL0mB,mBACAA,eACAA,mBACAA,uB","file":"product-page-default.js","sourcesContent":["// This file has been generated from mustache.mjs\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.Mustache = factory());\n}(this, (function () { 'use strict';\n\n  /*!\n   * mustache.js - Logic-less {{mustache}} templates with JavaScript\n   * http://github.com/janl/mustache.js\n   */\n\n  var objectToString = Object.prototype.toString;\n  var isArray = Array.isArray || function isArrayPolyfill (object) {\n    return objectToString.call(object) === '[object Array]';\n  };\n\n  function isFunction (object) {\n    return typeof object === 'function';\n  }\n\n  /**\n   * More correct typeof string handling array\n   * which normally returns typeof 'object'\n   */\n  function typeStr (obj) {\n    return isArray(obj) ? 'array' : typeof obj;\n  }\n\n  function escapeRegExp (string) {\n    return string.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&');\n  }\n\n  /**\n   * Null safe way of checking whether or not an object,\n   * including its prototype, has a given property\n   */\n  function hasProperty (obj, propName) {\n    return obj != null && typeof obj === 'object' && (propName in obj);\n  }\n\n  /**\n   * Safe way of detecting whether or not the given thing is a primitive and\n   * whether it has the given property\n   */\n  function primitiveHasOwnProperty (primitive, propName) {\n    return (\n      primitive != null\n      && typeof primitive !== 'object'\n      && primitive.hasOwnProperty\n      && primitive.hasOwnProperty(propName)\n    );\n  }\n\n  // Workaround for https://issues.apache.org/jira/browse/COUCHDB-577\n  // See https://github.com/janl/mustache.js/issues/189\n  var regExpTest = RegExp.prototype.test;\n  function testRegExp (re, string) {\n    return regExpTest.call(re, string);\n  }\n\n  var nonSpaceRe = /\\S/;\n  function isWhitespace (string) {\n    return !testRegExp(nonSpaceRe, string);\n  }\n\n  var entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n  };\n\n  function escapeHtml (string) {\n    return String(string).replace(/[&<>\"'`=\\/]/g, function fromEntityMap (s) {\n      return entityMap[s];\n    });\n  }\n\n  var whiteRe = /\\s*/;\n  var spaceRe = /\\s+/;\n  var equalsRe = /\\s*=/;\n  var curlyRe = /\\s*\\}/;\n  var tagRe = /#|\\^|\\/|>|\\{|&|=|!/;\n\n  /**\n   * Breaks up the given `template` string into a tree of tokens. If the `tags`\n   * argument is given here it must be an array with two string values: the\n   * opening and closing tags used in the template (e.g. [ \"<%\", \"%>\" ]). Of\n   * course, the default is to use mustaches (i.e. mustache.tags).\n   *\n   * A token is an array with at least 4 elements. The first element is the\n   * mustache symbol that was used inside the tag, e.g. \"#\" or \"&\". If the tag\n   * did not contain a symbol (i.e. {{myValue}}) this element is \"name\". For\n   * all text that appears outside a symbol this element is \"text\".\n   *\n   * The second element of a token is its \"value\". For mustache tags this is\n   * whatever else was inside the tag besides the opening symbol. For text tokens\n   * this is the text itself.\n   *\n   * The third and fourth elements of the token are the start and end indices,\n   * respectively, of the token in the original template.\n   *\n   * Tokens that are the root node of a subtree contain two more elements: 1) an\n   * array of tokens in the subtree and 2) the index in the original template at\n   * which the closing tag for that section begins.\n   *\n   * Tokens for partials also contain two more elements: 1) a string value of\n   * indendation prior to that tag and 2) the index of that tag on that line -\n   * eg a value of 2 indicates the partial is the third tag on this line.\n   */\n  function parseTemplate (template, tags) {\n    if (!template)\n      return [];\n    var lineHasNonSpace = false;\n    var sections = [];     // Stack to hold section tokens\n    var tokens = [];       // Buffer to hold the tokens\n    var spaces = [];       // Indices of whitespace tokens on the current line\n    var hasTag = false;    // Is there a {{tag}} on the current line?\n    var nonSpace = false;  // Is there a non-space char on the current line?\n    var indentation = '';  // Tracks indentation for tags that use it\n    var tagIndex = 0;      // Stores a count of number of tags encountered on a line\n\n    // Strips all whitespace tokens array for the current line\n    // if there was a {{#tag}} on it and otherwise only space.\n    function stripSpace () {\n      if (hasTag && !nonSpace) {\n        while (spaces.length)\n          delete tokens[spaces.pop()];\n      } else {\n        spaces = [];\n      }\n\n      hasTag = false;\n      nonSpace = false;\n    }\n\n    var openingTagRe, closingTagRe, closingCurlyRe;\n    function compileTags (tagsToCompile) {\n      if (typeof tagsToCompile === 'string')\n        tagsToCompile = tagsToCompile.split(spaceRe, 2);\n\n      if (!isArray(tagsToCompile) || tagsToCompile.length !== 2)\n        throw new Error('Invalid tags: ' + tagsToCompile);\n\n      openingTagRe = new RegExp(escapeRegExp(tagsToCompile[0]) + '\\\\s*');\n      closingTagRe = new RegExp('\\\\s*' + escapeRegExp(tagsToCompile[1]));\n      closingCurlyRe = new RegExp('\\\\s*' + escapeRegExp('}' + tagsToCompile[1]));\n    }\n\n    compileTags(tags || mustache.tags);\n\n    var scanner = new Scanner(template);\n\n    var start, type, value, chr, token, openSection;\n    while (!scanner.eos()) {\n      start = scanner.pos;\n\n      // Match any text between tags.\n      value = scanner.scanUntil(openingTagRe);\n\n      if (value) {\n        for (var i = 0, valueLength = value.length; i < valueLength; ++i) {\n          chr = value.charAt(i);\n\n          if (isWhitespace(chr)) {\n            spaces.push(tokens.length);\n            indentation += chr;\n          } else {\n            nonSpace = true;\n            lineHasNonSpace = true;\n            indentation += ' ';\n          }\n\n          tokens.push([ 'text', chr, start, start + 1 ]);\n          start += 1;\n\n          // Check for whitespace on the current line.\n          if (chr === '\\n') {\n            stripSpace();\n            indentation = '';\n            tagIndex = 0;\n            lineHasNonSpace = false;\n          }\n        }\n      }\n\n      // Match the opening tag.\n      if (!scanner.scan(openingTagRe))\n        break;\n\n      hasTag = true;\n\n      // Get the tag type.\n      type = scanner.scan(tagRe) || 'name';\n      scanner.scan(whiteRe);\n\n      // Get the tag value.\n      if (type === '=') {\n        value = scanner.scanUntil(equalsRe);\n        scanner.scan(equalsRe);\n        scanner.scanUntil(closingTagRe);\n      } else if (type === '{') {\n        value = scanner.scanUntil(closingCurlyRe);\n        scanner.scan(curlyRe);\n        scanner.scanUntil(closingTagRe);\n        type = '&';\n      } else {\n        value = scanner.scanUntil(closingTagRe);\n      }\n\n      // Match the closing tag.\n      if (!scanner.scan(closingTagRe))\n        throw new Error('Unclosed tag at ' + scanner.pos);\n\n      if (type == '>') {\n        token = [ type, value, start, scanner.pos, indentation, tagIndex, lineHasNonSpace ];\n      } else {\n        token = [ type, value, start, scanner.pos ];\n      }\n      tagIndex++;\n      tokens.push(token);\n\n      if (type === '#' || type === '^') {\n        sections.push(token);\n      } else if (type === '/') {\n        // Check section nesting.\n        openSection = sections.pop();\n\n        if (!openSection)\n          throw new Error('Unopened section \"' + value + '\" at ' + start);\n\n        if (openSection[1] !== value)\n          throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + start);\n      } else if (type === 'name' || type === '{' || type === '&') {\n        nonSpace = true;\n      } else if (type === '=') {\n        // Set the tags for the next time around.\n        compileTags(value);\n      }\n    }\n\n    stripSpace();\n\n    // Make sure there are no open sections when we're done.\n    openSection = sections.pop();\n\n    if (openSection)\n      throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + scanner.pos);\n\n    return nestTokens(squashTokens(tokens));\n  }\n\n  /**\n   * Combines the values of consecutive text tokens in the given `tokens` array\n   * to a single token.\n   */\n  function squashTokens (tokens) {\n    var squashedTokens = [];\n\n    var token, lastToken;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      if (token) {\n        if (token[0] === 'text' && lastToken && lastToken[0] === 'text') {\n          lastToken[1] += token[1];\n          lastToken[3] = token[3];\n        } else {\n          squashedTokens.push(token);\n          lastToken = token;\n        }\n      }\n    }\n\n    return squashedTokens;\n  }\n\n  /**\n   * Forms the given array of `tokens` into a nested tree structure where\n   * tokens that represent a section have two additional items: 1) an array of\n   * all tokens that appear in that section and 2) the index in the original\n   * template that represents the end of that section.\n   */\n  function nestTokens (tokens) {\n    var nestedTokens = [];\n    var collector = nestedTokens;\n    var sections = [];\n\n    var token, section;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      switch (token[0]) {\n        case '#':\n        case '^':\n          collector.push(token);\n          sections.push(token);\n          collector = token[4] = [];\n          break;\n        case '/':\n          section = sections.pop();\n          section[5] = token[2];\n          collector = sections.length > 0 ? sections[sections.length - 1][4] : nestedTokens;\n          break;\n        default:\n          collector.push(token);\n      }\n    }\n\n    return nestedTokens;\n  }\n\n  /**\n   * A simple string scanner that is used by the template parser to find\n   * tokens in template strings.\n   */\n  function Scanner (string) {\n    this.string = string;\n    this.tail = string;\n    this.pos = 0;\n  }\n\n  /**\n   * Returns `true` if the tail is empty (end of string).\n   */\n  Scanner.prototype.eos = function eos () {\n    return this.tail === '';\n  };\n\n  /**\n   * Tries to match the given regular expression at the current position.\n   * Returns the matched text if it can match, the empty string otherwise.\n   */\n  Scanner.prototype.scan = function scan (re) {\n    var match = this.tail.match(re);\n\n    if (!match || match.index !== 0)\n      return '';\n\n    var string = match[0];\n\n    this.tail = this.tail.substring(string.length);\n    this.pos += string.length;\n\n    return string;\n  };\n\n  /**\n   * Skips all text until the given regular expression can be matched. Returns\n   * the skipped string, which is the entire tail if no match can be made.\n   */\n  Scanner.prototype.scanUntil = function scanUntil (re) {\n    var index = this.tail.search(re), match;\n\n    switch (index) {\n      case -1:\n        match = this.tail;\n        this.tail = '';\n        break;\n      case 0:\n        match = '';\n        break;\n      default:\n        match = this.tail.substring(0, index);\n        this.tail = this.tail.substring(index);\n    }\n\n    this.pos += match.length;\n\n    return match;\n  };\n\n  /**\n   * Represents a rendering context by wrapping a view object and\n   * maintaining a reference to the parent context.\n   */\n  function Context (view, parentContext) {\n    this.view = view;\n    this.cache = { '.': this.view };\n    this.parent = parentContext;\n  }\n\n  /**\n   * Creates a new context using the given view with this context\n   * as the parent.\n   */\n  Context.prototype.push = function push (view) {\n    return new Context(view, this);\n  };\n\n  /**\n   * Returns the value of the given name in this context, traversing\n   * up the context hierarchy if the value is absent in this context's view.\n   */\n  Context.prototype.lookup = function lookup (name) {\n    var cache = this.cache;\n\n    var value;\n    if (cache.hasOwnProperty(name)) {\n      value = cache[name];\n    } else {\n      var context = this, intermediateValue, names, index, lookupHit = false;\n\n      while (context) {\n        if (name.indexOf('.') > 0) {\n          intermediateValue = context.view;\n          names = name.split('.');\n          index = 0;\n\n          /**\n           * Using the dot notion path in `name`, we descend through the\n           * nested objects.\n           *\n           * To be certain that the lookup has been successful, we have to\n           * check if the last object in the path actually has the property\n           * we are looking for. We store the result in `lookupHit`.\n           *\n           * This is specially necessary for when the value has been set to\n           * `undefined` and we want to avoid looking up parent contexts.\n           *\n           * In the case where dot notation is used, we consider the lookup\n           * to be successful even if the last \"object\" in the path is\n           * not actually an object but a primitive (e.g., a string, or an\n           * integer), because it is sometimes useful to access a property\n           * of an autoboxed primitive, such as the length of a string.\n           **/\n          while (intermediateValue != null && index < names.length) {\n            if (index === names.length - 1)\n              lookupHit = (\n                hasProperty(intermediateValue, names[index])\n                || primitiveHasOwnProperty(intermediateValue, names[index])\n              );\n\n            intermediateValue = intermediateValue[names[index++]];\n          }\n        } else {\n          intermediateValue = context.view[name];\n\n          /**\n           * Only checking against `hasProperty`, which always returns `false` if\n           * `context.view` is not an object. Deliberately omitting the check\n           * against `primitiveHasOwnProperty` if dot notation is not used.\n           *\n           * Consider this example:\n           * ```\n           * Mustache.render(\"The length of a football field is {{#length}}{{length}}{{/length}}.\", {length: \"100 yards\"})\n           * ```\n           *\n           * If we were to check also against `primitiveHasOwnProperty`, as we do\n           * in the dot notation case, then render call would return:\n           *\n           * \"The length of a football field is 9.\"\n           *\n           * rather than the expected:\n           *\n           * \"The length of a football field is 100 yards.\"\n           **/\n          lookupHit = hasProperty(context.view, name);\n        }\n\n        if (lookupHit) {\n          value = intermediateValue;\n          break;\n        }\n\n        context = context.parent;\n      }\n\n      cache[name] = value;\n    }\n\n    if (isFunction(value))\n      value = value.call(this.view);\n\n    return value;\n  };\n\n  /**\n   * A Writer knows how to take a stream of tokens and render them to a\n   * string, given a context. It also maintains a cache of templates to\n   * avoid the need to parse the same template twice.\n   */\n  function Writer () {\n    this.templateCache = {\n      _cache: {},\n      set: function set (key, value) {\n        this._cache[key] = value;\n      },\n      get: function get (key) {\n        return this._cache[key];\n      },\n      clear: function clear () {\n        this._cache = {};\n      }\n    };\n  }\n\n  /**\n   * Clears all cached templates in this writer.\n   */\n  Writer.prototype.clearCache = function clearCache () {\n    if (typeof this.templateCache !== 'undefined') {\n      this.templateCache.clear();\n    }\n  };\n\n  /**\n   * Parses and caches the given `template` according to the given `tags` or\n   * `mustache.tags` if `tags` is omitted,  and returns the array of tokens\n   * that is generated from the parse.\n   */\n  Writer.prototype.parse = function parse (template, tags) {\n    var cache = this.templateCache;\n    var cacheKey = template + ':' + (tags || mustache.tags).join(':');\n    var isCacheEnabled = typeof cache !== 'undefined';\n    var tokens = isCacheEnabled ? cache.get(cacheKey) : undefined;\n\n    if (tokens == undefined) {\n      tokens = parseTemplate(template, tags);\n      isCacheEnabled && cache.set(cacheKey, tokens);\n    }\n    return tokens;\n  };\n\n  /**\n   * High-level method that is used to render the given `template` with\n   * the given `view`.\n   *\n   * The optional `partials` argument may be an object that contains the\n   * names and templates of partials that are used in the template. It may\n   * also be a function that is used to load partial templates on the fly\n   * that takes a single argument: the name of the partial.\n   *\n   * If the optional `config` argument is given here, then it should be an\n   * object with a `tags` attribute or an `escape` attribute or both.\n   * If an array is passed, then it will be interpreted the same way as\n   * a `tags` attribute on a `config` object.\n   *\n   * The `tags` attribute of a `config` object must be an array with two\n   * string values: the opening and closing tags used in the template (e.g.\n   * [ \"<%\", \"%>\" ]). The default is to mustache.tags.\n   *\n   * The `escape` attribute of a `config` object must be a function which\n   * accepts a string as input and outputs a safely escaped string.\n   * If an `escape` function is not provided, then an HTML-safe string\n   * escaping function is used as the default.\n   */\n  Writer.prototype.render = function render (template, view, partials, config) {\n    var tags = this.getConfigTags(config);\n    var tokens = this.parse(template, tags);\n    var context = (view instanceof Context) ? view : new Context(view, undefined);\n    return this.renderTokens(tokens, context, partials, template, config);\n  };\n\n  /**\n   * Low-level method that renders the given array of `tokens` using\n   * the given `context` and `partials`.\n   *\n   * Note: The `originalTemplate` is only ever used to extract the portion\n   * of the original template that was contained in a higher-order section.\n   * If the template doesn't use higher-order sections, this argument may\n   * be omitted.\n   */\n  Writer.prototype.renderTokens = function renderTokens (tokens, context, partials, originalTemplate, config) {\n    var buffer = '';\n\n    var token, symbol, value;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      value = undefined;\n      token = tokens[i];\n      symbol = token[0];\n\n      if (symbol === '#') value = this.renderSection(token, context, partials, originalTemplate, config);\n      else if (symbol === '^') value = this.renderInverted(token, context, partials, originalTemplate, config);\n      else if (symbol === '>') value = this.renderPartial(token, context, partials, config);\n      else if (symbol === '&') value = this.unescapedValue(token, context);\n      else if (symbol === 'name') value = this.escapedValue(token, context, config);\n      else if (symbol === 'text') value = this.rawValue(token);\n\n      if (value !== undefined)\n        buffer += value;\n    }\n\n    return buffer;\n  };\n\n  Writer.prototype.renderSection = function renderSection (token, context, partials, originalTemplate, config) {\n    var self = this;\n    var buffer = '';\n    var value = context.lookup(token[1]);\n\n    // This function is used to render an arbitrary template\n    // in the current context by higher-order sections.\n    function subRender (template) {\n      return self.render(template, context, partials, config);\n    }\n\n    if (!value) return;\n\n    if (isArray(value)) {\n      for (var j = 0, valueLength = value.length; j < valueLength; ++j) {\n        buffer += this.renderTokens(token[4], context.push(value[j]), partials, originalTemplate, config);\n      }\n    } else if (typeof value === 'object' || typeof value === 'string' || typeof value === 'number') {\n      buffer += this.renderTokens(token[4], context.push(value), partials, originalTemplate, config);\n    } else if (isFunction(value)) {\n      if (typeof originalTemplate !== 'string')\n        throw new Error('Cannot use higher-order sections without the original template');\n\n      // Extract the portion of the original template that the section contains.\n      value = value.call(context.view, originalTemplate.slice(token[3], token[5]), subRender);\n\n      if (value != null)\n        buffer += value;\n    } else {\n      buffer += this.renderTokens(token[4], context, partials, originalTemplate, config);\n    }\n    return buffer;\n  };\n\n  Writer.prototype.renderInverted = function renderInverted (token, context, partials, originalTemplate, config) {\n    var value = context.lookup(token[1]);\n\n    // Use JavaScript's definition of falsy. Include empty arrays.\n    // See https://github.com/janl/mustache.js/issues/186\n    if (!value || (isArray(value) && value.length === 0))\n      return this.renderTokens(token[4], context, partials, originalTemplate, config);\n  };\n\n  Writer.prototype.indentPartial = function indentPartial (partial, indentation, lineHasNonSpace) {\n    var filteredIndentation = indentation.replace(/[^ \\t]/g, '');\n    var partialByNl = partial.split('\\n');\n    for (var i = 0; i < partialByNl.length; i++) {\n      if (partialByNl[i].length && (i > 0 || !lineHasNonSpace)) {\n        partialByNl[i] = filteredIndentation + partialByNl[i];\n      }\n    }\n    return partialByNl.join('\\n');\n  };\n\n  Writer.prototype.renderPartial = function renderPartial (token, context, partials, config) {\n    if (!partials) return;\n    var tags = this.getConfigTags(config);\n\n    var value = isFunction(partials) ? partials(token[1]) : partials[token[1]];\n    if (value != null) {\n      var lineHasNonSpace = token[6];\n      var tagIndex = token[5];\n      var indentation = token[4];\n      var indentedValue = value;\n      if (tagIndex == 0 && indentation) {\n        indentedValue = this.indentPartial(value, indentation, lineHasNonSpace);\n      }\n      var tokens = this.parse(indentedValue, tags);\n      return this.renderTokens(tokens, context, partials, indentedValue, config);\n    }\n  };\n\n  Writer.prototype.unescapedValue = function unescapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return value;\n  };\n\n  Writer.prototype.escapedValue = function escapedValue (token, context, config) {\n    var escape = this.getConfigEscape(config) || mustache.escape;\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return (typeof value === 'number' && escape === mustache.escape) ? String(value) : escape(value);\n  };\n\n  Writer.prototype.rawValue = function rawValue (token) {\n    return token[1];\n  };\n\n  Writer.prototype.getConfigTags = function getConfigTags (config) {\n    if (isArray(config)) {\n      return config;\n    }\n    else if (config && typeof config === 'object') {\n      return config.tags;\n    }\n    else {\n      return undefined;\n    }\n  };\n\n  Writer.prototype.getConfigEscape = function getConfigEscape (config) {\n    if (config && typeof config === 'object' && !isArray(config)) {\n      return config.escape;\n    }\n    else {\n      return undefined;\n    }\n  };\n\n  var mustache = {\n    name: 'mustache.js',\n    version: '4.1.0',\n    tags: [ '{{', '}}' ],\n    clearCache: undefined,\n    escape: undefined,\n    parse: undefined,\n    render: undefined,\n    Scanner: undefined,\n    Context: undefined,\n    Writer: undefined,\n    /**\n     * Allows a user to override the default caching strategy, by providing an\n     * object with set, get and clear methods. This can also be used to disable\n     * the cache by setting it to the literal `undefined`.\n     */\n    set templateCache (cache) {\n      defaultWriter.templateCache = cache;\n    },\n    /**\n     * Gets the default or overridden caching object from the default writer.\n     */\n    get templateCache () {\n      return defaultWriter.templateCache;\n    }\n  };\n\n  // All high-level mustache.* functions use this writer.\n  var defaultWriter = new Writer();\n\n  /**\n   * Clears all cached templates in the default writer.\n   */\n  mustache.clearCache = function clearCache () {\n    return defaultWriter.clearCache();\n  };\n\n  /**\n   * Parses and caches the given template in the default writer and returns the\n   * array of tokens it contains. Doing this ahead of time avoids the need to\n   * parse templates on the fly as they are rendered.\n   */\n  mustache.parse = function parse (template, tags) {\n    return defaultWriter.parse(template, tags);\n  };\n\n  /**\n   * Renders the `template` with the given `view`, `partials`, and `config`\n   * using the default writer.\n   */\n  mustache.render = function render (template, view, partials, config) {\n    if (typeof template !== 'string') {\n      throw new TypeError('Invalid template! Template should be a \"string\" ' +\n                          'but \"' + typeStr(template) + '\" was given as the first ' +\n                          'argument for mustache#render(template, view, partials)');\n    }\n\n    return defaultWriter.render(template, view, partials, config);\n  };\n\n  // Export the escaping function so that the user may override it.\n  // See https://github.com/janl/mustache.js/issues/244\n  mustache.escape = escapeHtml;\n\n  // Export these mainly for testing, but also for advanced usage.\n  mustache.Scanner = Scanner;\n  mustache.Context = Context;\n  mustache.Writer = Writer;\n\n  return mustache;\n\n})));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","var SECTION_ID_ATTR = 'data-section-id';\n\nexport default function Section(container, properties) {\n  this.container = validateContainerElement(container);\n  this.id = container.getAttribute(SECTION_ID_ATTR);\n  this.extensions = [];\n\n  // eslint-disable-next-line es5/no-es6-static-methods\n  Object.assign(this, validatePropertiesObject(properties));\n\n  this.onLoad();\n}\n\nSection.prototype = {\n  onLoad: Function.prototype,\n  onUnload: Function.prototype,\n  onSelect: Function.prototype,\n  onDeselect: Function.prototype,\n  onBlockSelect: Function.prototype,\n  onBlockDeselect: Function.prototype,\n\n  extend: function extend(extension) {\n    this.extensions.push(extension); // Save original extension\n\n    // eslint-disable-next-line es5/no-es6-static-methods\n    var extensionClone = Object.assign({}, extension);\n    delete extensionClone.init; // Remove init function before assigning extension properties\n\n    // eslint-disable-next-line es5/no-es6-static-methods\n    Object.assign(this, extensionClone);\n\n    if (typeof extension.init === 'function') {\n      extension.init.apply(this);\n    }\n  }\n};\n\nfunction validateContainerElement(container) {\n  if (!(container instanceof Element)) {\n    throw new TypeError(\n      'Theme Sections: Attempted to load section. The section container provided is not a DOM element.'\n    );\n  }\n  if (container.getAttribute(SECTION_ID_ATTR) === null) {\n    throw new Error(\n      'Theme Sections: The section container provided does not have an id assigned to the ' +\n        SECTION_ID_ATTR +\n        ' attribute.'\n    );\n  }\n\n  return container;\n}\n\nfunction validatePropertiesObject(value) {\n  if (\n    (typeof value !== 'undefined' && typeof value !== 'object') ||\n    value === null\n  ) {\n    throw new TypeError(\n      'Theme Sections: The properties object provided is not a valid'\n    );\n  }\n\n  return value;\n}\n\n// Object.assign() polyfill from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\nif (typeof Object.assign != 'function') {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, 'assign', {\n    value: function assign(target) {\n      // .length of function is 2\n      'use strict';\n      if (target == null) {\n        // TypeError if undefined or null\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) {\n          // Skip over if undefined or null\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true\n  });\n}\n","/*\n * @shopify/theme-sections\n * -----------------------------------------------------------------------------\n *\n * A framework to provide structure to your Shopify sections and a load and unload\n * lifecycle. The lifecycle is automatically connected to theme editor events so\n * that your sections load and unload as the editor changes the content and\n * settings of your sections.\n */\n\nimport Section from './section';\n\nvar SECTION_TYPE_ATTR = 'data-section-type';\nvar SECTION_ID_ATTR = 'data-section-id';\n\nwindow.Shopify = window.Shopify || {};\nwindow.Shopify.theme = window.Shopify.theme || {};\nwindow.Shopify.theme.sections = window.Shopify.theme.sections || {};\n\nexport var registered = (window.Shopify.theme.sections.registered =\n  window.Shopify.theme.sections.registered || {});\nexport var instances = (window.Shopify.theme.sections.instances =\n  window.Shopify.theme.sections.instances || []);\n\nexport function register(type, properties) {\n  if (typeof type !== 'string') {\n    throw new TypeError(\n      'Theme Sections: The first argument for .register must be a string that specifies the type of the section being registered'\n    );\n  }\n\n  if (typeof registered[type] !== 'undefined') {\n    throw new Error(\n      'Theme Sections: A section of type \"' +\n        type +\n        '\" has already been registered. You cannot register the same section type twice'\n    );\n  }\n\n  function TypedSection(container) {\n    Section.call(this, container, properties);\n  }\n\n  TypedSection.constructor = Section;\n  TypedSection.prototype = Object.create(Section.prototype);\n  TypedSection.prototype.type = type;\n\n  return (registered[type] = TypedSection);\n}\n\nexport function unregister(types) {\n  types = normalizeType(types);\n\n  types.forEach(function(type) {\n    delete registered[type];\n  });\n}\n\nexport function load(types, containers) {\n  types = normalizeType(types);\n\n  if (typeof containers === 'undefined') {\n    containers = document.querySelectorAll('[' + SECTION_TYPE_ATTR + ']');\n  }\n\n  containers = normalizeContainers(containers);\n\n  types.forEach(function(type) {\n    var TypedSection = registered[type];\n\n    if (typeof TypedSection === 'undefined') {\n      return;\n    }\n\n    containers = containers.filter(function(container) {\n      // Filter from list of containers because container already has an instance loaded\n      if (isInstance(container)) {\n        return false;\n      }\n\n      // Filter from list of containers because container doesn't have data-section-type attribute\n      if (container.getAttribute(SECTION_TYPE_ATTR) === null) {\n        return false;\n      }\n\n      // Keep in list of containers because current type doesn't match\n      if (container.getAttribute(SECTION_TYPE_ATTR) !== type) {\n        return true;\n      }\n\n      instances.push(new TypedSection(container));\n\n      // Filter from list of containers because container now has an instance loaded\n      return false;\n    });\n  });\n}\n\nexport function unload(selector) {\n  var instancesToUnload = getInstances(selector);\n\n  instancesToUnload.forEach(function(instance) {\n    var index = instances\n      .map(function(e) {\n        return e.id;\n      })\n      .indexOf(instance.id);\n    instances.splice(index, 1);\n    instance.onUnload();\n  });\n}\n\nexport function extend(selector, extension) {\n  var instancesToExtend = getInstances(selector);\n\n  instancesToExtend.forEach(function(instance) {\n    instance.extend(extension);\n  });\n}\n\nexport function getInstances(selector) {\n  var filteredInstances = [];\n\n  // Fetch first element if its an array\n  if (NodeList.prototype.isPrototypeOf(selector) || Array.isArray(selector)) {\n    var firstElement = selector[0];\n  }\n\n  // If selector element is DOM element\n  if (selector instanceof Element || firstElement instanceof Element) {\n    var containers = normalizeContainers(selector);\n\n    containers.forEach(function(container) {\n      filteredInstances = filteredInstances.concat(\n        instances.filter(function(instance) {\n          return instance.container === container;\n        })\n      );\n    });\n\n    // If select is type string\n  } else if (typeof selector === 'string' || typeof firstElement === 'string') {\n    var types = normalizeType(selector);\n\n    types.forEach(function(type) {\n      filteredInstances = filteredInstances.concat(\n        instances.filter(function(instance) {\n          return instance.type === type;\n        })\n      );\n    });\n  }\n\n  return filteredInstances;\n}\n\nexport function getInstanceById(id) {\n  var instance;\n\n  for (var i = 0; i < instances.length; i++) {\n    if (instances[i].id === id) {\n      instance = instances[i];\n      break;\n    }\n  }\n  return instance;\n}\n\nexport function isInstance(selector) {\n  return getInstances(selector).length > 0;\n}\n\nfunction normalizeType(types) {\n  // If '*' then fetch all registered section types\n  if (types === '*') {\n    types = Object.keys(registered);\n\n    // If a single section type string is passed, put it in an array\n  } else if (typeof types === 'string') {\n    types = [types];\n\n    // If single section constructor is passed, transform to array with section\n    // type string\n  } else if (types.constructor === Section) {\n    types = [types.prototype.type];\n\n    // If array of typed section constructors is passed, transform the array to\n    // type strings\n  } else if (Array.isArray(types) && types[0].constructor === Section) {\n    types = types.map(function(TypedSection) {\n      return TypedSection.prototype.type;\n    });\n  }\n\n  types = types.map(function(type) {\n    return type.toLowerCase();\n  });\n\n  return types;\n}\n\nfunction normalizeContainers(containers) {\n  // Nodelist with entries\n  if (NodeList.prototype.isPrototypeOf(containers) && containers.length > 0) {\n    containers = Array.prototype.slice.call(containers);\n\n    // Empty Nodelist\n  } else if (\n    NodeList.prototype.isPrototypeOf(containers) &&\n    containers.length === 0\n  ) {\n    containers = [];\n\n    // Handle null (document.querySelector() returns null with no match)\n  } else if (containers === null) {\n    containers = [];\n\n    // Single DOM element\n  } else if (!Array.isArray(containers) && containers instanceof Element) {\n    containers = [containers];\n  }\n\n  return containers;\n}\n\nif (window.Shopify.designMode) {\n  document.addEventListener('shopify:section:load', function(event) {\n    var id = event.detail.sectionId;\n    var container = event.target.querySelector(\n      '[' + SECTION_ID_ATTR + '=\"' + id + '\"]'\n    );\n\n    if (container !== null) {\n      load(container.getAttribute(SECTION_TYPE_ATTR), container);\n    }\n  });\n\n  document.addEventListener('shopify:section:unload', function(event) {\n    var id = event.detail.sectionId;\n    var container = event.target.querySelector(\n      '[' + SECTION_ID_ATTR + '=\"' + id + '\"]'\n    );\n    var instance = getInstances(container)[0];\n\n    if (typeof instance === 'object') {\n      unload(container);\n    }\n  });\n\n  document.addEventListener('shopify:section:select', function(event) {\n    var instance = getInstanceById(event.detail.sectionId);\n\n    if (typeof instance === 'object') {\n      instance.onSelect(event);\n    }\n  });\n\n  document.addEventListener('shopify:section:deselect', function(event) {\n    var instance = getInstanceById(event.detail.sectionId);\n\n    if (typeof instance === 'object') {\n      instance.onDeselect(event);\n    }\n  });\n\n  document.addEventListener('shopify:block:select', function(event) {\n    var instance = getInstanceById(event.detail.sectionId);\n\n    if (typeof instance === 'object') {\n      instance.onBlockSelect(event);\n    }\n  });\n\n  document.addEventListener('shopify:block:deselect', function(event) {\n    var instance = getInstanceById(event.detail.sectionId);\n\n    if (typeof instance === 'object') {\n      instance.onBlockDeselect(event);\n    }\n  });\n}\n","var win = window;\n\nexport var raf = win.requestAnimationFrame\n  || win.webkitRequestAnimationFrame\n  || win.mozRequestAnimationFrame\n  || win.msRequestAnimationFrame\n  || function(cb) { return setTimeout(cb, 16); };\n","var win = window;\n\nexport var caf = win.cancelAnimationFrame\n  || win.mozCancelAnimationFrame\n  || function(id){ clearTimeout(id); };\n","export function extend() {\n  var obj, name, copy,\n      target = arguments[0] || {},\n      i = 1,\n      length = arguments.length;\n\n  for (; i < length; i++) {\n    if ((obj = arguments[i]) !== null) {\n      for (name in obj) {\n        copy = obj[name];\n\n        if (target === copy) {\n          continue;\n        } else if (copy !== undefined) {\n          target[name] = copy;\n        }\n      }\n    }\n  }\n  return target;\n}","export function checkStorageValue (value) {\n  return ['true', 'false'].indexOf(value) >= 0 ? JSON.parse(value) : value;\n}","export function setLocalStorage(storage, key, value, access) {\n  if (access) {\n    try { storage.setItem(key, value); } catch (e) {}\n  }\n  return value;\n}","export function getBody () {\n  var doc = document,\n      body = doc.body;\n\n  if (!body) {\n    body = doc.createElement('body');\n    body.fake = true;\n  }\n\n  return body;\n}","export var docElement = document.documentElement;","import { docElement } from './docElement.js';\n\nexport function setFakeBody (body) {\n  var docOverflow = '';\n  if (body.fake) {\n    docOverflow = docElement.style.overflow;\n    //avoid crashing IE8, if background image is used\n    body.style.background = '';\n    //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n    body.style.overflow = docElement.style.overflow = 'hidden';\n    docElement.appendChild(body);\n  }\n\n  return docOverflow;\n}","import { docElement } from './docElement.js';\n\nexport function resetFakeBody (body, docOverflow) {\n  if (body.fake) {\n    body.remove();\n    docElement.style.overflow = docOverflow;\n    // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n    // eslint-disable-next-line\n    docElement.offsetHeight;\n  }\n}","// cross browsers addRule method\nimport { raf } from './raf.js';\nexport function addCSSRule(sheet, selector, rules, index) {\n  // return raf(function() {\n    'insertRule' in sheet ?\n      sheet.insertRule(selector + '{' + rules + '}', index) :\n      sheet.addRule(selector, rules, index);\n  // });\n}","export function getCssRulesLength(sheet) {\n  var rule = ('insertRule' in sheet) ? sheet.cssRules : sheet.rules;\n  return rule.length;\n}","// https://toddmotto.com/ditch-the-array-foreach-call-nodelist-hack/\nexport function forEach (arr, callback, scope) {\n  for (var i = 0, l = arr.length; i < l; i++) {\n    callback.call(scope, arr[i], i);\n  }\n}","export var classListSupport = 'classList' in document.createElement('_');","import { classListSupport } from './classListSupport.js';\n\nvar hasClass = classListSupport ?\n    function (el, str) { return el.classList.contains(str); } :\n    function (el, str) { return el.className.indexOf(str) >= 0; };\n\nexport { classListSupport, hasClass };","import { classListSupport, hasClass } from './hasClass.js';\nvar addClass = classListSupport ?\n    function (el, str) {\n      if (!hasClass(el,  str)) { el.classList.add(str); }\n    } :\n    function (el, str) {\n      if (!hasClass(el,  str)) { el.className += ' ' + str; }\n    };\n\nexport { addClass };","import { classListSupport, hasClass } from './hasClass.js';\nvar removeClass = classListSupport ?\n    function (el, str) {\n      if (hasClass(el,  str)) { el.classList.remove(str); }\n    } :\n    function (el, str) {\n      if (hasClass(el, str)) { el.className = el.className.replace(str, ''); }\n    };\n\nexport { removeClass };","export function hasAttr(el, attr) {\n  return el.hasAttribute(attr);\n}","export function getAttr(el, attr) {\n  return el.getAttribute(attr);\n}","export function isNodeList(el) {\n  // Only NodeList has the \"item()\" function\n  return typeof el.item !== \"undefined\"; \n}","import { isNodeList } from \"./isNodeList.js\";\n\nexport function setAttrs(els, attrs) {\n  els = (isNodeList(els) || els instanceof Array) ? els : [els];\n  if (Object.prototype.toString.call(attrs) !== '[object Object]') { return; }\n\n  for (var i = els.length; i--;) {\n    for(var key in attrs) {\n      els[i].setAttribute(key, attrs[key]);\n    }\n  }\n}","import { isNodeList } from \"./isNodeList.js\";\n\nexport function removeAttrs(els, attrs) {\n  els = (isNodeList(els) || els instanceof Array) ? els : [els];\n  attrs = (attrs instanceof Array) ? attrs : [attrs];\n\n  var attrLength = attrs.length;\n  for (var i = els.length; i--;) {\n    for (var j = attrLength; j--;) {\n      els[i].removeAttribute(attrs[j]);\n    }\n  }\n}","export function arrayFromNodeList (nl) {\n  var arr = [];\n  for (var i = 0, l = nl.length; i < l; i++) {\n    arr.push(nl[i]);\n  }\n  return arr;\n}","export function hideElement(el, forceHide) {\n  if (el.style.display !== 'none') { el.style.display = 'none'; }\n}","export function showElement(el, forceHide) {\n  if (el.style.display === 'none') { el.style.display = ''; }\n}","export function isVisible(el) {\n  return window.getComputedStyle(el).display !== 'none';\n}","export function whichProperty(props){\n  if (typeof props === 'string') {\n    var arr = [props],\n        Props = props.charAt(0).toUpperCase() + props.substr(1),\n        prefixes = ['Webkit', 'Moz', 'ms', 'O'];\n        \n    prefixes.forEach(function(prefix) {\n      if (prefix !== 'ms' || props === 'transform') {\n        arr.push(prefix + Props);\n      }\n    });\n\n    props = arr;\n  }\n\n  var el = document.createElement('fakeelement'),\n      len = props.length;\n  for(var i = 0; i < props.length; i++){\n    var prop = props[i];\n    if( el.style[prop] !== undefined ){ return prop; }\n  }\n\n  return false; // explicit for ie9-\n}\n","// get transitionend, animationend based on transitionDuration\n// @propin: string\n// @propOut: string, first-letter uppercase\n// Usage: getEndProperty('WebkitTransitionDuration', 'Transition') => webkitTransitionEnd\nexport function getEndProperty(propIn, propOut) {\n  var endProp = false;\n  if (/^Webkit/.test(propIn)) {\n    endProp = 'webkit' + propOut + 'End';\n  } else if (/^O/.test(propIn)) {\n    endProp = 'o' + propOut + 'End';\n  } else if (propIn) {\n    endProp = propOut.toLowerCase() + 'end';\n  }\n  return endProp;\n}","// Test via a getter in the options object to see if the passive property is accessed\nvar supportsPassive = false;\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function() {\n      supportsPassive = true;\n    }\n  });\n  window.addEventListener(\"test\", null, opts);\n} catch (e) {}\nexport var passiveOption = supportsPassive ? { passive: true } : false;","import { passiveOption } from './passiveOption.js';\n\nexport function addEvents(el, obj, preventScrolling) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 && !preventScrolling ? passiveOption : false;\n    el.addEventListener(prop, obj[prop], option);\n  }\n}","import { passiveOption } from './passiveOption.js';\n\nexport function removeEvents(el, obj) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 ? passiveOption : false;\n    el.removeEventListener(prop, obj[prop], option);\n  }\n}","export function Events() {\n  return {\n    topics: {},\n    on: function (eventName, fn) {\n      this.topics[eventName] = this.topics[eventName] || [];\n      this.topics[eventName].push(fn);\n    },\n    off: function(eventName, fn) {\n      if (this.topics[eventName]) {\n        for (var i = 0; i < this.topics[eventName].length; i++) {\n          if (this.topics[eventName][i] === fn) {\n            this.topics[eventName].splice(i, 1);\n            break;\n          }\n        }\n      }\n    },\n    emit: function (eventName, data) {\n      data.type = eventName;\n      if (this.topics[eventName]) {\n        this.topics[eventName].forEach(function(fn) {\n          fn(data, eventName);\n        });\n      }\n    }\n  };\n};","// Object.keys\nif (!Object.keys) {\n  Object.keys = function(object) {\n    var keys = [];\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n    return keys;\n  };\n}\n\n// ChildNode.remove\nif(!(\"remove\" in Element.prototype)){\n  Element.prototype.remove = function(){\n    if(this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\n\nimport { raf } from './helpers/raf.js';\nimport { caf } from './helpers/caf.js';\nimport { extend } from './helpers/extend.js';\nimport { checkStorageValue } from './helpers/checkStorageValue.js';\nimport { setLocalStorage } from './helpers/setLocalStorage.js';\nimport { getSlideId } from './helpers/getSlideId.js';\nimport { calc } from './helpers/calc.js';\nimport { percentageLayout } from './helpers/percentageLayout.js';\nimport { mediaquerySupport } from './helpers/mediaquerySupport.js';\nimport { createStyleSheet } from './helpers/createStyleSheet.js';\nimport { addCSSRule } from './helpers/addCSSRule.js';\nimport { removeCSSRule } from './helpers/removeCSSRule.js';\nimport { getCssRulesLength } from './helpers/getCssRulesLength.js';\nimport { toDegree } from './helpers/toDegree.js';\nimport { getTouchDirection } from './helpers/getTouchDirection.js';\nimport { forEach } from './helpers/forEach.js';\nimport { hasClass } from './helpers/hasClass.js';\nimport { addClass } from './helpers/addClass.js';\nimport { removeClass } from './helpers/removeClass.js';\nimport { hasAttr } from './helpers/hasAttr.js';\nimport { getAttr } from './helpers/getAttr.js';\nimport { setAttrs } from './helpers/setAttrs.js';\nimport { removeAttrs } from './helpers/removeAttrs.js';\nimport { arrayFromNodeList } from './helpers/arrayFromNodeList.js';\nimport { hideElement } from './helpers/hideElement.js';\nimport { showElement } from './helpers/showElement.js';\nimport { isVisible } from './helpers/isVisible.js';\nimport { whichProperty } from './helpers/whichProperty.js';\nimport { has3DTransforms } from './helpers/has3DTransforms.js';\nimport { getEndProperty } from './helpers/getEndProperty.js';\nimport { addEvents } from './helpers/addEvents.js';\nimport { removeEvents } from './helpers/removeEvents.js';\nimport { Events } from './helpers/events.js';\nimport { jsTransform } from './helpers/jsTransform.js';\n\nexport var tns = function(options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n\n  var doc = document,\n      win = window,\n      KEYS = {\n        ENTER: 13,\n        SPACE: 32,\n        LEFT: 37,\n        RIGHT: 39\n      },\n      tnsStorage = {},\n      localStorageAccess = options.useLocalStorage;\n\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date;\n\n    try {\n      tnsStorage = win.localStorage;\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n      if (!localStorageAccess) { tnsStorage = {}; }\n    } catch(e) {\n      localStorageAccess = false;\n    }\n\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function(item) { tnsStorage.removeItem(item); });\n      }\n      // update browserInfo\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n      PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n      CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n      TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n      HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n      TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n      TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n      ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n      ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n      TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n      ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess);\n\n  // get element nodes from selectors\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n      tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n      optionsElements = {};\n\n  tnsList.forEach(function(item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n          el = doc.querySelector(str);\n      optionsElements[item] = str;\n\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) { console.warn('Can\\'t find', options[item]); }\n        return;\n      }\n    }\n  });\n\n  // make sure at least 1 slide\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) { console.warn('No slides found in', options.container); }\n    return;\n   }\n\n  // update options\n  var responsive = options.responsive,\n      nested = options.nested,\n      carousel = options.mode === 'carousel' ? true : false;\n\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n\n    var responsiveTem = {};\n    for (var key in responsive) {\n      var val = responsive[key];\n      // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n      val = typeof val === 'number' ? {items: val} : val;\n      responsiveTem[key] = val;\n    }\n    responsive = responsiveTem;\n    responsiveTem = null;\n  }\n\n  // update options\n  function updateOptions (obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') { obj[key] = 'page'; }\n        if (key === 'edgePadding') { obj[key] = false; }\n        if (key === 'autoHeight') { obj[key] = false; }\n      }\n\n      // update responsive options\n      if (key === 'responsive') { updateOptions(obj[key]); }\n    }\n  }\n  if (!carousel) { updateOptions(options); }\n\n\n  // === define and set variables ===\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n\n    var animateIn = options.animateIn,\n        animateOut = options.animateOut,\n        animateDelay = options.animateDelay,\n        animateNormal = options.animateNormal;\n  }\n\n  var horizontal = options.axis === 'horizontal' ? true : false,\n      outerWrapper = doc.createElement('div'),\n      innerWrapper = doc.createElement('div'),\n      middleWrapper,\n      container = options.container,\n      containerParent = container.parentNode,\n      containerHTML = container.outerHTML,\n      slideItems = container.children,\n      slideCount = slideItems.length,\n      breakpointZone,\n      windowWidth = getWindowWidth(),\n      isOn = false;\n  if (responsive) { setBreakpointZone(); }\n  if (carousel) { container.className += ' tns-vpfix'; }\n\n  // fixedWidth: viewport > rightBoundary > indexMax\n  var autoWidth = options.autoWidth,\n      fixedWidth = getOption('fixedWidth'),\n      edgePadding = getOption('edgePadding'),\n      gutter = getOption('gutter'),\n      viewport = getViewportWidth(),\n      center = getOption('center'),\n      items = !autoWidth ? Math.floor(getOption('items')) : 1,\n      slideBy = getOption('slideBy'),\n      viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n      arrowKeys = getOption('arrowKeys'),\n      speed = getOption('speed'),\n      rewind = options.rewind,\n      loop = rewind ? false : options.loop,\n      autoHeight = getOption('autoHeight'),\n      controls = getOption('controls'),\n      controlsText = getOption('controlsText'),\n      nav = getOption('nav'),\n      touch = getOption('touch'),\n      mouseDrag = getOption('mouseDrag'),\n      autoplay = getOption('autoplay'),\n      autoplayTimeout = getOption('autoplayTimeout'),\n      autoplayText = getOption('autoplayText'),\n      autoplayHoverPause = getOption('autoplayHoverPause'),\n      autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n      sheet = createStyleSheet(null, getOption('nonce')),\n      lazyload = options.lazyload,\n      lazyloadSelector = options.lazyloadSelector,\n      slidePositions, // collection of slide positions\n      slideItemsOut = [],\n      cloneCount = loop ? getCloneCountForLoop() : 0,\n      slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n      hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n      rightBoundary = fixedWidth ? getRightBoundary() : null,\n      updateIndexBeforeTransform = (!carousel || !loop) ? true : false,\n      // transform\n      transformAttr = horizontal ? 'left' : 'top',\n      transformPrefix = '',\n      transformPostfix = '',\n      // index\n      getIndexMax = (function () {\n        if (fixedWidth) {\n          return function() { return center && !loop ? slideCount - 1 : Math.ceil(- rightBoundary / (fixedWidth + gutter)); };\n        } else if (autoWidth) {\n          return function() {\n            for (var i = 0; i < slideCountNew; i++) {\n              if (slidePositions[i] >= - rightBoundary) { return i; }\n            }\n          };\n        } else {\n          return function() {\n            if (center && carousel && !loop) {\n              return slideCount - 1;\n            } else {\n              return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n            }\n          };\n        }\n      })(),\n      index = getStartIndex(getOption('startIndex')),\n      indexCached = index,\n      displayIndex = getCurrentSlide(),\n      indexMin = 0,\n      indexMax = !autoWidth ? getIndexMax() : null,\n      // resize\n      resizeTimer,\n      preventActionWhenRunning = options.preventActionWhenRunning,\n      swipeAngle = options.swipeAngle,\n      moveDirectionExpected = swipeAngle ? '?' : true,\n      running = false,\n      onInit = options.onInit,\n      events = new Events(),\n      // id, class\n      newContainerClasses = ' tns-slider tns-' + options.mode,\n      slideId = container.id || getSlideId(),\n      disable = getOption('disable'),\n      disabled = false,\n      freezable = options.freezable,\n      freeze = freezable && !autoWidth ? getFreeze() : false,\n      frozen = false,\n      controlsEvents = {\n        'click': onControlsClick,\n        'keydown': onControlsKeydown\n      },\n      navEvents = {\n        'click': onNavClick,\n        'keydown': onNavKeydown\n      },\n      hoverEvents = {\n        'mouseover': mouseoverPause,\n        'mouseout': mouseoutRestart\n      },\n      visibilityEvent = {'visibilitychange': onVisibilityChange},\n      docmentKeydownEvent = {'keydown': onDocumentKeydown},\n      touchEvents = {\n        'touchstart': onPanStart,\n        'touchmove': onPanMove,\n        'touchend': onPanEnd,\n        'touchcancel': onPanEnd\n      }, dragEvents = {\n        'mousedown': onPanStart,\n        'mousemove': onPanMove,\n        'mouseup': onPanEnd,\n        'mouseleave': onPanEnd\n      },\n      hasControls = hasOption('controls'),\n      hasNav = hasOption('nav'),\n      navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n      hasAutoplay = hasOption('autoplay'),\n      hasTouch = hasOption('touch'),\n      hasMouseDrag = hasOption('mouseDrag'),\n      slideActiveClass = 'tns-slide-active',\n      slideClonedClass = 'tns-slide-cloned',\n      imgCompleteClass = 'tns-complete',\n      imgEvents = {\n        'load': onImgLoaded,\n        'error': onImgFailed\n      },\n      imgsComplete,\n      liveregionCurrent,\n      preventScroll = options.preventScrollOnTouch === 'force' ? true : false;\n\n  // controls\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n        controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n        prevButton = options.prevButton,\n        nextButton = options.nextButton,\n        prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n        nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n        prevIsButton,\n        nextIsButton;\n  }\n\n  // nav\n  if (hasNav) {\n    var navContainer = options.navContainer,\n        navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n        navItems,\n        pages = autoWidth ? slideCount : getPages(),\n        pagesCached = 0,\n        navClicked = -1,\n        navCurrentIndex = getCurrentNavIndex(),\n        navCurrentIndexCached = navCurrentIndex,\n        navActiveClass = 'tns-nav-active',\n        navStr = 'Carousel Page ',\n        navStrCurrent = ' (Current Slide)';\n  }\n\n  // autoplay\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n        autoplayButton = options.autoplayButton,\n        autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n        autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n        autoplayTimer,\n        animating,\n        autoplayHoverPaused,\n        autoplayUserPaused,\n        autoplayVisibilityPaused;\n  }\n\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n        lastPosition = {},\n        translateInit,\n        disX,\n        disY,\n        panStart = false,\n        rafIndex,\n        getDist = horizontal ?\n          function(a, b) { return a.x - b.x; } :\n          function(a, b) { return a.y - b.y; };\n  }\n\n  // disable slider when slidecount <= items\n  if (!autoWidth) { resetVariblesWhenDisable(disable || freeze); }\n\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n\n  }\n\n  if (carousel) { container.className = container.className.replace('tns-vpfix', ''); }\n  initStructure();\n  initSheet();\n  initSliderTransform();\n\n  // === COMMON FUNCTIONS === //\n  function resetVariblesWhenDisable (condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n\n  function getCurrentSlide () {\n    var tem = carousel ? index - cloneCount : index;\n    while (tem < 0) { tem += slideCount; }\n    return tem%slideCount + 1;\n  }\n\n  function getStartIndex (ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n\n  function getAbsIndex (i) {\n    if (i == null) { i = index; }\n\n    if (carousel) { i -= cloneCount; }\n    while (i < 0) { i += slideCount; }\n\n    return Math.floor(i%slideCount);\n  }\n\n  function getCurrentNavIndex () {\n    var absIndex = getAbsIndex(),\n        result;\n\n    result = navAsThumbnails ? absIndex :\n      fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) :\n          Math.floor(absIndex / items);\n\n    // set active nav to the last one when reaches the right edge\n    if (!loop && carousel && index === indexMax) { result = pages - 1; }\n\n    return result;\n  }\n\n  function getItemsMax () {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || (fixedWidth && !viewportMax)) {\n      return slideCount - 1;\n    // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n          arr = [];\n\n      if (fixedWidth || options[str] < slideCount) { arr.push(options[str]); }\n\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n          if (tem && (fixedWidth || tem < slideCount)) { arr.push(tem); }\n        }\n      }\n\n      if (!arr.length) { arr.push(0); }\n\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n\n  function getCloneCountForLoop () {\n    var itemsMax = getItemsMax(),\n        result = carousel ? Math.ceil((itemsMax * 5 - slideCount)/2) : (itemsMax * 4 - slideCount);\n    result = Math.max(itemsMax, result);\n\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n\n  function getWindowWidth () {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n\n  function getInsertPosition (pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n\n  function getClientWidth (el) {\n    if (el == null) { return; }\n    var div = doc.createElement('div'), rect, width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n\n  function getViewportWidth () {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n\n  function hasOption (item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) { return true; }\n        }\n      }\n      return false;\n    }\n  }\n\n  // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n  function getOption (item, ww) {\n    if (ww == null) { ww = windowWidth; }\n\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n\n    } else {\n      var result = options[item];\n\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) { result = responsive[bp][item]; }\n          }\n        }\n      }\n\n      if (item === 'slideBy' && result === 'page') { result = getOption('items'); }\n      if (!carousel && (item === 'slideBy' || item === 'items')) { result = Math.floor(result); }\n\n      return result;\n    }\n  }\n\n  function getSlideMarginLeft (i) {\n    return CALC ?\n      CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' :\n      i * 100 / slideCountNew + '%';\n  }\n\n  function getInnerWrapperStyles (edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n      if (gutterTem) { gap -= gutterTem; }\n      str = horizontal ?\n        'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' :\n        'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n          dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';'\n    }\n\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) { str += getTransitionDurationStyle(speedTem); }\n    return str;\n  }\n\n  function getContainerWidth (fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ?\n        CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' :\n        slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n\n  function getSlideWidthStyle (fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n\n    if (fixedWidthTem) {\n      width = (fixedWidthTem + gutterTem) + 'px';\n    } else {\n      if (!carousel) { itemsTem = Math.floor(itemsTem); }\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ?\n        CALC + '(100% / ' + dividend + ')' :\n        100 / dividend + '%';\n    }\n\n    width = 'width:' + width;\n\n    // inner slider: overwrite outer slider styles\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n\n  function getSlideGutterStyle (gutterTem) {\n    var str = '';\n\n    // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n          dir = horizontal ? 'right' : 'bottom';\n      str = prop +  dir + ': ' + gutterTem + 'px;';\n    }\n\n    return str;\n  }\n\n  function getCSSPrefix (name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n    if (prefix) { prefix = '-' + prefix + '-'; }\n\n    return prefix;\n  }\n\n  function getTransitionDurationStyle (speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n\n  function getAnimationDurationStyle (speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n\n  function initStructure () {\n    var classOuter = 'tns-outer',\n        classInner = 'tns-inner',\n        hasGutter = hasOption('gutter');\n\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw';\n\n    // set container properties\n    if (container.id === '') { container.id = slideId; }\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n    if (autoWidth) { newContainerClasses += ' tns-autowidth'; }\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses;\n\n    // add constrain layer for carousel\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container);\n\n    // add id, class, aria attributes\n    // before clone slides\n    forEach(slideItems, function(item, i) {\n      addClass(item, 'tns-item');\n      if (!item.id) { item.id = slideId + '-item' + i; }\n      if (!carousel && animateNormal) { addClass(item, animateNormal); }\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    });\n\n    // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n          fragmentAfter = doc.createDocumentFragment();\n\n      for (var j = cloneCount; j--;) {\n        var num = j%slideCount,\n            cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n\n  }\n\n  function initSliderTransform () {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img');\n\n      // add img load event listener\n      forEach(imgs, function(img) {\n        var src = img.src;\n\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n\n            img.src = src;\n          // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      });\n\n      // set imgsComplete\n      raf(function(){ imgsLoadedCheck(arrayFromNodeList(imgs), function() { imgsComplete = true; }); });\n\n      // reset imgs for auto height: check visible imgs only\n      if (hasOption('autoHeight')) { imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1)); }\n\n      lazyload ? initSliderTransformStyleCheck() : raf(function(){ imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck); });\n\n    } else {\n      // set container transform property\n      if (carousel) { doContainerTransformSilent(); }\n\n      // update slider tools and events\n      initTools();\n      initEvents();\n    }\n  }\n\n  function initSliderTransformStyleCheck () {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n\n        (Math.abs(left - right) <= 1) ?\n          initSliderTransformCore() :\n          setTimeout(function(){ stylesApplicationCheck() }, 16);\n      })();\n\n    } else {\n      initSliderTransformCore();\n    }\n  }\n\n\n  function initSliderTransformCore () {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n        if (freezable) { freeze = getFreeze(); }\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    }\n\n    // set container transform property\n    if (carousel) { doContainerTransformSilent(); }\n\n    // update slider tools and events\n    initTools();\n    initEvents();\n  }\n\n  function initSheet () {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // #### LAYOUT\n\n    // ## INLINE-BLOCK VS FLOAT\n\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    }\n\n\n    // ## BASIC STYLES\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      }\n\n      // inner wrapper styles\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet));\n\n      // container styles\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n        if (TRANSITIONDURATION) { str += getTransitionDurationStyle(speed); }\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      }\n\n      // slide styles\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n      if (options.gutter) { str += getSlideGutterStyle(options.gutter); }\n      // set gallery items transition-duration\n      if (!carousel) {\n        if (TRANSITIONDURATION) { str += getTransitionDurationStyle(speed); }\n        if (ANIMATIONDURATION) { str += getAnimationDurationStyle(speed); }\n      }\n      if (str) { addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet)); }\n\n    // non CSS mediaqueries: IE8\n    // ## update inner wrapper, container, slides if needed\n    // set inline styles for inner wrapper & container\n    // insert stylesheet (one line) for slides only (since slides are many)\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration();\n\n      // inner wrapper styles\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight);\n\n      // container styles\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      }\n\n      // slide styles\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n      if (gutter) { str += getSlideGutterStyle(gutter); }\n\n      // append to the last line\n      if (str) { addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet)); }\n    }\n\n    // ## MEDIAQUERIES\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n\n        var opts = responsive[bp],\n            str = '',\n            middleWrapperStr = '',\n            innerWrapperStr = '',\n            containerStr = '',\n            slideStr = '',\n            itemsBP = !autoWidth ? getOption('items', bp) : null,\n            fixedWidthBP = getOption('fixedWidth', bp),\n            speedBP = getOption('speed', bp),\n            edgePaddingBP = getOption('edgePadding', bp),\n            autoHeightBP = getOption('autoHeight', bp),\n            gutterBP = getOption('gutter', bp);\n\n        // middle wrapper string\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        }\n\n        // inner wrapper string\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        }\n\n        // container string\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || (fixedWidth && 'gutter' in opts))) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        }\n\n        // slide string\n        if ('fixedWidth' in opts || (fixedWidth && 'gutter' in opts) || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        }\n        // set gallery items transition-duration\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) { slideStr += getTransitionDurationStyle(speedBP); }\n          if (ANIMATIONDURATION) { slideStr += getAnimationDurationStyle(speedBP); }\n        }\n        if (slideStr) { slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}'; }\n\n        // add up\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n\n  function initTools () {\n    // == slides ==\n    updateSlideStatus();\n\n    // == live region ==\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current');\n\n    // == autoplayInit ==\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {'data-action': txt});\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      }\n\n      // add event\n      if (autoplayButton) {\n        addEvents(autoplayButton, {'click': toggleAutoplay});\n      }\n\n      if (autoplay) {\n        startAutoplay();\n        if (autoplayHoverPause) { addEvents(container, hoverEvents); }\n        if (autoplayResetOnVisibility) { addEvents(container, visibilityEvent); }\n      }\n    }\n\n    // == navInit ==\n    if (hasNav) {\n      var initIndex = !carousel ? 0 : cloneCount;\n      // customized nav\n      // will not hide the navs in case they're thumbnails\n      if (navContainer) {\n        setAttrs(navContainer, {'aria-label': 'Carousel Pagination'});\n        navItems = navContainer.children;\n        forEach(navItems, function(item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId,\n          });\n        });\n\n      // generated nav\n      } else {\n        var navHtml = '',\n            hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i +'\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) +'\"></button>';\n        }\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n\n      updateNavVisibility();\n\n      // add transition\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n            str = 'transition: all ' + speed / 1000 + 's';\n\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n\n      setAttrs(navItems[navCurrentIndex], {'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent});\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass);\n\n      // add events\n      addEvents(navContainer, navEvents);\n    }\n\n\n\n    // == controlsInit ==\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId +'\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId +'\">' + controlsText[1] + '</button></div>');\n\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n\n      if (options.controlsContainer || (options.prevButton && options.nextButton)) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1',\n        });\n      }\n\n      if (options.controlsContainer || (options.prevButton && options.nextButton)) {\n        setAttrs(prevButton, {'data-controls' : 'prev'});\n        setAttrs(nextButton, {'data-controls' : 'next'});\n      }\n\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n\n      updateControlsStatus();\n\n      // add events\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    }\n\n    // hide tools if needed\n    disableUI();\n  }\n\n  function initEvents () {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n\n    if (touch) { addEvents(container, touchEvents, options.preventScrollOnTouch); }\n    if (mouseDrag) { addEvents(container, dragEvents); }\n    if (arrowKeys) { addEvents(doc, docmentKeydownEvent); }\n\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {'resize': onResize});\n    }\n\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) { doAutoHeight(); }\n    }\n\n    doLazyLoad();\n    if (disable) { disableSlider(); } else if (freeze) { freezeSlider(); }\n\n    events.on('indexChanged', additionalUpdates);\n    if (nested === 'inner') { events.emit('innerLoaded', info()); }\n    if (typeof onInit === 'function') { onInit(info()); }\n    isOn = true;\n  }\n\n  function destroy () {\n    // sheet\n    sheet.disabled = true;\n    if (sheet.ownerNode) { sheet.ownerNode.remove(); }\n\n    // remove win event listeners\n    removeEvents(win, {'resize': onResize});\n\n    // arrowKeys, controls, nav\n    if (arrowKeys) { removeEvents(doc, docmentKeydownEvent); }\n    if (controlsContainer) { removeEvents(controlsContainer, controlsEvents); }\n    if (navContainer) { removeEvents(navContainer, navEvents); }\n\n    // autoplay\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n    if (autoplayButton) { removeEvents(autoplayButton, {'click': toggleAutoplay}); }\n    if (autoplay) { clearInterval(autoplayTimer); }\n\n    // container\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n    if (touch) { removeEvents(container, touchEvents); }\n    if (mouseDrag) { removeEvents(container, dragEvents); }\n\n    // cache Object values in options && reset HTML\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n\n    tnsList.forEach(function(item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n            parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    });\n\n\n    // reset variables\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = resizeTimer = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = disX = disY = panStart = rafIndex = getDist = touch = mouseDrag = null;\n    // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') { this[a] = null; }\n    }\n    isOn = false;\n  }\n\n// === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n  function onResize (e) {\n    raf(function(){ resizeTasks(getEvent(e)); });\n  }\n\n  function resizeTasks (e) {\n    if (!isOn) { return; }\n    if (nested === 'outer') { events.emit('outerResized', info(e)); }\n    windowWidth = getWindowWidth();\n    var bpChanged,\n        breakpointZoneTem = breakpointZone,\n        needContainerTransform = false;\n\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone;\n      // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n      if (bpChanged) { events.emit('newBreakpointStart', info(e)); }\n    }\n\n    var indChanged,\n        itemsChanged,\n        itemsTem = items,\n        disableTem = disable,\n        freezeTem = freeze,\n        arrowKeysTem = arrowKeys,\n        controlsTem = controls,\n        navTem = nav,\n        touchTem = touch,\n        mouseDragTem = mouseDrag,\n        autoplayTem = autoplay,\n        autoplayHoverPauseTem = autoplayHoverPause,\n        autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n        indexTem = index;\n\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n          autoHeightTem = autoHeight,\n          controlsTextTem = controlsText,\n          centerTem = center,\n          autoplayTextTem = autoplayText;\n\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n            edgePaddingTem = edgePadding;\n      }\n    }\n\n    // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    }\n    // update options\n    resetVariblesWhenDisable(disable);\n\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n        needContainerTransform = true;\n      }\n    }\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n                                          // fixedWidth: <= viewport, fixedWidth, gutter\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n                                // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) { indexMax = getIndexMax(); } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n        updateIndex();\n      }\n    }\n\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n                            // <= fixedWidth: fixedWidth, gutter, rightBoundary\n                            // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n    if (!autoplay) { autoplayHoverPause = autoplayResetOnVisibility = false; }\n\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ?\n        addEvents(doc, docmentKeydownEvent) :\n        removeEvents(doc, docmentKeydownEvent);\n    }\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) { showElement(prevButton); }\n          if (nextButton) { showElement(nextButton); }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) { hideElement(prevButton); }\n          if (nextButton) { hideElement(nextButton); }\n        }\n      }\n    }\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer)\n      }\n    }\n    if (touch !== touchTem) {\n      touch ?\n        addEvents(container, touchEvents, options.preventScrollOnTouch) :\n        removeEvents(container, touchEvents);\n    }\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ?\n        addEvents(container, dragEvents) :\n        removeEvents(container, dragEvents);\n    }\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) { showElement(autoplayButton); }\n        if (!animating && !autoplayUserPaused) { startAutoplay(); }\n      } else {\n        if (autoplayButton) { hideElement(autoplayButton); }\n        if (animating) { stopAutoplay(); }\n      }\n    }\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ?\n        addEvents(container, hoverEvents) :\n        removeEvents(container, hoverEvents);\n    }\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ?\n        addEvents(doc, visibilityEvent) :\n        removeEvents(doc, visibilityEvent);\n    }\n\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) { needContainerTransform = true; }\n\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) { innerWrapper.style.height = ''; }\n      }\n\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n            html = autoplayButton.innerHTML,\n            len = html.length - autoplayTextTem[i].length;\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) { needContainerTransform = true; }\n    }\n\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n\n    indChanged = index !== indexTem;\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) { additionalUpdates(); }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n\n    if (itemsChanged && !carousel) { updateGallerySlidePositions(); }\n\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          }\n\n          // slide styles\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) +\n                    getSlideGutterStyle(gutter);\n\n          // remove the last line and\n          // add new styles\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      }\n\n      // auto height\n      if (autoHeight) { doAutoHeight(); }\n\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n\n    if (bpChanged) { events.emit('newBreakpointEnd', info(e)); }\n  }\n\n\n\n\n\n  // === INITIALIZATION FUNCTIONS === //\n  function getFreeze () {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return  slideCount <= a;\n    }\n\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n        vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n\n    return width <= vp;\n  }\n\n  function setBreakpointZone () {\n    breakpointZone = 0;\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n      if (windowWidth >= bp) { breakpointZone = bp; }\n    }\n  }\n\n  // (slideBy, indexMin, indexMax) => index\n  var updateIndex = (function () {\n    return loop ?\n      carousel ?\n        // loop + carousel\n        function () {\n          var leftEdge = indexMin,\n              rightEdge = indexMax;\n\n          leftEdge += slideBy;\n          rightEdge -= slideBy;\n\n          // adjust edges when has edge paddings\n          // or fixed-width slider with extra space on the right side\n          if (edgePadding) {\n            leftEdge += 1;\n            rightEdge -= 1;\n          } else if (fixedWidth) {\n            if ((viewport + gutter)%(fixedWidth + gutter)) { rightEdge -= 1; }\n          }\n\n          if (cloneCount) {\n            if (index > rightEdge) {\n              index -= slideCount;\n            } else if (index < leftEdge) {\n              index += slideCount;\n            }\n          }\n        } :\n        // loop + gallery\n        function() {\n          if (index > indexMax) {\n            while (index >= indexMin + slideCount) { index -= slideCount; }\n          } else if (index < indexMin) {\n            while (index <= indexMax - slideCount) { index += slideCount; }\n          }\n        } :\n      // non-loop\n      function() {\n        index = Math.max(indexMin, Math.min(indexMax, index));\n      };\n  })();\n\n  function disableUI () {\n    if (!autoplay && autoplayButton) { hideElement(autoplayButton); }\n    if (!nav && navContainer) { hideElement(navContainer); }\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) { hideElement(prevButton); }\n        if (nextButton) { hideElement(nextButton); }\n      }\n    }\n  }\n\n  function enableUI () {\n    if (autoplay && autoplayButton) { showElement(autoplayButton); }\n    if (nav && navContainer) { showElement(navContainer); }\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) { showElement(prevButton); }\n        if (nextButton) { showElement(nextButton); }\n      }\n    }\n  }\n\n  function freezeSlider () {\n    if (frozen) { return; }\n\n    // remove edge padding from inner wrapper\n    if (edgePadding) { innerWrapper.style.margin = '0px'; }\n\n    // add class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) { addClass(slideItems[i], str); }\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    disableUI();\n\n    frozen = true;\n  }\n\n  function unfreezeSlider () {\n    if (!frozen) { return; }\n\n    // restore edge padding for inner wrapper\n    // for mordern browsers\n    if (edgePadding && CSSMQ) { innerWrapper.style.margin = ''; }\n\n    // remove class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) { removeClass(slideItems[i], str); }\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    enableUI();\n\n    frozen = false;\n  }\n\n  function disableSlider () {\n    if (disabled) { return; }\n\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) { hideElement(slideItems[j]); }\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // vertical slider\n    if (!horizontal || !carousel) { removeAttrs(innerWrapper, ['style']); }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // update tools\n    disableUI();\n\n    disabled = true;\n  }\n\n  function enableSlider () {\n    if (!disabled) { return; }\n\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) { showElement(slideItems[j]); }\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n            classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    }\n\n    // update tools\n    enableUI();\n\n    disabled = false;\n  }\n\n  function updateLiveRegion () {\n    var str = getLiveRegionStr();\n    if (liveregionCurrent.innerHTML !== str) { liveregionCurrent.innerHTML = str; }\n  }\n\n  function getLiveRegionStr () {\n    var arr = getVisibleSlideRange(),\n        start = arr[0] + 1,\n        end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n\n  function getVisibleSlideRange (val) {\n    if (val == null) { val = getContainerTransformValue(); }\n    var start = index, end, rangestart, rangeend;\n\n    // get range start, range end for autoWidth and fixedWidth\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = - (parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    }\n\n    // get start, end\n    // - check auto width\n    if (autoWidth) {\n      slidePositions.forEach(function(point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) { start = i; }\n          if (rangeend - point >= 0.5) { end = i; }\n        }\n      });\n\n    // - check percentage width, fixed width\n    } else {\n\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n        if (center || edgePadding) {\n          start = Math.floor(rangestart/cell);\n          end = Math.ceil(rangeend/cell - 1);\n        } else {\n          end = start + Math.ceil(viewport/cell) - 1;\n        }\n\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n\n    return [start, end];\n  }\n\n  function doLazyLoad () {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n          eve[TRANSITIONEND] = function (e) { e.stopPropagation(); };\n          addEvents(img, eve);\n\n          addEvents(img, imgEvents);\n\n          // update src\n          img.src = getAttr(img, 'data-src');\n\n          // update srcset\n          var srcset = getAttr(img, 'data-srcset');\n          if (srcset) { img.srcset = srcset; }\n\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n\n  function onImgLoaded (e) {\n    imgLoaded(getTarget(e));\n  }\n\n  function onImgFailed (e) {\n    imgFailed(getTarget(e));\n  }\n\n  function imgLoaded (img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n\n  function imgFailed (img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n\n  function imgCompleted (img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n\n  function getImageArray (start, end, imgSelector) {\n    var imgs = [];\n    if (!imgSelector) { imgSelector = 'img'; }\n\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) { imgs.push(img); });\n      start++;\n    }\n\n    return imgs;\n  }\n\n  // check if all visible images are loaded\n  // and update container height if it's done\n  function doAutoHeight () {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function(){ imgsLoadedCheck(imgs, updateInnerWrapperHeight); });\n  }\n\n  function imgsLoadedCheck (imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) { return cb(); }\n\n    // check image classes\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) { imgCompleted(img); } // Check image.complete\n      if (hasClass(img, imgCompleteClass)) { imgs.splice(index, 1); }\n    });\n\n    // execute callback function if selected images are all complete\n    if (!imgs.length) { return cb(); }\n\n    // otherwise execute this functiona again\n    raf(function(){ imgsLoadedCheck(imgs, cb); });\n  }\n\n  function additionalUpdates () {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n\n\n  function update_carousel_transition_duration () {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n\n  function getMaxSlideHeight (slideStart, slideRange) {\n    var heights = [];\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n\n    return Math.max.apply(null, heights);\n  }\n\n  // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n  function updateInnerWrapperHeight () {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n        wp = middleWrapper ? middleWrapper : innerWrapper;\n\n    if (wp.style.height !== maxHeight) { wp.style.height = maxHeight + 'px'; }\n  }\n\n  // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n  function setSlidePositions () {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n        attr2 = horizontal ? 'right' : 'bottom',\n        base = slideItems[0].getBoundingClientRect()[attr];\n\n    forEach(slideItems, function(item, i) {\n      // skip the first slide\n      if (i) { slidePositions.push(item.getBoundingClientRect()[attr] - base); }\n      // add the end edge\n      if (i === slideCountNew - 1) { slidePositions.push(item.getBoundingClientRect()[attr2] - base); }\n    });\n  }\n\n  // update slide\n  function updateSlideStatus () {\n    var range = getVisibleSlideRange(),\n        start = range[0],\n        end = range[1];\n\n    forEach(slideItems, function(item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        }\n      // hide slides\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  }\n\n  // gallery: update slide position\n  function updateGallerySlidePositions () {\n    var l = index + Math.min(slideCount, items);\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      }\n\n      // remove outlet animation\n      removeClass(item, animateOut);\n    }\n\n    // removing '.tns-moving'\n    setTimeout(function() {\n      forEach(slideItems, function(el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  }\n\n  // set tabindex on Nav\n  function updateNavStatus () {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n            navCurrent = navItems[navCurrentIndex];\n\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n\n        setAttrs(navCurrent, {'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent});\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n\n  function getLowerCaseNodeName (el) {\n    return el.nodeName.toLowerCase();\n  }\n\n  function isButton (el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n\n  function isAriaDisabled (el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n\n  function disEnableElement (isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  }\n\n  // set 'disabled' to true on controls when reach the edges\n  function updateControlsStatus () {\n    if (!controls || rewind || loop) { return; }\n\n    var prevDisabled = (prevIsButton) ? prevButton.disabled : isAriaDisabled(prevButton),\n        nextDisabled = (nextIsButton) ? nextButton.disabled : isAriaDisabled(nextButton),\n        disablePrev = (index <= indexMin) ? true : false,\n        disableNext = (!rewind && index >= indexMax) ? true : false;\n\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  }\n\n  // set duration\n  function resetDuration (el, str) {\n    if (TRANSITIONDURATION) { el.style[TRANSITIONDURATION] = str; }\n  }\n\n  function getSliderWidth () {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n\n  function getCenterGap (num) {\n    if (num == null) { num = index; }\n\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? ((viewport - gap) - (slidePositions[num + 1] - slidePositions[num] - gutter))/2 :\n      fixedWidth ? (viewport - fixedWidth) / 2 :\n        (items - 1) / 2;\n  }\n\n  function getRightBoundary () {\n    var gap = edgePadding ? gutter : 0,\n        result = (viewport + gap) - getSliderWidth();\n\n    if (center && !loop) {\n      result = fixedWidth ? - (fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() :\n        getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n    if (result > 0) { result = 0; }\n\n    return result;\n  }\n\n  function getContainerTransformValue (num) {\n    if (num == null) { num = index; }\n\n    var val;\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = - (fixedWidth + gutter) * num;\n        if (center) { val += getCenterGap(); }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n        if (center) { num -= getCenterGap(); }\n        val = - num * 100 / denominator;\n      }\n    } else {\n      val = - slidePositions[num];\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n\n    if (hasRightDeadZone) { val = Math.max(val, rightBoundary); }\n\n    val += (horizontal && !autoWidth && !fixedWidth) ? '%' : 'px';\n\n    return val;\n  }\n\n  function doContainerTransformSilent (val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n\n  function doContainerTransform (val) {\n    if (val == null) { val = getContainerTransformValue(); }\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n\n  function animateSlide (number, classOut, classIn, isOut) {\n    var l = number + items;\n    if (!loop) { l = Math.min(l, slideCountNew); }\n\n    for (var i = number; i < l; i++) {\n        var item = slideItems[i];\n\n      // set item positions\n      if (!isOut) { item.style.left = (i - index) * 100 / items + '%'; }\n\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n      removeClass(item, classOut);\n      addClass(item, classIn);\n\n      if (isOut) { slideItemsOut.push(item); }\n    }\n  }\n\n  // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n  var transformCore = (function () {\n    return carousel ?\n      function () {\n        resetDuration(container, '');\n        if (TRANSITIONDURATION || !speed) {\n          // for morden browsers with non-zero duration or\n          // zero duration for all browsers\n          doContainerTransform();\n          // run fallback function manually\n          // when duration is 0 / container is hidden\n          if (!speed || !isVisible(container)) { onTransitionEnd(); }\n\n        } else {\n          // for old browser with non-zero duration\n          jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n        }\n\n        if (!horizontal) { updateContentWrapperHeight(); }\n      } :\n      function () {\n        slideItemsOut = [];\n\n        var eve = {};\n        eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n        removeEvents(slideItems[indexCached], eve);\n        addEvents(slideItems[index], eve);\n\n        animateSlide(indexCached, animateIn, animateOut, true);\n        animateSlide(index, animateNormal, animateIn);\n\n        // run fallback function manually\n        // when transition or animation not supported / duration is 0\n        if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) { onTransitionEnd(); }\n      };\n  })();\n\n  function render (e, sliderMoved) {\n    if (updateIndexBeforeTransform) { updateIndex(); }\n\n    // render when slider was moved (touch or drag) even though index may not change\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n      if (autoHeight) { doAutoHeight(); }\n\n      // pause autoplay when click or keydown from user\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) { stopAutoplay(); }\n\n      running = true;\n      transformCore();\n    }\n  }\n\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n  function strTrans (str) {\n    return str.toLowerCase().replace(/-/g, '');\n  }\n\n  // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n  function onTransitionEnd (event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i];\n          // set item positions\n          item.style.left = '';\n\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n      if (!event ||\n          !carousel && event.target.parentNode === container ||\n          event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n\n            doContainerTransformSilent();\n          }\n        }\n\n        if (nested === 'inner') { events.emit('innerLoaded', info()); }\n        running = false;\n        indexCached = index;\n      }\n    }\n\n  }\n\n  // # ACTIONS\n  function goTo (targetIndex, e) {\n    if (freeze) { return; }\n\n    // prev slideBy\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1);\n\n    // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1);\n\n    // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n      }\n\n      var absIndex = getAbsIndex(),\n          indexGap = 0;\n\n      if (targetIndex === 'first') {\n        indexGap = - absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') { targetIndex = parseInt(targetIndex); }\n\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) { targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex)); }\n\n          indexGap = targetIndex - absIndex;\n        }\n      }\n\n      // gallery: make sure new page won't overlap with current page\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += (index + indexGap - slideCount) >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n\n      index += indexGap;\n\n      // make sure index is in range\n      if (carousel && loop) {\n        if (index < indexMin) { index += slideCount; }\n        if (index > indexMax) { index -= slideCount; }\n      }\n\n      // if index is changed, start rendering\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n\n    }\n  }\n\n  // on controls click\n  function onControlsClick (e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n    var passEventObject;\n\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) { target = target.parentNode; }\n\n      var targetIn = [prevButton, nextButton].indexOf(target);\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n\n    if (dir) {\n      index += slideBy * dir;\n      if (autoWidth) { index = Math.floor(index); }\n      // pass e when click control buttons or keydown\n      render((passEventObject || (e && e.type === 'keydown')) ? e : null);\n    }\n  }\n\n  // on nav click\n  function onNavClick (e) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n\n    e = getEvent(e);\n    var target = getTarget(e), navIndex;\n\n    // find the clicked nav item\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) { target = target.parentNode; }\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n          targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n          targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n\n      if (navCurrentIndex === navIndex) {\n        if (animating) { stopAutoplay(); }\n        navClicked = -1; // reset navClicked\n      }\n    }\n  }\n\n  // autoplay functions\n  function setAutoplayTimer () {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n\n    animating = true;\n  }\n\n  function stopAutoplayTimer () {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n\n  function updateAutoplayButton (action, txt) {\n    setAttrs(autoplayButton, {'data-action': action});\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n\n  function startAutoplay () {\n    setAutoplayTimer();\n    if (autoplayButton) { updateAutoplayButton('stop', autoplayText[1]); }\n  }\n\n  function stopAutoplay () {\n    stopAutoplayTimer();\n    if (autoplayButton) { updateAutoplayButton('start', autoplayText[0]); }\n  }\n\n  // programaitcally play/pause the slider\n  function play () {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n  function pause () {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n\n  function toggleAutoplay () {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function onVisibilityChange () {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n\n  function mouseoverPause () {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n\n  function mouseoutRestart () {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  }\n\n  // keydown events on document\n  function onDocumentKeydown (e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  }\n\n  // on key control\n  function onControlsKeydown (e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) { onControlsClick(e, -1); }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  }\n\n  // set focus\n  function setFocus (el) {\n    el.focus();\n  }\n\n  // on key nav\n  function onNavKeydown (e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n    if (!hasAttr(curElement, 'data-nav')) { return; }\n\n    // var code = e.keyCode,\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n        navIndex = Number(getAttr(curElement, 'data-nav'));\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) { setFocus(navItems[navIndex - 1]); }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) { setFocus(navItems[navIndex + 1]); }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n\n  function getEvent (e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n  function getTarget (e) {\n    return e.target || win.event.srcElement;\n  }\n\n  function isTouchEvent (e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n\n  function preventDefaultBehavior (e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n\n  function getMoveDirectionExpected () {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n\n  function onPanStart (e) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n\n    if (autoplay && animating) { stopAutoplayTimer(); }\n\n    panStart = true;\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n\n  function onPanMove (e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n\n      if (carousel) {\n        if (!rafIndex) { rafIndex = raf(function(){ panUpdate(e); }); }\n      } else {\n        if (moveDirectionExpected === '?') { moveDirectionExpected = getMoveDirectionExpected(); }\n        if (moveDirectionExpected) { preventScroll = true; }\n      }\n\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  function panUpdate (e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n    caf(rafIndex);\n    if (panStart) { rafIndex = raf(function(){ panUpdate(e); }); }\n\n    if (moveDirectionExpected === '?') { moveDirectionExpected = getMoveDirectionExpected(); }\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) { preventScroll = true; }\n\n      try {\n        if (e.type) { events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e)); }\n      } catch(err) {}\n\n      var x = translateInit,\n          dist = getDist(lastPosition, initPosition);\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew): dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n\n  function onPanEnd (e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n      if (carousel) { resetDuration(container, ''); }\n      panStart = false;\n\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {'click': function preventClick (e) {\n            preventDefaultBehavior(e);\n            removeEvents(target, {'click': preventClick});\n          }});\n        }\n\n        if (carousel) {\n          rafIndex = raf(function() {\n            if (horizontal && !autoWidth) {\n              var indexMoved = - dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = - (translateInit + dist);\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n                  if (moved > slidePositions[i] && dist < 0) { index += 1; }\n                  i++;\n                }\n              }\n            }\n\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    }\n\n    // reset\n    if (options.preventScrollOnTouch === 'auto') { preventScroll = false; }\n    if (swipeAngle) { moveDirectionExpected = '?'; }\n    if (autoplay && !animating) { setAutoplayTimer(); }\n  }\n\n  // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n  function updateContentWrapperHeight () {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n\n  function getPages () {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n  function updateNavVisibility () {\n    if (!nav || navAsThumbnails) { return; }\n\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n          max = pages,\n          fn = showElement;\n\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      }\n\n      // cache pages\n      pagesCached = pages;\n    }\n  }\n\n  function info (e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {},\n    };\n  }\n\n  return {\n    version: '2.9.3',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function() {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};\n","// get css-calc \n// @return - false | calc | -webkit-calc | -moz-calc\n// @usage - var calc = getCalc(); \nimport { getBody } from './getBody.js';\nimport { setFakeBody } from './setFakeBody.js';\nimport { resetFakeBody } from './resetFakeBody.js';\n\nexport function calc() {\n  var doc = document, \n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      div = doc.createElement('div'), \n      result = false;\n\n  body.appendChild(div);\n  try {\n    var str = '(10px * 10)',\n        vals = ['calc' + str, '-moz-calc' + str, '-webkit-calc' + str],\n        val;\n    for (var i = 0; i < 3; i++) {\n      val = vals[i];\n      div.style.width = val;\n      if (div.offsetWidth === 100) { \n        result = val.replace(str, ''); \n        break;\n      }\n    }\n  } catch (e) {}\n  \n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n\n  return result;\n}","// get subpixel support value\n// @return - boolean\nimport { getBody } from './getBody.js';\nimport { setFakeBody } from './setFakeBody.js';\nimport { resetFakeBody } from './resetFakeBody.js';\n\nexport function percentageLayout() {\n  // check subpixel layout supporting\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      wrapper = doc.createElement('div'),\n      outer = doc.createElement('div'),\n      str = '',\n      count = 70,\n      perPage = 3,\n      supported = false;\n\n  wrapper.className = \"tns-t-subp2\";\n  outer.className = \"tns-t-ct\";\n\n  for (var i = 0; i < count; i++) {\n    str += '<div></div>';\n  }\n\n  outer.innerHTML = str;\n  wrapper.appendChild(outer);\n  body.appendChild(wrapper);\n\n  supported = Math.abs(wrapper.getBoundingClientRect().left - outer.children[count - perPage].getBoundingClientRect().left) < 2;\n\n  body.fake ? resetFakeBody(body, docOverflow) : wrapper.remove();\n\n  return supported;\n}","import { getBody } from './getBody.js';\nimport { setFakeBody } from './setFakeBody.js';\nimport { resetFakeBody } from './resetFakeBody.js';\n\nexport function mediaquerySupport () {\n  if (window.matchMedia || window.msMatchMedia) {\n    return true;\n  }\n  \n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      div = doc.createElement('div'),\n      style = doc.createElement('style'),\n      rule = '@media all and (min-width:1px){.tns-mq-test{position:absolute}}',\n      position;\n\n  style.type = 'text/css';\n  div.className = 'tns-mq-test';\n\n  body.appendChild(style);\n  body.appendChild(div);\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = rule;\n  } else {\n    style.appendChild(doc.createTextNode(rule));\n  }\n\n  position = window.getComputedStyle ? window.getComputedStyle(div).position : div.currentStyle['position'];\n\n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n\n  return position === \"absolute\";\n}\n","import { getBody } from './getBody.js';\nimport { setFakeBody } from './setFakeBody.js';\nimport { resetFakeBody } from './resetFakeBody.js';\n\nexport function has3DTransforms(tf){\n  if (!tf) { return false; }\n  if (!window.getComputedStyle) { return false; }\n  \n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      el = doc.createElement('p'),\n      has3d,\n      cssTF = tf.length > 9 ? '-' + tf.slice(0, -9).toLowerCase() + '-' : '';\n\n  cssTF += 'transform';\n\n  // Add it to the body to get the computed style\n  body.insertBefore(el, null);\n\n  el.style[tf] = 'translate3d(1px,1px,1px)';\n  has3d = window.getComputedStyle(el).getPropertyValue(cssTF);\n\n  body.fake ? resetFakeBody(body, docOverflow) : el.remove();\n\n  return (has3d !== undefined && has3d.length > 0 && has3d !== \"none\");\n}\n","export function getSlideId() {\n  var id = window.tnsId;\n  window.tnsId = !id ? 1 : id + 1;\n  \n  return 'tns' + window.tnsId;\n}","// create and append style sheet\nexport function createStyleSheet (media, nonce) {\n  // Create the <style> tag\n  var style = document.createElement(\"style\");\n  // style.setAttribute(\"type\", \"text/css\");\n\n  // Add a media (and/or media query) here if you'd like!\n  // style.setAttribute(\"media\", \"screen\")\n  // style.setAttribute(\"media\", \"only screen and (max-width : 1024px)\")\n  if (media) { style.setAttribute(\"media\", media); }\n\n  // Add nonce attribute for Content Security Policy\n  if (nonce) { style.setAttribute(\"nonce\", nonce); }\n\n  // WebKit hack :(\n  // style.appendChild(document.createTextNode(\"\"));\n\n  // Add the <style> element to the page\n  document.querySelector('head').appendChild(style);\n\n  return style.sheet ? style.sheet : style.styleSheet;\n};","export function jsTransform(element, attr, prefix, postfix, to, duration, callback) {\n  var tick = Math.min(duration, 10),\n      unit = (to.indexOf('%') >= 0) ? '%' : 'px',\n      to = to.replace(unit, ''),\n      from = Number(element.style[attr].replace(prefix, '').replace(postfix, '').replace(unit, '')),\n      positionTick = (to - from) / duration * tick,\n      running;\n\n  setTimeout(moveElement, tick);\n  function moveElement() {\n    duration -= tick;\n    from += positionTick;\n    element.style[attr] = prefix + from + unit + postfix;\n    if (duration > 0) { \n      setTimeout(moveElement, tick); \n    } else {\n      callback();\n    }\n  }\n}","// cross browsers addRule method\nimport { raf } from './raf.js';\nexport function removeCSSRule(sheet, index) {\n  // return raf(function() {\n    'deleteRule' in sheet ?\n      sheet.deleteRule(index) :\n      sheet.removeRule(index);\n  // });\n}","export function toDegree (y, x) {\n  return Math.atan2(y, x) * (180 / Math.PI);\n}","export function getTouchDirection(angle, range) {\n  var direction = false,\n      gap = Math.abs(90 - Math.abs(angle));\n      \n  if (gap >= 90 - range) {\n    direction = 'horizontal';\n  } else if (gap <= range) {\n    direction = 'vertical';\n  }\n\n  return direction;\n}","/**\n * Image Helper Functions\n * -----------------------------------------------------------------------------\n * https://github.com/Shopify/slate.git.\n *\n */\n\n/**\n * Preloads an image in memory and uses the browsers cache to store it until needed.\n *\n * @param {Array} images - A list of image urls\n * @param {String} size - A shopify image size attribute\n */\n\nexport function preload(images, size) {\n  if (typeof images === 'string') {\n    images = [images];\n  }\n\n  for (let i = 0; i < images.length; i++) {\n    const image = images[i];\n    loadImage(getSizedImageUrl(image, size));\n  }\n}\n\n/**\n * Loads and caches an image in the browsers cache.\n * @param {string} path - An image url\n */\nexport function loadImage(path) {\n  new Image().src = path;\n}\n\n/**\n * Find the Shopify image attribute size\n *\n * @param {string} src\n * @returns {null}\n */\nexport function imageSize(src) {\n  const match = src.match(\n    /.+_((?:pico|icon|thumb|small|compact|medium|large|grande)|\\d{1,4}x\\d{0,4}|x\\d{1,4})[_\\.@]/\n  );\n\n  if (match) {\n    return match[1];\n  } else {\n    return null;\n  }\n}\n\n/**\n * Adds a Shopify size attribute to a URL\n *\n * @param src\n * @param size\n * @returns {*}\n */\nexport function getSizedImageUrl(src, size) {\n  if (size === null) {\n    return src;\n  }\n\n  if (size === 'master') {\n    return removeProtocol(src);\n  }\n\n  const match = src.match(/\\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\\?v=\\d+)?$/i);\n\n  if (match) {\n    const prefix = src.split(match[0]);\n    const suffix = match[0];\n\n    return removeProtocol(`${prefix[0]}_${size}${suffix}`);\n  } else {\n    return null;\n  }\n}\n\nexport function removeProtocol(path) {\n  return path.replace(/http(s)?:/, '');\n}\n","import { tns } from \"tiny-slider/src/tiny-slider\";\r\nimport { getSizedImageUrl } from \"@shopify/theme-images\";\r\nlet AT = {\r\n  eventContainers: {},\r\n  currency: (function () {\r\n    var moneyFormat = \"${{amount}}\";\r\n\r\n    function formatMoney(cents, format) {\r\n      if (typeof cents === \"string\") {\r\n        cents = cents.replace(\".\", \"\");\r\n      }\r\n      var value = \"\";\r\n      var placeholderRegex = /\\{\\{\\s*(\\w+)\\s*\\}\\}/;\r\n      var formatString = format || moneyFormat;\r\n\r\n      function formatWithDelimiters(number, precision, thousands, decimal) {\r\n        thousands = thousands || \",\";\r\n        decimal = decimal || \".\";\r\n\r\n        if (isNaN(number) || number === null) {\r\n          return 0;\r\n        }\r\n\r\n        number = (number / 100.0).toFixed(precision);\r\n\r\n        var parts = number.split(\".\");\r\n        var dollarsAmount = parts[0].replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1\" + thousands);\r\n        var centsAmount = parts[1] ? decimal + parts[1] : \"\";\r\n\r\n        return dollarsAmount + centsAmount;\r\n      }\r\n\r\n      switch (formatString.match(placeholderRegex)[1]) {\r\n        case \"amount\":\r\n          value = formatWithDelimiters(cents, 2);\r\n          break;\r\n        case \"amount_no_decimals\":\r\n          value = formatWithDelimiters(cents, 0);\r\n          break;\r\n        case \"amount_with_comma_separator\":\r\n          value = formatWithDelimiters(cents, 2, \".\", \",\");\r\n          break;\r\n        case \"amount_no_decimals_with_comma_separator\":\r\n          value = formatWithDelimiters(cents, 0, \".\", \",\");\r\n          break;\r\n        case \"amount_no_decimals_with_space_separator\":\r\n          value = formatWithDelimiters(cents, 0, \" \");\r\n          break;\r\n        case \"amount_with_apostrophe_separator\":\r\n          value = formatWithDelimiters(cents, 2, \"'\");\r\n          break;\r\n      }\r\n\r\n      return formatString.replace(placeholderRegex, value);\r\n    }\r\n\r\n    return {\r\n      formatMoney: formatMoney,\r\n    };\r\n  })(),\r\n  cart: {},\r\n  debounce: (func, wait) => {\r\n    let timeout;\r\n    return function (...args) {\r\n      const later = () => {\r\n        clearTimeout(timeout);\r\n        func(...args);\r\n      };\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n    };\r\n  },\r\n  initTNS: function (container) {\r\n    let tnsContainer = container.getElementsByClassName(\"js-tns\")[0];\r\n    let controlsContainer = container.getElementsByClassName(\"js-tns-controls\")[0];\r\n    let configId = tnsContainer.getAttribute(\"data-config\");\r\n\r\n    let config = (!!configId && JSON.parse(document.getElementById(configId).innerHTML)) || {};\r\n\r\n    if (!!config.controls) {\r\n      config.controlsContainer = controlsContainer;\r\n    }\r\n    if (config.itemClass !== \"\" && typeof config.itemClass !== \"undefined\") {\r\n      for (const item of tnsContainer.children) {\r\n        item.className = config.itemClass;\r\n      }\r\n    }\r\n    Object.assign(config, {\r\n      container: tnsContainer,\r\n      onInit: function () {\r\n        tnsContainer.classList.remove(\"row\", \"d-grid\");\r\n      },\r\n    });\r\n\r\n    return tns(config);\r\n  },\r\n  initHandleCollapse: function () {\r\n    let btnCollapse = document.getElementsByClassName(\"js-btn-collapse\");\r\n\r\n    for (const btn of btnCollapse) {\r\n      let id = btn.getAttribute(\"data-target\");\r\n      let collapseContainer = document.getElementById(id);\r\n      AT.handleCollapse(btn, collapseContainer);\r\n    }\r\n  },\r\n  handleCollapse: function (btnTrigger, collapseContainer) {\r\n    let first = true,\r\n      isComplete = false;\r\n\r\n    btnTrigger.addEventListener(\"click\", function () {\r\n      if (first || isComplete) {\r\n        first = false;\r\n        isComplete = false;\r\n\r\n        if (collapseContainer.classList.contains(\"is-open\")) {\r\n          let height = collapseContainer.offsetHeight;\r\n          collapseContainer.style.height = `${height}px`;\r\n          AT.debounce(function () {\r\n            collapseContainer.style.height = \"0px\";\r\n          }, 1)();\r\n          AT.debounce(() => {\r\n            collapseContainer.style.height = \"\";\r\n            collapseContainer.classList.remove(\"is-open\");\r\n            this.classList.remove(\"is-open\");\r\n            isComplete = true;\r\n          }, 200)();\r\n        } else {\r\n          collapseContainer.classList.add(\"is-open\");\r\n          collapseContainer.style.height = \"0px\";\r\n          let height = [...collapseContainer.children].reduce(\r\n            (accu, currentValue) => accu + currentValue.offsetHeight,\r\n            0\r\n          );\r\n          collapseContainer.style.height = `${height}px`;\r\n          AT.debounce(() => {\r\n            collapseContainer.style.height = \"\";\r\n            this.classList.add(\"is-open\");\r\n            isComplete = true;\r\n          }, 200)();\r\n        }\r\n      }\r\n    });\r\n  },\r\n  initBackToTop: function () {\r\n    let btnToTop = document.getElementById(\"back-to-top\");\r\n\r\n    !!btnToTop &&\r\n      btnToTop.addEventListener(\"click\", function (e) {\r\n        window.scroll({\r\n          top: 0,\r\n          left: 0,\r\n          behavior: \"smooth\",\r\n        });\r\n      });\r\n    window.addEventListener(\"scroll\", function () {\r\n      if (window.pageYOffset > window.innerHeight) {\r\n        btnToTop.classList.add(\"show\");\r\n      } else {\r\n        btnToTop.classList.remove(\"show\");\r\n      }\r\n    });\r\n  },\r\n  initAddToCart: function (form) {\r\n    // let formAddToCart = !!form ? [form] : [...document.getElementsByClassName(\"js-form-add-to-cart\")];\r\n\r\n    let btnAddToCart = form.getElementsByClassName(\"btn-add-to-cart\")[0];\r\n    form.addEventListener(\"submit\", function (e) {\r\n      e.preventDefault();\r\n      btnAddToCart.classList.add(\"pending\");\r\n      fetch(\"/cart/add.js\", {\r\n        method: \"post\",\r\n        headers: new Headers(),\r\n        body: new FormData(form),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((dataProduct) => {\r\n          fetch(\"/cart.js\")\r\n            .then((res) => res.json())\r\n            .then((cart) => {\r\n              AT.cart = cart;\r\n              AT.dispatchEvent(\"cartChange\", cart);\r\n              btnAddToCart.classList.remove(\"pending\");\r\n              AT.dispatchEvent(\"cartNotify\", dataProduct);\r\n            });\r\n        })\r\n        .catch((err) => console.log(err.message));\r\n    });\r\n    // for (const form of formAddToCart) {\r\n    // }\r\n  },\r\n  initProductCard: function (productCart) {\r\n    let form = productCart.querySelector(\"form\");\r\n    AT.initAddToCart(form);\r\n  },\r\n  getCart: function () {\r\n    fetch(\"/cart.js\", {\r\n      method: \"get\",\r\n      headers: new Headers(),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        if (res.item_count !== 0) {\r\n          AT.cart = res;\r\n        }\r\n      });\r\n  },\r\n  removeCartItem: function (key, callback) {\r\n    fetch(\"/cart/change.js\", { method: \"post\", body: new URLSearchParams({ id: key, quantity: 0 }) })\r\n      .then((res) => res.json())\r\n      .then((cart) => (AT.dispatchEvent(\"cartChange\", cart), callback()));\r\n  },\r\n  registerEvents: function (eventName, container) {\r\n    if (typeof container !== \"undefined\") {\r\n      this.eventContainers[eventName] = this.eventContainers[eventName] || [];\r\n      this.eventContainers[eventName] = [...this.eventContainers[eventName], container];\r\n    } else {\r\n      console.error(\"Event container is not defined\");\r\n    }\r\n  },\r\n  dispatchEvent: function (eventName, data) {\r\n    let containers = AT.eventContainers[eventName] || [];\r\n    containers.forEach((container) => {\r\n      !!container && container.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n    });\r\n  },\r\n  serialize: function (form) {\r\n    // Setup our serialized data\r\n    var serialized = [];\r\n\r\n    // Loop through each field in the form\r\n    for (var i = 0; i < form.elements.length; i++) {\r\n      var field = form.elements[i];\r\n\r\n      // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\r\n      if (\r\n        !field.name ||\r\n        field.disabled ||\r\n        field.type === \"file\" ||\r\n        field.type === \"reset\" ||\r\n        field.type === \"submit\" ||\r\n        field.type === \"button\"\r\n      )\r\n        continue;\r\n\r\n      // If a multi-select, get all selections\r\n      if (field.type === \"select-multiple\") {\r\n        for (var n = 0; n < field.options.length; n++) {\r\n          if (!field.options[n].selected) continue;\r\n          serialized.push(encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.options[n].value));\r\n        }\r\n      }\r\n\r\n      // Convert field data to a query string\r\n      else if ((field.type !== \"checkbox\" && field.type !== \"radio\") || field.checked) {\r\n        serialized.push(encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.value));\r\n      }\r\n    }\r\n\r\n    return serialized.join(\"&\");\r\n  },\r\n  initCountdown: function () {\r\n    let countdownContainers = document.getElementsByClassName(\"js-countdown\");\r\n    setInterval(function () {\r\n      for (const countdown of countdownContainers) {\r\n        let daysElm = countdown.getElementsByClassName(\"js-countdown-days\")[0];\r\n        let hoursElm = countdown.getElementsByClassName(\"js-countdown-hours\")[0];\r\n        let minutesElm = countdown.getElementsByClassName(\"js-countdown-minutes\")[0];\r\n        let secondsElm = countdown.getElementsByClassName(\"js-countdown-seconds\")[0];\r\n        let date = new Date(countdown.getAttribute(\"data-date\")).getTime() - new Date().getTime();\r\n        let timer = new easytimer.Timer();\r\n\r\n        timer.start({ countdown: true, startValues: { seconds: date / 1000 } });\r\n\r\n        timer.addEventListener(\"secondsUpdated\", function (e) {\r\n          let days = timer.getTimeValues().days;\r\n          let hours = timer.getTimeValues().hours;\r\n          let minutes = timer.getTimeValues().minutes;\r\n          let seconds = timer.getTimeValues().seconds;\r\n\r\n          daysElm.innerHTML = days > 9 ? days : `0${days}`;\r\n          hoursElm.innerHTML = hours > 9 ? hours : `0${hours}`;\r\n          minutesElm.innerHTML = minutes > 9 ? minutes : `0${minutes}`;\r\n          secondsElm.innerHTML = seconds > 9 ? seconds : `0${seconds}`;\r\n        });\r\n        countdown.classList.remove(\"js-countdown\");\r\n        countdown.classList.add(\"js-countdown-loaded\");\r\n      }\r\n    }, 500);\r\n  },\r\n  initTabs: function () {\r\n    let tabControls = document.getElementsByClassName(\"js-tab-control\");\r\n\r\n    for (const control of tabControls) {\r\n      control.addEventListener(\"click\", function (e) {\r\n        if (this.classList.contains(\"active\")) {\r\n          return;\r\n        }\r\n        let parent = this.closest(\"[data-tabs-control]\");\r\n        for (const child of parent.children) {\r\n          child.classList.remove(\"active\");\r\n        }\r\n\r\n        let targetID = this.getAttribute(\"data-target\");\r\n        let tabContent = document.getElementById(targetID);\r\n\r\n        let parentTabsContent = tabContent.closest(\"[data-tabs-content]\");\r\n\r\n        for (const child of parentTabsContent.children) {\r\n          child.classList.remove(\"active\");\r\n        }\r\n\r\n        tabContent.classList.add(\"active\");\r\n        this.parentElement.classList.add(\"active\");\r\n      });\r\n    }\r\n  },\r\n  initModal: function () {\r\n    // add event modal close btn\r\n    let closeBtn = document.getElementsByClassName(\"js-modal-close\");\r\n    for (const button of closeBtn) {\r\n      let modal = button.closest(\".modal\");\r\n      button.addEventListener(\"click\", function () {\r\n        modal.classList.remove(\"is-open\");\r\n      });\r\n    }\r\n\r\n    //init modal cart notify\r\n    let cartNotify = document.getElementById(\"modal_cart_notify\");\r\n    AT.registerEvents(\"cartNotify\", cartNotify);\r\n\r\n    cartNotify.addEventListener(\"cartNotify\", function ({ detail }) {\r\n      let image = this.querySelector(\".js-image\");\r\n      let qty = this.querySelector(\".js-qty\");\r\n      let name = this.querySelector(\".js-name\");\r\n      let totalMoney = this.querySelector(\".js-item-total-money\");\r\n      let cartNumber = this.querySelector(\".js-cart-number\");\r\n      let cartTotalMoney = this.querySelector(\".js-cart-total-money\");\r\n      image.style.opacity = 0;\r\n      image.src = getSizedImageUrl(detail.featured_image.url, \"120x\");\r\n      image.alt = detail.title;\r\n      image.onload = function () {\r\n        this.style.opacity = 1;\r\n      };\r\n      qty.innerHTML = detail.quantity;\r\n      name.innerHTML =\r\n        detail.product_title +\r\n        `<span class=\"option\">${detail.options_with_values\r\n          .map(function (item) {\r\n            return item.value;\r\n          })\r\n          .join(\"/\")}</span>`;\r\n      cartNumber.innerHTML =\r\n        AT.cart.item_count > 1\r\n          ? theme.string.cartNumbers.replace(\"{{count}}\", AT.cart.item_count)\r\n          : theme.string.cartNumber.replace(\"{{count}}\", AT.cart.item_count);\r\n\r\n      totalMoney.innerHTML = AT.currency.formatMoney(detail.final_line_price, theme.currency.moneyFormat);\r\n      cartTotalMoney.innerHTML = AT.currency.formatMoney(AT.cart.total_price, theme.currency.formatMoney);\r\n      this.classList.add(\"is-open\");\r\n    });\r\n\r\n    //init modal newsletter\r\n\r\n    function setCookie(key, value, expiry) {\r\n      var expires = new Date();\r\n      expires.setTime(expires.getTime() + expiry * 24 * 60 * 60 * 1000);\r\n      document.cookie = key + \"=\" + value + \";expires=\" + expires.toUTCString();\r\n    }\r\n\r\n    function getCookie(key) {\r\n      var keyValue = document.cookie.match(\"(^|;) ?\" + key + \"=([^;]*)(;|$)\");\r\n      return keyValue ? keyValue[2] : null;\r\n    }\r\n\r\n    function eraseCookie(key) {\r\n      var keyValue = getCookie(key);\r\n      setCookie(key, keyValue, \"-1\");\r\n    }\r\n\r\n    let newsletter = document.getElementById(\"modal_newsletter\");\r\n    !!newsletter &&\r\n      !getCookie(\"myCookie\") &&\r\n      AT.debounce(function () {\r\n        newsletter.classList.add(\"is-open\");\r\n        setCookie(\"myCookie\", true, 3);\r\n      }, 5000)();\r\n\r\n    if (getCookie(\"removeNewsletter\")) {\r\n      newsletter.remove();\r\n    }\r\n  },\r\n  initRecentlyView: function () {\r\n    let recentlyView = JSON.parse(localStorage.getItem(\"recentlyView\")) || [];\r\n\r\n    !recentlyView.includes(theme.productHandle) && recentlyView.unshift(theme.productHandle);\r\n    recentlyView.length = 10;\r\n\r\n    localStorage.setItem(\"recentlyView\", JSON.stringify(recentlyView));\r\n  },\r\n  initToggleSidebar: function () {\r\n    let openSbBtn = [...document.getElementsByClassName(\"js-drawer-open\")];\r\n    let closeSbBtn = [...document.getElementsByClassName(\"js-drawer-close\")];\r\n\r\n    openSbBtn.forEach(function (button) {\r\n      let targetID = button.getAttribute(\"data-target\");\r\n      let target = document.getElementById(targetID);\r\n      button.addEventListener(\"click\", function () {\r\n        target.classList.add(\"is-open\");\r\n      });\r\n    });\r\n\r\n    closeSbBtn.forEach(function (button) {\r\n      let targetID = button.getAttribute(\"data-target\");\r\n      let target = document.getElementById(targetID);\r\n      button.addEventListener(\"click\", function () {\r\n        target.classList.remove(\"is-open\");\r\n      });\r\n    });\r\n  },\r\n};\r\n\r\nwindow.AT = Object.assign(window.AT | {}, AT);\r\n\r\nexport default AT;\r\n","import AT from \"../_arn\";\r\n\r\nexport let Header = {\r\n  onLoad: function () {\r\n    let container = this.container;\r\n    this.elms = {\r\n      mobileDrawerOpenBtn: [...container.getElementsByClassName(\"js-open-mobile-drawer\")],\r\n      totalCartItems: document.getElementById(\"total_cart_items\"),\r\n      totalCartMoney: container.getElementsByClassName(\"js-total-cart-money\")[0],\r\n      deskLazyMenu: container.getElementsByClassName(\"desk-lazy-menu\"),\r\n      mobileLazyMenu: [...container.getElementsByClassName(\"mobile-lazy-menu\")],\r\n      drawerMobileVertical: document.getElementById(\"vertical_mobile_menu\"),\r\n      drawerMobileHorizontal: document.getElementById(\"horizontal_mobile_menu\"),\r\n      cartDrawer: document.getElementById(\"cart_drawer\"),\r\n      openDrawerCart: container.getElementsByClassName(\"js-drawer-open\"),\r\n      dropdownCart: container.getElementsByClassName(\"js-dropdown-cart\")[0],\r\n      headerCart: document.getElementById(\"header_cart\"),\r\n    };\r\n\r\n    this.initHandleDrawMenu();\r\n    !!this.elms.cartDrawer && this.initHandleDrawCart();\r\n    !!this.elms.dropdownCart && this.initLazyDropdownCart();\r\n    this.initDeskLazyMenu();\r\n    this.initMobileLazyMenu();\r\n    AT.registerEvents(\"cartChange\", container);\r\n\r\n    container.addEventListener(\"cartChange\", this.handleCartChange.bind(this));\r\n  },\r\n  initHandleDrawMenu: function () {\r\n    let { mobileDrawerOpenBtn } = this.elms;\r\n    let firstClick = true;\r\n    for (const button of mobileDrawerOpenBtn) {\r\n      button.addEventListener(\"click\", () => {\r\n        let target = this.elms[button.getAttribute(\"data-target\")];\r\n        target.classList.add(\"is-open\");\r\n        if (firstClick) {\r\n          this.container.dispatchEvent(new CustomEvent(\"mobileLazyMenu\"));\r\n          firstClick = false;\r\n        }\r\n      });\r\n    }\r\n  },\r\n  handleCartChange: function ({ detail: cart }) {\r\n    let { totalCartItems, totalCartMoney } = this.elms;\r\n\r\n    totalCartItems.innerHTML = cart.item_count;\r\n    totalCartMoney.innerHTML = AT.currency.formatMoney(cart.total_price, theme.currency.formatMoney);\r\n  },\r\n  initDeskLazyMenu: function () {\r\n    let { deskLazyMenu } = this.elms;\r\n    const lazyMenu = () => {\r\n      let { deskLazyMenu } = this.elms;\r\n      this.container.removeEventListener(\"deskLazyMenu\", lazyMenu);\r\n      for (const item of deskLazyMenu) {\r\n        item.querySelector(\".lazy-menu\").classList.add(\"lazyload\");\r\n      }\r\n    };\r\n\r\n    this.container.addEventListener(\"deskLazyMenu\", lazyMenu);\r\n\r\n    for (const item of deskLazyMenu) {\r\n      item.addEventListener(\"mouseover\", () => {\r\n        this.container.dispatchEvent(new CustomEvent(\"deskLazyMenu\"));\r\n      });\r\n    }\r\n  },\r\n  initMobileLazyMenu: function () {\r\n    let { mobileLazyMenu } = this.elms;\r\n    const lazyMenu = () => {\r\n      for (const item of mobileLazyMenu) {\r\n        let lazyMenuContainer = item.querySelector(\".lazy-menu\");\r\n\r\n        lazyMenuContainer.classList.add(\"lazyload\");\r\n        lazyMenuContainer.addEventListener(\"lazyincluded\", function () {\r\n          let togglerBtn = [...this.getElementsByClassName(\"js-toggle-menu\")];\r\n          let drawerCloseBtn = [...this.getElementsByClassName(\"js-close-mobile-menu\")];\r\n\r\n          for (const button of drawerCloseBtn) {\r\n            button.addEventListener(\"click\", function () {\r\n              let targetID = this.getAttribute(\"data-target\");\r\n              document.getElementById(targetID).classList.remove(\"is-open\");\r\n            });\r\n          }\r\n\r\n          for (const button of togglerBtn) {\r\n            button.addEventListener(\"click\", function () {\r\n              let targetID = this.getAttribute(\"data-target\");\r\n              document.getElementById(targetID).classList.toggle(\"is-open\");\r\n            });\r\n          }\r\n        });\r\n        this.container.removeEventListener(\"mobileLazyMenu\", lazyMenu);\r\n      }\r\n    };\r\n\r\n    this.container.addEventListener(\"mobileLazyMenu\", lazyMenu);\r\n  },\r\n  initHandleDrawCart: function () {\r\n    let { openDrawerCart, cartDrawer } = this.elms;\r\n    let lazyCartDrawer = cartDrawer.querySelector(\".lazy-drawer-cart\");\r\n\r\n    for (const button of openDrawerCart) {\r\n      button.addEventListener(\"click\", function () {\r\n        cartDrawer.classList.add(\"is-open\");\r\n        document.body.classList.add(\"overflow-hidden\");\r\n        if (!lazyCartDrawer.classList.contains(\"lazyloaded\")) {\r\n          lazyCartDrawer.classList.add(\"lazyload\");\r\n        }\r\n      });\r\n    }\r\n\r\n    lazyCartDrawer.addEventListener(\"lazyincluded\", function () {\r\n      let closeBtn = cartDrawer.getElementsByClassName(\"js-drawer-close\");\r\n      let cartItems = this.getElementsByClassName(\"js-cart-item\");\r\n\r\n      Header.initCartItem(cartItems);\r\n\r\n      for (const button of closeBtn) {\r\n        button.addEventListener(\"click\", () => {\r\n          cartDrawer.classList.remove(\"is-open\");\r\n          AT.debounce(function () {\r\n            document.body.classList.remove(\"overflow-hidden\");\r\n          }, 300)();\r\n        });\r\n      }\r\n    });\r\n  },\r\n  initCartItem: function (cartItems) {\r\n    for (const item of cartItems) {\r\n      let btnRemove = item.querySelector(\".js-btn-remove\");\r\n\r\n      let key = btnRemove.getAttribute(\"data-key\");\r\n      btnRemove.addEventListener(\"click\", function () {\r\n        btnRemove.classList.add(\"pending\");\r\n        AT.removeCartItem(key, function () {\r\n          item.remove();\r\n        });\r\n      });\r\n    }\r\n  },\r\n  initLazyDropdownCart: function () {\r\n    let { dropdownCart, headerCart } = this.elms;\r\n    let lazyContainer = dropdownCart.getElementsByClassName(\"lazy-dropdown-cart\")[0];\r\n\r\n    if (lazyContainer.hasAttribute(\"data-cart-empty\") || !lazyContainer) {\r\n      return;\r\n    }\r\n    headerCart.addEventListener(\"mouseover\", lazyDropdownCart),\r\n      lazyContainer.addEventListener(\"lazyincluded\", function () {\r\n        let cartItems = this.getElementsByClassName(\"js-cart-item\");\r\n\r\n        Header.initCartItem(cartItems);\r\n      });\r\n\r\n    function lazyDropdownCart() {\r\n      lazyContainer.classList.add(\"lazyload\");\r\n      headerCart.removeEventListener(\"mouseover\", lazyDropdownCart);\r\n    }\r\n  },\r\n};\r\n","import { tns } from \"tiny-slider/src/tiny-slider\";\r\n\r\nexport let ProductNoSbTemplate = {\r\n  onLoad: function () {\r\n    let container = this.container;\r\n    this.elms = {\r\n      mainMedia: document.getElementById(\"product_main_media\"),\r\n      thumbnailsMedia: document.getElementById(\"product_thumbnails_media\"),\r\n      productMedia: document.getElementById(\"product_media\"),\r\n      qtyBtnPlus: container.getElementsByClassName(\"js-qty-plus\")[0],\r\n      qtyBtnMinus: container.getElementsByClassName(\"js-qty-minus\")[0],\r\n      formElm: document.getElementById(\"product_form\"),\r\n      formInput: document.getElementById(\"product_form_input\"),\r\n      tabControls: container.getElementsByClassName(\"js-tab-control\"),\r\n      tabContents: container.getElementsByClassName(\"js-tab-content\"),\r\n    };\r\n\r\n    this.initSlideMedia();\r\n    this.initQuantity();\r\n    this.initTab();\r\n  },\r\n  initSlideMedia: function () {\r\n    let { mainMedia, thumbnailsMedia } = this.elms;\r\n    let mainMediaSlider, thumbnailsMediaSlider;\r\n\r\n    (function () {\r\n      let configID = mainMedia.dataset.config;\r\n      let config = JSON.parse(document.getElementById(configID).innerHTML);\r\n\r\n      mainMediaSlider = tns(config);\r\n    })();\r\n\r\n    (function () {\r\n      let configID = thumbnailsMedia.dataset.config;\r\n      let config = JSON.parse(document.getElementById(configID).innerHTML);\r\n      let axis;\r\n\r\n      if (window.innerWidth >= 768) {\r\n        axis = \"vertical\";\r\n        config.axis = axis;\r\n        thumbnailsMediaSlider = tns(config);\r\n      } else {\r\n        axis = \"horizontal\";\r\n        config.axis = axis;\r\n        thumbnailsMediaSlider = tns(config);\r\n      }\r\n      window.addEventListener(\"resize\", () => {\r\n        if (window.innerWidth >= 768 && axis !== \"vertical\") {\r\n          thumbnailsMediaSlider.destroy();\r\n          axis = \"vertical\";\r\n          config.axis = axis;\r\n          thumbnailsMediaSlider = tns(config);\r\n          mainMediaSlider.rebuild();\r\n        } else if (window.innerWidth <= 767.9 && axis !== \"horizontal\") {\r\n          thumbnailsMediaSlider.destroy();\r\n          axis = \"horizontal\";\r\n          config.axis = axis;\r\n          thumbnailsMediaSlider = tns(config);\r\n          mainMediaSlider.rebuild();\r\n        }\r\n      });\r\n    })();\r\n  },\r\n  initQuantity: function () {\r\n    let { qtyBtnPlus, qtyBtnMinus, formInput } = this.elms;\r\n\r\n    qtyBtnPlus.addEventListener(\"click\", function () {\r\n      formInput.value = +formInput.value + 1;\r\n    });\r\n    qtyBtnMinus.addEventListener(\"click\", function () {\r\n      if (+formInput.value === 0) {\r\n        return;\r\n      } else {\r\n        formInput.value = +formInput.value - 1;\r\n      }\r\n    });\r\n  },\r\n  initTab: function () {\r\n    let { tabControls } = this.elms;\r\n\r\n    if ([...tabControls].length === 0) {\r\n      return;\r\n    }\r\n    for (const control of tabControls) {\r\n      let parent = control.closest(\"[data-tab-controls]\");\r\n      let targetID = control.getAttribute(\"data-target\");\r\n      let tabContent = document.getElementById(targetID);\r\n\r\n      let parentTabsContent = tabContent.closest(\"[data-tab-contents]\");\r\n      control.addEventListener(\"click\", function (e) {\r\n        if (this.classList.contains(\"active\")) {\r\n          return;\r\n        }\r\n\r\n        for (const child of parent.children) {\r\n          child.classList.remove(\"active\");\r\n        }\r\n\r\n        for (const child of parentTabsContent.children) {\r\n          child.classList.remove(\"active\");\r\n        }\r\n\r\n        tabContent.classList.add(\"active\");\r\n        this.classList.add(\"active\");\r\n      });\r\n    }\r\n  },\r\n};\r\n","import { tns } from \"tiny-slider/src/tiny-slider\";\r\nimport Mustache from \"mustache\";\r\nexport let ProductWithSb = {\r\n  onLoad: function () {\r\n    let container = this.container;\r\n    this.elms = {\r\n      mainMedia: document.getElementById(\"product_main_media\"),\r\n      thumbnailsMedia: document.getElementById(\"product_thumbnails_media\"),\r\n      productMedia: document.getElementById(\"product_media\"),\r\n      qtyBtnPlus: container.getElementsByClassName(\"js-qty-plus\")[0],\r\n      qtyBtnMinus: container.getElementsByClassName(\"js-qty-minus\")[0],\r\n      formElm: document.getElementById(\"product_form\"),\r\n      formInput: document.getElementById(\"product_form_input\"),\r\n      tabControls: container.getElementsByClassName(\"js-tab-control\"),\r\n      openSbBtn: document.getElementById(\"js_open_sidebar\"),\r\n      closeSbBtn: document.getElementById(\"js_close_sidebar\"),\r\n      sbContainer: document.getElementById(\"sidebarDrawer\"),\r\n      recentlyViewContainer: document.getElementById(\"product_sb_recently_view\"),\r\n    };\r\n\r\n    this.initSlideMedia();\r\n    this.initQuantity();\r\n    this.initTab();\r\n    this.initToggleSb();\r\n    this.initRecentlyView();\r\n  },\r\n  initSlideMedia: function () {\r\n    let { mainMedia, thumbnailsMedia } = this.elms;\r\n    let mainMediaSlider, thumbnailsMediaSlider;\r\n\r\n    (function () {\r\n      let configID = mainMedia.dataset.config;\r\n      let config = JSON.parse(document.getElementById(configID).innerHTML);\r\n\r\n      mainMediaSlider = tns(config);\r\n    })();\r\n\r\n    (function () {\r\n      let configID = thumbnailsMedia.dataset.config;\r\n      let config = JSON.parse(document.getElementById(configID).innerHTML);\r\n      thumbnailsMediaSlider = tns(config);\r\n    })();\r\n  },\r\n  initQuantity: function () {\r\n    let { qtyBtnPlus, qtyBtnMinus, formInput } = this.elms;\r\n\r\n    qtyBtnPlus.addEventListener(\"click\", function () {\r\n      formInput.value = +formInput.value + 1;\r\n    });\r\n    qtyBtnMinus.addEventListener(\"click\", function () {\r\n      if (+formInput.value === 0) {\r\n        return;\r\n      } else {\r\n        formInput.value = +formInput.value - 1;\r\n      }\r\n    });\r\n  },\r\n  initTab: function () {\r\n    let { tabControls } = this.elms;\r\n\r\n    if ([...tabControls].length === 0) {\r\n      return;\r\n    }\r\n\r\n    for (const control of tabControls) {\r\n      let parent = control.closest(\"[data-tab-controls]\");\r\n      let targetID = control.getAttribute(\"data-target\");\r\n      let tabContent = document.getElementById(targetID);\r\n\r\n      let parentTabsContent = tabContent.closest(\"[data-tab-contents]\");\r\n      control.addEventListener(\"click\", function (e) {\r\n        if (this.classList.contains(\"active\")) {\r\n          return;\r\n        }\r\n\r\n        for (const child of parent.children) {\r\n          child.classList.remove(\"active\");\r\n        }\r\n\r\n        for (const child of parentTabsContent.children) {\r\n          child.classList.remove(\"active\");\r\n        }\r\n\r\n        tabContent.classList.add(\"active\");\r\n        this.classList.add(\"active\");\r\n      });\r\n    }\r\n  },\r\n  initToggleSb: function () {\r\n    let { openSbBtn, closeSbBtn, sbContainer } = this.elms;\r\n\r\n    openSbBtn.addEventListener(\"click\", () => {\r\n      sbContainer.classList.add(\"is-open\");\r\n    });\r\n    closeSbBtn.addEventListener(\"click\", () => {\r\n      sbContainer.classList.remove(\"is-open\");\r\n    });\r\n  },\r\n  initRecentlyView: async function () {\r\n    let { recentlyViewContainer } = this.elms;\r\n    let recentlyViewTemplate = document.getElementById(\"product_sb_review_template\");\r\n    if (!recentlyViewContainer) {\r\n      return;\r\n    }\r\n    let recent_total = theme.recentlyViewTotal;\r\n    let recentlyView = JSON.parse(localStorage.getItem(\"recentlyView\")) || [];\r\n\r\n    recentlyView.length = recent_total;\r\n\r\n    let recentlyViewPromise = recentlyView.map(\r\n      (item) => !!item && fetch(`/products/${item.trim()}.js`).then((res) => res.json())\r\n    );\r\n    console.log(recentlyViewTemplate);\r\n    let recentlyViewData = await Promise.all(recentlyViewPromise);\r\n    let recentlyViewLayout = Mustache.render(\r\n      recentlyViewTemplate,\r\n      recentlyViewData.filter((item) => !!item)\r\n    );\r\n  },\r\n};\r\n","import { tns } from \"tiny-slider/src/tiny-slider\";\r\n\r\nexport let ProductDefaultTemplate = {\r\n  onLoad: function () {\r\n    let container = this.container;\r\n    this.elms = {\r\n      mainMedia: document.getElementById(\"product_main_media\"),\r\n      thumbnailsMedia: document.getElementById(\"product_thumbnails_media\"),\r\n      productMedia: document.getElementById(\"product_media\"),\r\n      qtyBtnPlus: container.getElementsByClassName(\"js-qty-plus\")[0],\r\n      qtyBtnMinus: container.getElementsByClassName(\"js-qty-minus\")[0],\r\n      formElm: document.getElementById(\"product_form\"),\r\n      formInput: document.getElementById(\"product_form_input\"),\r\n      tabControls: container.getElementsByClassName(\"js-tab-control\"),\r\n      tabContents: container.getElementsByClassName(\"js-tab-content\"),\r\n    };\r\n\r\n    this.initSlideMedia();\r\n    this.initQuantity();\r\n    this.initTab();\r\n  },\r\n  initSlideMedia: function () {\r\n    let { mainMedia, thumbnailsMedia } = this.elms;\r\n    let mainMediaSlider, thumbnailsMediaSlider;\r\n\r\n    (function () {\r\n      let configID = mainMedia.dataset.config;\r\n      let config = JSON.parse(document.getElementById(configID).innerHTML);\r\n\r\n      mainMediaSlider = tns(config);\r\n    })();\r\n\r\n    (function () {\r\n      let configID = thumbnailsMedia.dataset.config;\r\n      let config = JSON.parse(document.getElementById(configID).innerHTML);\r\n      thumbnailsMediaSlider = tns(config);\r\n    })();\r\n  },\r\n  initQuantity: function () {\r\n    let { qtyBtnPlus, qtyBtnMinus, formInput } = this.elms;\r\n\r\n    if (!formInput) {\r\n      return;\r\n    }\r\n    qtyBtnPlus.addEventListener(\"click\", function () {\r\n      formInput.value = +formInput.value + 1;\r\n    });\r\n    qtyBtnMinus.addEventListener(\"click\", function () {\r\n      if (+formInput.value === 0) {\r\n        return;\r\n      } else {\r\n        formInput.value = +formInput.value - 1;\r\n      }\r\n    });\r\n  },\r\n  initTab: function () {\r\n    let { tabControls } = this.elms;\r\n\r\n    if ([...tabControls].length === 0) {\r\n      return;\r\n    }\r\n\r\n    for (const control of tabControls) {\r\n      let parent = control.closest(\"[data-tab-controls]\");\r\n      let targetID = control.getAttribute(\"data-target\");\r\n      let tabContent = document.getElementById(targetID);\r\n\r\n      let parentTabsContent = tabContent.closest(\"[data-tab-contents]\");\r\n      control.addEventListener(\"click\", function (e) {\r\n        if (this.classList.contains(\"active\")) {\r\n          return;\r\n        }\r\n\r\n        for (const child of parent.children) {\r\n          child.classList.remove(\"active\");\r\n        }\r\n\r\n        for (const child of parentTabsContent.children) {\r\n          child.classList.remove(\"active\");\r\n        }\r\n\r\n        tabContent.classList.add(\"active\");\r\n        this.classList.add(\"active\");\r\n      });\r\n    }\r\n  },\r\n};\r\n","import AT from \"../_arn\";\r\n\r\nexport let RelatedProduct = {\r\n  onLoad: function () {\r\n    let tnsWrapper = this.container.getElementsByClassName(\"tns-wrapper\")[0];\r\n    this.tns = AT.initTNS(tnsWrapper);\r\n  },\r\n};\r\n","import { register, load } from \"@shopify/theme-sections\";\r\n\r\nimport { Header, ProductDefaultTemplate, RelatedProduct } from \"./.common/section\";\r\nimport AT from \"./.common/_arn\";\r\n\r\n(function () {\r\n  register(\"header\", Header);\r\n  register(\"product-template\", ProductDefaultTemplate);\r\n  register(\"related-product\", RelatedProduct);\r\n  load(\"*\");\r\n\r\n  AT.initAddToCart();\r\n  AT.initModal();\r\n  AT.initBackToTop();\r\n  AT.initRecentlyView();\r\n})();\r\n"],"sourceRoot":""}